!function e(t,a,r){function s(i,n){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!n&&l)return l(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=a[i]={exports:{}};t[i][0].call(d.exports,function(e){var a=t[i][1][e];return s(a||e)},d,d.exports,e,t,a,r)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{type:Ee,data:e}}function o(e){return{type:Te,data:e}}function i(){return{type:we}}function n(){return{type:je}}function l(){return{type:Se}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:ke,data:e,error:t,receivedAt:Date.now()}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.limit=20;var t=(0,ye.stringify)(e);return ue(ve.default.api+"/requests?"+t,l,u)}function c(){return{type:xe}}function m(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:Ne,data:e,error:a,receivedAt:t}}function p(){return function(e,t){e(c());var a=t().requestsAll;if(null!==a.receivedAt){if(Date.now()-a.receivedAt<36e5)return e(m(a.data,a.receivedAt))}(0,he.default)(ve.default.api+"/requests?footprint=true&limit=9999").then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(t){e(m(t,Date.now()))},function(t){return console.log("e",t),e(m(null,null,"Data not available"))})}}function f(){return{type:qe}}function h(){return{type:Me}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ce,data:e,error:t,receivedAt:Date.now()}}function g(e,t){var a=(0,ye.stringify)(t);return ue(ve.default.api+"/requests/"+e+"?"+a,h,y)}function v(){return{type:Le}}function b(){return{type:Ae}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Fe,data:e,error:t,receivedAt:Date.now()}}function E(e){return ue(ve.default.api+"/requests/"+e+"/tasks?limit=100",b,_)}function T(){return{type:ze}}function w(){return{type:Ie}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ue,data:e,error:t,receivedAt:Date.now()}}function k(e,t){return ue(ve.default.api+"/requests/"+e+"/tasks/"+t,w,S)}function j(){return{type:Re}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:De,data:e,error:t,receivedAt:Date.now()}}function N(){return ue(ve.default.api+"/users",j,x)}function R(e){return{type:Ve,tab:e}}function D(){return{type:Be}}function O(){return{type:Ye}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:He,data:e,error:t,receivedAt:Date.now()}}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.limit=10;var a=(0,ye.stringify)(t);return de(ve.default.api+"/users/"+e+"/tasks?"+a,O,P)}function C(){return{type:Ke}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:We,data:e,error:t,receivedAt:Date.now()}}function A(e,t,a){return ce(ve.default.api+"/requests/"+e+"/tasks/"+t+"/updates",a,C,q)}function F(){return{type:Qe}}function L(){return{type:Ge}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Je,data:e,error:t,receivedAt:Date.now()}}function U(e){return ce(ve.default.api+"/requests",e,L,I)}function z(e,t){return me(ve.default.api+"/requests/"+e,t,L,I)}function V(){return{type:et}}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:tt,data:e,error:t,receivedAt:Date.now()}}function H(e,t){return pe(ve.default.api+"/requests/"+e,V,Y)}function B(){return{type:Ze}}function K(){return{type:Xe}}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:$e,data:e,error:t,receivedAt:Date.now()}}function Q(e,t){return ce(ve.default.api+"/requests/"+e+"/tasks",t,K,W)}function G(e,t,a){return me(ve.default.api+"/requests/"+e+"/tasks/"+t,a,K,W)}function J(){return{type:at}}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:rt,data:e,error:t,receivedAt:Date.now()}}function X(e,t){return pe(ve.default.api+"/requests/"+e+"/tasks/"+t,J,Z)}function $(){return{type:Oe}}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Pe,data:e,error:t,receivedAt:Date.now()}}function te(){return ue(ve.default.api+"/stats",$,ee)}function ae(e){return{type:st,layer:e}}function re(){return{type:ot}}function se(){return{type:ut}}function oe(e){return{type:it,layer:e}}function ie(e){return{type:nt,center:e}}function ne(e){return{type:lt,zoom:e}}function le(e,t,a,r){return function(s,o){s(a()),(0,he.default)(e,t).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){s(r(e))},function(e){return console.log("e",e),s(r(null,"Data not available"))})}}function ue(e,t,a){return le(e,null,t,a)}function de(e,t,a){return le(e,{headers:{Authorization:"Bearer "+_e.default.getState().user.token}},t,a)}function ce(e,t,a,r){return le(e,{method:"POST",headers:{Authorization:"Bearer "+_e.default.getState().user.token},body:JSON.stringify(t)},a,r)}function me(e,t,a,r){return le(e,{method:"PATCH",headers:{Authorization:"Bearer "+_e.default.getState().user.token},body:JSON.stringify(t)},a,r)}function pe(e,t,a){return le(e,{method:"DELETE",headers:{Authorization:"Bearer "+_e.default.getState().user.token}},t,a)}Object.defineProperty(a,"__esModule",{value:!0}),a.RESET_SEARCH_MAP=a.SET_SEARCH_MAP_ZOOM=a.SET_SEARCH_MAP_CENTER=a.SET_SEARCH_MAP_BASELAYER=a.RESET_MAP_LAYER=a.SET_MAP_LAYER=a.FINISH_DELETE_TASK=a.START_DELETE_TASK=a.FINISH_DELETE_REQUEST=a.START_DELETE_REQUEST=a.FINISH_POST_TASK=a.START_POST_TASK=a.RESET_TASK_FORM=a.FINISH_POST_REQUEST=a.START_POST_REQUEST=a.RESET_REQUEST_FORM=a.FINISH_ADD_TASK_STATUS_UPDATE=a.START_ADD_TASK_STATUS_UPDATE=a.INVALIDATE_USER_TASKS=a.RECEIVE_USER_TASKS=a.REQUEST_USER_TASKS=a.SELECT_DASHBOARD_TAB=a.INVALIDATE_TASK=a.RECEIVE_TASK=a.REQUEST_TASK=a.INVALIDATE_TASKS=a.RECEIVE_TASKS=a.REQUEST_TASKS=a.INVALIDATE_REQUEST=a.RECEIVE_REQUEST=a.REQUEST_REQUEST=a.RECEIVE_GENERAL_STATS=a.REQUEST_GENERAL_STATS=a.RECEIVE_USERS=a.REQUEST_USERS=a.RECEIVE_ALL_REQUESTS=a.REQUEST_ALL_REQUESTS=a.INVALIDATE_REQUESTS=a.RECEIVE_REQUESTS=a.REQUEST_REQUESTS=a.LOGOUT_USER=a.SET_USER_PROFILE=a.SET_USER_TOKEN=void 0,a.setUserToken=s,a.setUserProfile=o,a.logoutUser=i,a.invalidateRequests=n,a.requestRequests=l,a.receiveRequests=u,a.fetchRequests=d,a.requestAllRequests=c,a.receiveAllRequests=m,a.fetchAllRequests=p,a.invalidateRequest=f,a.requestRequest=h,a.receiveRequest=y,a.fetchRequest=g,a.invalidateTasks=v,a.requestTasks=b,a.receiveTasks=_,a.fetchRequestTasks=E,a.invalidateTask=T,a.requestTask=w,a.receiveTask=S,a.fetchTask=k,a.requestUsers=j,a.receiveUsers=x,a.fetchUsers=N,a.selectDashboardTab=R,a.invalidateUserTasks=D,a.requestUserTasks=O,a.receiveUserTasks=P,a.fetchRequestUserTasks=M,a.startAddTaskStatusUpdate=C,a.finishAddTaskStatusUpdate=q,a.addTaskStatusUpdate=A,a.resetRequestFrom=F,a.startPostRequest=L,a.finishPostRequest=I,a.postRequest=U,a.patchRequest=z,a.startDeleteRequest=V,a.finishDeleteRequest=Y,a.deleteRequest=H,a.resetTaskFrom=B,a.startPostTask=K,a.finishPostTask=W,a.postTask=Q,a.patchTask=G,a.startDeleteTask=J,a.finishDeleteTask=Z,a.deleteTask=X,a.requestGeneralStats=$,a.receiveGeneralStats=ee,a.fetchGeneralStats=te,a.setMapBaseLayer=ae,a.resetMapBaseLayer=re,a.resetSearchMap=se,a.setSearchMapBaseLayer=oe,a.setSearchMapBaseCenter=ie,a.setSearchMapBaseZoom=ne;var fe=e("isomorphic-fetch"),he=r(fe),ye=e("qs"),ge=e("../config"),ve=r(ge),be=e("../utils/store"),_e=r(be),Ee=a.SET_USER_TOKEN="SET_USER_TOKEN",Te=a.SET_USER_PROFILE="SET_USER_PROFILE",we=a.LOGOUT_USER="LOGOUT_USER",Se=a.REQUEST_REQUESTS="REQUEST_REQUESTS",ke=a.RECEIVE_REQUESTS="RECEIVE_REQUESTS",je=a.INVALIDATE_REQUESTS="INVALIDATE_REQUESTS",xe=a.REQUEST_ALL_REQUESTS="REQUEST_All_REQUESTS",Ne=a.RECEIVE_ALL_REQUESTS="RECEIVE_All_REQUESTS",Re=a.REQUEST_USERS="REQUEST_USERS",De=a.RECEIVE_USERS="RECEIVE_USERS",Oe=a.REQUEST_GENERAL_STATS="REQUEST_GENERAL_STATS",Pe=a.RECEIVE_GENERAL_STATS="RECEIVE_GENERAL_STATS",Me=a.REQUEST_REQUEST="REQUEST_REQUEST",Ce=a.RECEIVE_REQUEST="RECEIVE_REQUEST",qe=a.INVALIDATE_REQUEST="INVALIDATE_REQUEST",Ae=a.REQUEST_TASKS="REQUEST_TASKS",Fe=a.RECEIVE_TASKS="RECEIVE_TASKS",Le=a.INVALIDATE_TASKS="INVALIDATE_TASKS",Ie=a.REQUEST_TASK="REQUEST_TASK",Ue=a.RECEIVE_TASK="RECEIVE_TASK",ze=a.INVALIDATE_TASK="INVALIDATE_TASK",Ve=a.SELECT_DASHBOARD_TAB="SELECT_DASHBOARD_TAB",Ye=a.REQUEST_USER_TASKS="REQUEST_USER_TASKS",He=a.RECEIVE_USER_TASKS="RECEIVE_USER_TASKS",Be=a.INVALIDATE_USER_TASKS="INVALIDATE_USER_TASKS",Ke=a.START_ADD_TASK_STATUS_UPDATE="START_ADD_TASK_STATUS_UPDATE",We=a.FINISH_ADD_TASK_STATUS_UPDATE="FINISH_ADD_TASK_STATUS_UPDATE",Qe=a.RESET_REQUEST_FORM="RESET_REQUEST_FORM",Ge=a.START_POST_REQUEST="START_POST_REQUEST",Je=a.FINISH_POST_REQUEST="FINISH_POST_REQUEST",Ze=a.RESET_TASK_FORM="RESET_TASK_FORM",Xe=a.START_POST_TASK="START_POST_TASK",$e=a.FINISH_POST_TASK="FINISH_POST_TASK",et=a.START_DELETE_REQUEST="START_DELETE_REQUEST",tt=a.FINISH_DELETE_REQUEST="FINISH_DELETE_REQUEST",at=a.START_DELETE_TASK="START_DELETE_TASK",rt=a.FINISH_DELETE_TASK="FINISH_DELETE_TASK",st=a.SET_MAP_LAYER="SET_MAP_LAYER",ot=a.RESET_MAP_LAYER="SET_MAP_LAYER",it=a.SET_SEARCH_MAP_BASELAYER="SET_SEARCH_MAP_BASELAYER",nt=a.SET_SEARCH_MAP_CENTER="SET_SEARCH_MAP_CENTER",lt=a.SET_SEARCH_MAP_ZOOM="SET_SEARCH_MAP_ZOOM",ut=a.RESET_SEARCH_MAP="RESET_SEARCH_MAP"},{"../config":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config.js","../utils/store":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/store.js","isomorphic-fetch":"isomorphic-fetch",qs:"qs"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/dashboard-map.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-dom"),n=e("mapbox-gl"),l=r(n),u=e("@turf/center"),d=r(u),c=e("@turf/bbox"),m=r(c),p=e("lodash"),f=r(p),h=e("./map-layers"),y=r(h),g=e("./map-task-popover"),v=r(g),b=e("../utils/map"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(b),E=e("../utils/constants"),T=o.default.createClass({displayName:"DashboardMap",propTypes:{onBaseLayerChange:s.PropTypes.func,selectedLayer:s.PropTypes.object,mapId:s.PropTypes.string,results:s.PropTypes.object,className:s.PropTypes.string},zoomThreshold:11,componentDidMount:function(){this.map=_.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){var a=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(e.map.getCanvas().style.cursor=a.length?"pointer":"",e.map.getZoom()>=e.zoomThreshold){var r=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(r.length){e.map.setFilter("task-highlight",["==","_id",r[0].properties._id]);var s=f.default.find(E.taskStatusStyles,{name:r[0].properties.status});e.map.setPaintProperty("task-highlight","fill-color",s.color),e.map.setPaintProperty("task-polygon","fill-opacity",.1)}else e.map.setFilter("task-highlight",["==","_id",""]),e.map.setPaintProperty("task-polygon","fill-opacity",.64)}}),this.map.on("click",function(t){var a=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(a.length){var r=a[0],s=document.createElement("div");(0,i.render)(o.default.createElement(v.default,{data:r.properties}),s),(new l.default.Popup).setLngLat((0,d.default)(r).geometry.coordinates).setDOMContent(s).addTo(e.map)}}),this.map.on("zoom",function(){e.map.getSource("task")&&e.map.getSource("points")&&(e.map.getZoom()<e.zoomThreshold?e.showPoints():e.hidePoints())})},getActiveLayers:function(){return this.map.getZoom()<this.zoomThreshold?["task-points"]:["task-polygon"]},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,a=e.results;!t||!t.features.length||a&&a.features.length?a&&!f.default.isEqual(this.props.results,a)&&this.updateFeatures(a):this.refreshMap(),t&&t.features.length||!a||!a.features.length||this.setupFeatures(a),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},showPoints:function(){this.map.setLayoutProperty("task-points","visibility","visible"),this.map.setLayoutProperty("task-polygon","visibility","none"),this.map.setLayoutProperty("task-highlight","visibility","none")},hidePoints:function(){this.map.setLayoutProperty("task-points","visibility","none"),this.map.setLayoutProperty("task-polygon","visibility","visible"),this.map.setLayoutProperty("task-highlight","visibility","visible")},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"task-highlight",type:"fill",source:"task",paint:{"fill-opacity":.64},layout:{visibility:"none"},filter:["==","_id",""]}),this.map.addLayer({id:"task-polygon",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:E.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.64},layout:{visibility:"none"}});var t=f.default.cloneDeep(e);t.features.forEach(function(e){return e.geometry=(0,d.default)(e).geometry,e}),this.map.addSource("points",{type:"geojson",data:t}),this.map.addLayer({id:"task-points",type:"circle",source:"points",paint:{"circle-color":{property:"status",type:"categorical",stops:E.taskStatusStyles.map(function(e){return[e.name,e.color]})},"circle-radius":10}})},zoomToFeatures:function(e){this.map.fitBounds((0,m.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&this.map.getSource("points")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("task-highlight"),this.map.removeLayer("task-polygon"),this.map.removeLayer("task-points"),this.map.removeSource("task"),this.map.removeSource("points")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{className:"map-layers"},o.default.createElement(y.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),o.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=T},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/edit-map.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("mapbox-gl-draw"),n=r(i),l=e("@turf/bbox"),u=r(l),d=e("lodash"),c=r(d),m=e("./map-layers"),p=r(m),f=e("../utils/mapbox-styles"),h=e("../utils/map"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),g=o.default.createClass({displayName:"EditMap",propTypes:{selectedLayer:s.PropTypes.object,mapId:s.PropTypes.string,className:s.PropTypes.string,onFeatureDraw:s.PropTypes.func,onFeatureRemove:s.PropTypes.func,onBaseLayerSelect:s.PropTypes.func,geometry:s.PropTypes.object,otherTasks:s.PropTypes.object},map:null,drawPlugin:null,wasDraw:null,componentDidMount:function(){this.map=y.setupMap(this.refs.map,this.props.selectedLayer.url),this.addDraw(),this.map.on("load",this.onMapLoaded)},componentWillUnmount:function(){this.map.remove()},componentWillReceiveProps:function(e){var t=this.props.geometry,a=e.geometry;a||(this.drawPlugin.deleteAll(),this.startDrawing()),(t&&a&&a.geometry.coordinates[0]&&!c.default.isEqual(t,a)||!t&&a&&a.geometry.coordinates)&&this.loadExistingSource(a),this.map._loaded&&!c.default.isEqual(this.props.otherTasks,e.otherTasks)&&this.addShadowFeatures(e.otherTasks),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},onMapLoaded:function(){var e=this,t=document.querySelector(".mapbox-gl-draw_trash"),a=t.classList;a.add("disabled"),a.remove("active"),t.addEventListener("click",function(){"direct_select"===e.drawPlugin.getMode()&&(e.drawPlugin.deleteAll(),e.startDrawing(),a.add("disabled"),a.remove("active"))});var r=this.props.geometry;r&&r.geometry.coordinates?this.loadExistingSource(r):this.addNewSource(),this.addShadowFeatures(this.props.otherTasks)},addShadowFeatures:function(e){null!==e&&(this.map.getSource("shadow-features")&&this.map.removeSource("shadow-features"),this.map.addSource("shadow-features",{type:"geojson",data:e}),this.map.getLayer("shadow-features")||this.map.addLayer({id:"shadow-features",type:"fill",source:"shadow-features",paint:{"fill-color":"#000","fill-opacity":.16}}),this.props.geometry||this.map.fitBounds((0,u.default)(e),{padding:30,duration:0}))},addDraw:function(){var e=this;this.drawPlugin=new n.default({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},styles:f.mbStyles}),this.map.addControl(this.drawPlugin),this.map.on("draw.create",function(){return e.handleDraw()}),this.map.on("draw.delete",function(){return e.handleDraw()}),this.map.on("draw.update",function(){return e.handleDraw()}),this.map.on("draw.selectionchange",function(){var t=e.drawPlugin.getSelectedIds(),a=document.querySelector(".mapbox-gl-draw_trash").classList;t.length?(e.drawPlugin.changeMode("direct_select",{featureId:t[0]}),a.add("active"),a.remove("disabled")):(a.add("disabled"),a.remove("active"))}),this.startDrawing()},loadExistingSource:function(e){e=Object.assign({},e),e.id="edit-layer",this.limitDrawing(),!this.wasDraw&&this.zoomToFeature(e),this.wasDraw=!1,this.drawPlugin.set({type:"FeatureCollection",features:[e]})},addNewSource:function(){this.map.addSource("edit-layer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.addLayer()},addLayer:function(){this.map.addLayer({id:"edit-layer",type:"fill",source:"edit-layer",layout:{},filter:["all",["==","$type","Polygon"]]})},zoomToFeature:function(e){this.map.fitBounds((0,u.default)(e),{padding:15,duration:0})},startDrawing:function(){var e=document.querySelector(".mapbox-gl-draw_polygon").classList;e.remove("disabled"),e.add("active")},limitDrawing:function(){var e=document.querySelector(".mapbox-gl-draw_polygon").classList;e.remove("active"),e.add("disabled")},handleDraw:function(){var e=this.drawPlugin.getAll(),t=e.features.length;0===t?(this.startDrawing(),this.props.onFeatureRemove()):1===t&&(this.limitDrawing(),this.wasDraw=!0,this.props.onFeatureDraw(e))},render:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{className:"map-layers"},o.default.createElement(p.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerSelect})),o.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=g},{"../utils/map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js","../utils/mapbox-styles":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/mapbox-styles.js","./map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js","@turf/bbox":"@turf/bbox",lodash:"lodash","mapbox-gl-draw":"mapbox-gl-draw",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/home-map.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-dom"),n=e("mapbox-gl"),l=r(n),u=e("@mapbox/geojson-normalize"),d=r(u),c=e("@turf/center"),m=r(c),p=e("@turf/bbox"),f=r(p),h=e("lodash"),y=r(h),g=e("oam-design-system"),v=e("../utils/map"),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),_=e("./map-layers"),E=r(_),T=e("./map-request-popover"),w=r(T),S=e("../utils/constants"),k=o.default.createClass({displayName:"HomeMap",propTypes:{onBaseLayerChange:s.PropTypes.func,selectedLayer:s.PropTypes.object,mapId:s.PropTypes.string,results:s.PropTypes.object,className:s.PropTypes.string,selectedId:s.PropTypes.string},map:null,popup:null,componentDidMount:function(){this.map=b.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},componentWillReceiveProps:function(e){var t=(0,d.default)(this.props.results),a=(0,d.default)(e.results);!t||!t.features.length||a&&a.features.length?a&&!y.default.isEqual(this.props.results,a)&&this.updateFeatures(a):this.refreshMap(),t&&t.features.length||!a||!a.features.length||this.setupFeatures(a),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},componentWillUnmount:function(){this.map.remove()},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){if(e.map.getLayer("requests")){var a=e.map.queryRenderedFeatures(t.point,{layers:["requests"]});e.map.getCanvas().style.cursor=a.length?"pointer":""}}),this.map.on("click",function(t){if(e.map.getLayer("requests")){var a=e.map.queryRenderedFeatures(t.point,{layers:["requests"]});if(a.length){var r=a[0];e.openPopup(r.properties._id)}}})},openPopup:function(e){null!==this.popup&&this.popup.remove();var t=y.default.find(this.props.results.features,function(t){return t.properties._id===e}),a=document.createElement("div");(0,i.render)(o.default.createElement(w.default,{data:t.properties}),a),this.popup=(new l.default.Popup).setLngLat((0,m.default)(t).geometry.coordinates).setDOMContent(a).addTo(this.map)},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},addFeatures:function(e){var t=y.default.cloneDeep(e);t.features.forEach(function(e){e.geometry=(0,m.default)(e).geometry}),this.map.addSource("requests",{type:"geojson",data:t}),this.map.addLayer({id:"requests",type:"circle",source:"requests",paint:{"circle-color":{property:"status",type:"categorical",stops:S.requestStatusStyles.map(function(e){return[e.name,e.color]})},"circle-radius":10}});var a=y.default.sortBy(this.props.results.features,function(e){return e.properties.created});this.openPopup(y.default.last(a).properties._id)},zoomToFeatures:function(e){this.map.fitBounds((0,f.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("requests")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("requests"),this.map.removeSource("requests")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},onJumpToSelect:function(e,t){if(t.preventDefault(),this.props.results.features.length){var a;switch(e){case"most-recent":var r=y.default.sortBy(this.props.results.features,function(e){return e.properties.created});a=y.default.last(r);break;case"next-due":var s=this.props.results.features.filter(function(e){return null!==e.properties.tasksInfo.nextDue});if(!s.length)return;a=y.default.sortBy(s,function(e){return e.properties.tasksInfo.nextDue.deliveryTime})[0];break;case"full-extent":return void(this.props.results&&this.map.fitBounds((0,f.default)(this.props.results)))}this.map.flyTo({center:(0,m.default)(a).geometry.coordinates,zoom:5}),this.openPopup(a.properties._id)}},render:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{className:"map-layers"},o.default.createElement(E.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),o.default.createElement("div",{id:this.props.mapId,ref:"map"}),o.default.createElement("div",{className:"map-jump"},o.default.createElement(g.Dropdown,{triggerElement:"a",triggerClassName:"button button--achromic drop__toggle--caret",triggerActiveClassName:"button--active",triggerTitle:"Jump to",triggerText:"Jump to",direction:"up",className:"drop__content",alignment:"right"},o.default.createElement("ul",{className:"drop__menu drop__menu--select"},o.default.createElement("li",null,o.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"next-due"),"data-hook":"dropdown:close"},"Next due")),o.default.createElement("li",null,o.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"most-recent"),"data-hook":"dropdown:close"},"Most recent")),o.default.createElement("li",null,o.default.createElement("a",{href:"#",className:"drop__menu-item",onClick:this.onJumpToSelect.bind(null,"full-extent"),"data-hook":"dropdown:close"},"Full extent"))))))}});t.exports=k},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js","./map-request-popover":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-request-popover.js","@mapbox/geojson-normalize":"@mapbox/geojson-normalize","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl","oam-design-system":"oam-design-system",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("oam-design-system"),n=e("mapbox-gl"),l=r(n),u=e("../utils/map-layers"),d=r(u),c=o.default.createClass({displayName:"MapLayers",propTypes:{onBaseLayerSelect:s.PropTypes.func,selectedLayer:s.PropTypes.object},onLayerSelect:function(e,t){t.preventDefault(),this.props.onBaseLayerSelect(e)},render:function(){var e=this;return o.default.createElement(i.Dropdown,{triggerElement:"a",triggerClassName:"button-layers",triggerActiveClassName:"button--active",triggerTitle:"Choose map layer",triggerText:"Choose map layer",direction:"left",className:"drop__content--maplayers",alignment:"middle"},o.default.createElement("ul",{className:"drop__menu drop__menu--select map-layers-list"},d.default.map(function(t){return o.default.createElement("li",{key:t.id},o.default.createElement(m,{selectedLayer:e.props.selectedLayer,layer:t,onLayerSelect:e.onLayerSelect}))})))}});t.exports=c;var m=o.default.createClass({displayName:"MapLayerItem",propTypes:{selectedLayer:s.PropTypes.object,layer:s.PropTypes.object,onLayerSelect:s.PropTypes.func},map:null,componentDidMount:function(){this.map=new l.default.Map({container:this.refs.map,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[this.props.layer.url],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[9,0],zoom:0}),this.map.scrollZoom.disable(),this.map.boxZoom.disable(),this.map.dragRotate.disable(),this.map.dragPan.disable(),this.map.keyboard.disable(),this.map.doubleClickZoom.disable(),this.map.touchZoomRotate.disable(),this.map.touchZoomRotate.disableRotation()},componentWillUnmount:function(){this.map.remove()},render:function(){var e="drop__menu-item";return e+=this.props.selectedLayer.id===this.props.layer.id?" drop__menu-item--active":"",o.default.createElement("a",{href:"#",className:e,onClick:this.props.onLayerSelect.bind(null,this.props.layer),"data-hook":"dropdown:close"},o.default.createElement("div",{className:"map-layers-list__map",ref:"map"}),o.default.createElement("span",{className:"map-layers-list__text"},this.props.layer.name))}})},{"../utils/map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js","mapbox-gl":"mapbox-gl","oam-design-system":"oam-design-system",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-request-popover.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=e("react"),o=r(s),i=e("moment"),n=r(i),l=e("lodash"),u=r(l),d=e("classnames"),c=r(d),m=e("numeral"),p=r(m),f=e("../utils/users"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a.default=o.default.createClass({displayName:"MapTaskPopover",propTypes:{data:s.PropTypes.object},renderNextDue:function(){var e=this.props.data.tasksInfo.nextDue;return null===e?null:o.default.createElement("p",{className:"meta-info"},"Task ",o.default.createElement("a",{href:"#/"+e.requestId+"/tasks/"+e._id},e.name)," is the next due on ",(0,n.default)(e.deliveryTime).format("YYYY/MM/DD"))},render:function(){var e=this.props.data,t=u.default.get(e.tasksInfo.status,"completed",0),a=e.tasksInfo.total-t,r=e.tasksInfo.total>0?t/e.tasksInfo.total*100:0,s=(0,c.default)("progress-bar",{"progress-bar--disabled":"canceled"===e.status});return o.default.createElement("article",{className:"popover popover--request"},o.default.createElement("header",{className:"popover__header"},o.default.createElement("h1",{className:"popover__title"},o.default.createElement("a",{href:"#/requests/"+e._id},e.name))),o.default.createElement("div",{className:"popover__body"},o.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},u.default.capitalize(e.status)),o.default.createElement("p",{className:"task-author"},"Created by: ",o.default.createElement("strong",null,h.getNameFromId(e.authorId))),o.default.createElement("div",{className:"request-progress"},o.default.createElement("progress",{value:r,max:"100",className:s,style:{backgroundSize:r+"%"}}),o.default.createElement("p",{className:"progress-value"},(0,p.default)(r).format("0.0"),"%")),o.default.createElement("ul",{className:"request-tasks-info"},o.default.createElement("li",null,o.default.createElement("strong",null,a)," Active"),o.default.createElement("li",null,o.default.createElement("strong",null,t)," Complete tasks")),o.default.createElement("p",{className:"meta-info"},"Updated on ",(0,n.default)(e.updated).format("YYYY/MM/DD")," by ",h.getNameFromId(e.authorId)),this.renderNextDue()))}})},{"../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-task-popover.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{
value:!0});var s=e("react"),o=r(s),i=e("moment"),n=r(i),l=e("../utils/users"),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),d=e("../utils/constants");a.default=o.default.createClass({displayName:"MapTaskPopover",propTypes:{data:s.PropTypes.object},render:function(){var e=this.props.data;return o.default.createElement("article",{className:"popover"},o.default.createElement("header",{className:"popover__header"},o.default.createElement("h1",{className:"popover__title"},o.default.createElement("a",{href:"#/requests/"+e.requestId+"/tasks/"+e._id},e.name))),o.default.createElement("div",{className:"popover__body"},o.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},d.taskStatusMatrix[e.status]),o.default.createElement("p",{className:"task-author"},"Created by: ",o.default.createElement("strong",null,u.getNameFromId(e.authorId))),e.assigneeId?o.default.createElement("p",{className:"task-assignee"},"Assigned to: ",o.default.createElement("strong",null,u.getNameFromId(e.assigneeId))):o.default.createElement("p",{className:"task-assignee"},"Assigned to: ",o.default.createElement("strong",null,"Not assigned")),o.default.createElement("p",{className:"meta-info"},"Updated on ",(0,n.default)(e.updated).format("YYYY/MM/DD")," by ",u.getNameFromId(e.authorId))))}})},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js",moment:"moment",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/page-footer.js":[function(e,t,a){"use strict";var r=e("react"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=s.default.createClass({displayName:"PageFooter",propTypes:{},render:function(){return s.default.createElement("footer",{className:"page__footer",role:"contentinfo"},s.default.createElement("div",{className:"inner"},s.default.createElement("div",{className:"col--main"},s.default.createElement("img",{src:"assets/graphics/layout/oam-logo-v-pos.svg",alt:"OpenAerialMap logo",className:"oam-logo"}),s.default.createElement("ul",{className:"related"},s.default.createElement("li",{className:"related__item related__item--upload"},s.default.createElement("a",{href:"https://upload.openaerialmap.org/",title:"Visit OAM Uploader"},"Upload Imagery")),s.default.createElement("li",{className:"related__item related__item--browse"},s.default.createElement("a",{href:"https://beta.openaerialmap.org/",title:"Visit OAM Browser"},"Browse Imagery")))),s.default.createElement("div",{className:"col--sec"},s.default.createElement("ul",{className:"social"},s.default.createElement("li",{className:"social__item social__item--email"},s.default.createElement("a",{href:"mailto:email@example.com",title:"Contact via email"},s.default.createElement("span",null,"Email"))),s.default.createElement("li",{className:"social__item social__item--github"},s.default.createElement("a",{href:"https://github.com/hotosm",title:"See organization on github"},s.default.createElement("span",null,"Github")))),s.default.createElement("p",{className:"copyright"},"Made with love by ",s.default.createElement("a",{href:"https://developmentseed.org",title:"Visit Development Seed website"},"Development Seed")," and ",s.default.createElement("a",{href:"http://hot.openstreetmap.org/",title:"Visit the Humanitarian OpenStreetMap Team website"},"HOT"),"."))))}});t.exports=o},{react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/page-header.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-router"),n=e("classnames"),l=r(n),u=e("../utils/auth-service"),d=r(u),c=o.default.createClass({displayName:"PageHeader",propTypes:{auth:s.PropTypes.instanceOf(d.default),user:s.PropTypes.object},getInitialState:function(){return{menu:!1}},onLogoutClick:function(e){(0,u.logout)(),i.hashHistory.push("/")},onMenuClick:function(e){e.preventDefault(),this.setState({menu:!this.state.menu})},renderUserProfileLink:function(){var e=this.props.user.profile;return e?o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/dashboard",className:"global-menu-item",title:"View my tasks"},o.default.createElement("span",null,e.user_metadata.name," tasks"))):null},render:function(){var e=this.props.auth,t=(0,u.isLoggedIn)(this.props.user.token);return o.default.createElement("header",{className:"page__header",role:"banner"},o.default.createElement("div",{className:"inner"},o.default.createElement("div",{className:"page__headline"},o.default.createElement("h1",{className:"page__title"},o.default.createElement(i.Link,{to:"/",title:"Visit homepage"},o.default.createElement("span",{className:"mast-logo mast-logo--h"},o.default.createElement("img",{className:"mast-logo__image",src:"assets/graphics/layout/oam-logo-h-pos.svg",width:"832",height:"160",alt:"OpenAerialMap logo"}),o.default.createElement("strong",{className:"mast-logo__text"},"OAM"),o.default.createElement("small",{className:"mast-logo__label"},"Imagery Coordination"))))),o.default.createElement("nav",{className:"page__prime-nav",role:"navigation"},o.default.createElement("h2",{className:"toggle-menu"},o.default.createElement("a",{href:"#global-menu",className:(0,l.default)({"button--active":this.state.menu}),title:"Show/hide menu",onClick:this.onMenuClick},o.default.createElement("span",null,"Browse"))),o.default.createElement("div",{className:(0,l.default)("menu-wrapper",{"menu-wrapper--open":this.state.menu}),ref:"menu"},o.default.createElement("ul",{className:"global-menu",id:"global-menu"},o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/imagery-search",className:"global-menu-item"},o.default.createElement("span",null,"Imagery Search"))),t?this.renderUserProfileLink():null,o.default.createElement("li",null,o.default.createElement(i.Link,{to:"/about",className:"global-menu-item",title:"About this website"},o.default.createElement("span",null,"About"))),o.default.createElement("li",null,t?o.default.createElement("button",{className:"button button--base",onClick:this.onLogoutClick},o.default.createElement("span",null,"Logout")):o.default.createElement("button",{className:"button button--primary",onClick:e.login.bind(this)},o.default.createElement("span",null,"Login"))))))))}});t.exports=c},{"../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js",classnames:"classnames",react:"react","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/request-map.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-dom"),n=e("mapbox-gl"),l=r(n),u=e("@turf/center"),d=r(u),c=e("@turf/bbox"),m=r(c),p=e("lodash"),f=r(p),h=e("./map-layers"),y=r(h),g=e("./map-task-popover"),v=r(g),b=e("../utils/map"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(b),E=e("../utils/constants"),T=o.default.createClass({displayName:"RequestMap",propTypes:{onBaseLayerChange:s.PropTypes.func,selectedLayer:s.PropTypes.object,mapId:s.PropTypes.string,results:s.PropTypes.object,className:s.PropTypes.string},componentDidMount:function(){this.map=_.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){if(e.map.getLayer("task-polygon")){var a=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});e.map.getCanvas().style.cursor=a.length?"pointer":"";var r=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(r.length){e.map.setFilter("task-highlight",["==","_id",r[0].properties._id]);var s=f.default.find(E.taskStatusStyles,{name:r[0].properties.status});e.map.setPaintProperty("task-highlight","fill-color",s.color),e.map.setPaintProperty("task-polygon","fill-opacity",.16)}else e.map.setFilter("task-highlight",["==","_id",""]),e.map.setPaintProperty("task-polygon","fill-opacity",.64)}}),this.map.on("click",function(t){var a=e.map.queryRenderedFeatures(t.point,{layers:["task-polygon"]});if(a.length){var r=a[0],s=document.createElement("div");(0,i.render)(o.default.createElement(v.default,{data:r.properties}),s),(new l.default.Popup).setLngLat((0,d.default)(r).geometry.coordinates).setDOMContent(s).addTo(e.map)}})},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,a=e.results;!t||!t.features.length||a&&a.features.length?a&&!f.default.isEqual(this.props.results,a)&&this.updateFeatures(a):this.refreshMap(),t&&t.features.length||!a||!a.features.length||this.setupFeatures(a),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"task-highlight",type:"fill",source:"task",paint:{"fill-opacity":.64},filter:["==","_id",""]}),this.map.addLayer({id:"task-polygon",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:E.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.64}})},zoomToFeatures:function(e){this.map.fitBounds((0,m.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("task-highlight"),this.map.removeLayer("task-polygon"),this.map.removeSource("task")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{className:"map-layers"},o.default.createElement(y.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),o.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=T},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-card.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-router"),n=e("moment"),l=r(n),u=e("mapbox-gl"),d=r(u),c=e("@turf/bbox"),m=r(c),p=e("classnames"),f=r(p),h=e("../utils/users"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),g=e("../utils/map-layers"),v=r(g),b=e("../utils/features"),_=e("../utils/constants"),E=o.default.createClass({displayName:"TaskCard",propTypes:{requestId:s.PropTypes.string,requestName:s.PropTypes.string,id:s.PropTypes.string,name:s.PropTypes.string,status:s.PropTypes.string,authorId:s.PropTypes.string,assigneeId:s.PropTypes.string,updated:s.PropTypes.string,geometry:s.PropTypes.array,editType:s.PropTypes.string},map:null,componentDidMount:function(){var e=this;this.map=new d.default.Map({container:this.refs.map,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[v.default[0].url],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,20],zoom:1,interactive:!1}),this.map.on("load",function(){var t=(0,b.geometryToFeature)(e.props.geometry);e.map.addSource("task",{type:"geojson",data:t}),e.map.addLayer({id:"task",type:"fill",source:"task",paint:{"fill-color":"#088","fill-opacity":.48}}),e.map.fitBounds((0,m.default)(t),{padding:15,duration:0})})},componentWillUnmount:function(){this.map.remove()},render:function(){var e=(0,f.default)("button-edit",{disabled:"disabled"===this.props.editType});return o.default.createElement("article",{className:"task"},o.default.createElement("div",{className:"task__media",ref:"map"}),o.default.createElement("div",{className:"task__content"},o.default.createElement("header",{className:"task__header"},o.default.createElement("p",{className:"task__subtitle"},o.default.createElement(i.Link,{to:"/requests/"+this.props.requestId},this.props.requestName)),o.default.createElement("h1",{className:"task__title"},o.default.createElement(i.Link,{to:"/requests/"+this.props.requestId+"/tasks/"+this.props.id},this.props.name))),o.default.createElement("div",{className:"task__body"},o.default.createElement("p",{className:"status-indicator status-indicator--"+this.props.status},_.taskStatusMatrix[this.props.status]),o.default.createElement("p",{className:"task-author"},"Created by: ",o.default.createElement("strong",null,y.getNameFromId(this.props.authorId))),this.props.assigneeId?o.default.createElement("p",{className:"task-assignee"},"Assigned to: ",o.default.createElement("strong",null,y.getNameFromId(this.props.assigneeId))):o.default.createElement("p",{className:"task-assignee"},"Assigned to: ",o.default.createElement("strong",null,"Not assigned")),o.default.createElement("p",{className:"meta-info"},"Updated on ",(0,l.default)(this.props.updated).format("YYYY/MM/DD")," by ",y.getNameFromId(this.props.authorId))),"none"!==this.props.editType?o.default.createElement("div",{className:"task__actions"},o.default.createElement(i.Link,{to:"/requests/"+this.props.requestId+"/tasks/"+this.props.id+"/edit",className:e},"Edit")):null))}});t.exports=E},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js","@turf/bbox":"@turf/bbox",classnames:"classnames","mapbox-gl":"mapbox-gl",moment:"moment",react:"react","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-map.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-dom"),n=e("mapbox-gl"),l=r(n),u=e("@turf/center"),d=r(u),c=e("@turf/bbox"),m=r(c),p=e("lodash"),f=r(p),h=e("../utils/map"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),g=e("../utils/constants"),v=e("./map-layers"),b=r(v),_=e("./map-task-popover"),E=r(_),T=o.default.createClass({displayName:"TaskMap",propTypes:{onBaseLayerChange:s.PropTypes.func,selectedLayer:s.PropTypes.object,mapId:s.PropTypes.string,results:s.PropTypes.object,className:s.PropTypes.string,selectedId:s.PropTypes.string},componentDidMount:function(){this.map=y.setupMap(this.refs.map,this.props.selectedLayer.url),this.map.on("load",this.onMapLoaded)},onMapLoaded:function(){var e=this;this.setupFeatures(this.props.results),this.map.on("mousemove",function(t){var a=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});e.map.getCanvas().style.cursor=a.length?"pointer":""}),this.map.on("click",function(t){var a=e.map.queryRenderedFeatures(t.point,{layers:e.getActiveLayers()});if(a.length){var r=a[0],s=document.createElement("div");(0,i.render)(o.default.createElement(E.default,{data:r.properties}),s),(new l.default.Popup).setLngLat((0,d.default)(r).geometry.coordinates).setDOMContent(s).addTo(e.map)}})},getActiveLayers:function(){return["tasks","tasks-highlight"]},componentWillUnmount:function(){this.map.remove()},setupFeatures:function(e){this.map._loaded&&e&&(e.features&&e.features.length||e.geometry&&e.geometry.coordinates.length)&&(this.addFeatures(e),this.zoomToFeatures(e))},componentWillReceiveProps:function(e){var t=this.props.results,a=e.results;t&&!a?this.refreshMap():a&&!f.default.isEqual(t,a)&&this.updateFeatures(a),!t&&a&&this.setupFeatures(a),e.selectedLayer.id!==this.props.selectedLayer.id&&this.map.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[e.selectedLayer.url],tileSize:256})},addFeatures:function(e){this.map.addSource("task",{type:"geojson",data:e}),this.map.addLayer({id:"tasks",type:"fill",source:"task",paint:{"fill-color":"#000","fill-opacity":.16},filter:["!=","_id",this.props.selectedId]}),this.map.addLayer({id:"tasks-highlight",type:"fill",source:"task",paint:{"fill-color":{property:"status",type:"categorical",stops:g.taskStatusStyles.map(function(e){return[e.name,e.color]})},"fill-opacity":.8},filter:["==","_id",this.props.selectedId]})},zoomToFeatures:function(e){this.map.fitBounds((0,m.default)(e),{padding:15,duration:0})},updateFeatures:function(e){this.map.getSource("task")&&(this.removeFeatures(),this.addFeatures(e),this.zoomToFeatures(e))},removeFeatures:function(){this.map.removeLayer("tasks"),this.map.removeLayer("tasks-highlight"),this.map.removeSource("task")},refreshMap:function(){this.removeFeatures(),this.map.flyTo({center:[0,20],zoom:1})},render:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{className:"map-layers"},o.default.createElement(b.default,{selectedLayer:this.props.selectedLayer,onBaseLayerSelect:this.props.onBaseLayerChange})),o.default.createElement("div",{id:this.props.mapId,ref:"map"}))}});t.exports=T},{"../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js","./map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-layers.js","./map-task-popover":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/map-task-popover.js","@turf/bbox":"@turf/bbox","@turf/center":"@turf/center",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-update-form.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("classnames"),n=r(i),l=e("lodash"),u=r(l),d=e("../utils/auth-service"),c=o.default.createClass({displayName:"TaskUpdateForm",propTypes:{user:s.PropTypes.object,task:s.PropTypes.object,statusUpdate:s.PropTypes.object,onSubmit:s.PropTypes.func},getInitialState:function(){return{statusError:!1,commentError:!1}},checkErrors:function(){var e=!0,t={statusError:!1,commentError:!1};return"--"===this.refs.taskUpdateStatus.value&&(t.statusError=!0,e=!1),""===this.refs.taskUpdateComment.value&&(t.commentError=!0,e=!1),this.setState(t),e},onStatusUpdateSubmit:function(e){e.preventDefault(),this.checkErrors()&&(this.props.onSubmit(this.refs.taskUpdateStatus.value,this.refs.taskUpdateComment.value),this.refs.form.reset())},render:function(){var e=this.props.user.token,t=u.default.get(this.props.user,"profile.roles",[]);if(!(0,d.isLoggedIn)(e))return null;var a=-1!==t.indexOf("surveyor")&&-1===t.indexOf("coordinator"),r=!!a&&this.props.task.assigneeId!==this.props.user.profile.user_id,s=(0,n.default)("button button--primary",{disabled:this.state.statusError||this.state.commentError});return o.default.createElement("div",{className:"task-updates-form"},r?o.default.createElement("p",null,"Suveyors can only add updates when assigned"):null,o.default.createElement("form",{className:(0,n.default)("form",{disabled:r}),ref:"form"},o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label",htmlFor:"task-update-status"},"Status"),o.default.createElement("select",{ref:"taskUpdateStatus",className:"form__control form__control--medium",id:"task-update-status",onChange:this.checkErrors},o.default.createElement("option",{value:"--"},"Choose a status"),o.default.createElement("option",{value:"open"},"Open"),o.default.createElement("option",{value:"inprogress"},"In Progress"),o.default.createElement("option",{value:"completed"},"Completed"),o.default.createElement("option",{value:"unchanged"},"Unchanged")),this.state.statusError?o.default.createElement("p",{className:"message message--alert"},"State needs to be selected"):null),o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label",htmlFor:"task-update-comment"},"Comment"),o.default.createElement("textarea",{ref:"taskUpdateComment",className:"form__control",id:"task-update-comment",rows:"4",placeholder:"What's the reason for the status change?",onBlur:this.checkErrors,onChange:this.checkErrors}),this.state.commentError?o.default.createElement("p",{className:"message message--alert"},"Comment can't be empty"):null),o.default.createElement("div",{className:"form__actions"},o.default.createElement("button",{type:"submit",className:s,onClick:this.onStatusUpdateSubmit},o.default.createElement("span",null,"Add update"))),this.props.statusUpdate.processing?o.default.createElement("p",null,"Submitting status update"):null))}});t.exports=c},{"../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js",classnames:"classnames",lodash:"lodash",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config.js":[function(e,t,a){"use strict";var r=e("lodash").defaultsDeep,s={local:e("./config/local.js"),production:e("./config/production.js"),staging:e("./config/staging.js")},o=s.local||{};r(o,s.production),t.exports=o},{"./config/local.js":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/local.js","./config/production.js":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/production.js","./config/staging.js":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/staging.js",lodash:"lodash"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/local.js":[function(e,t,a){"use strict";t.exports={}},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/production.js":[function(e,t,a){"use strict";t.exports={environment:"production",auth0Client:"bOQ50Atk5sGkobRlz8G2lWMwTSw4R9Wr",auth0Domain:"hotosm.auth0.com",mbToken:"pk.eyJ1Ijoib3BlbmFlcmlhbG1hcCIsImEiOiJjaXl4MXkyZDMwMDB0MnhwN3c5b2I5MmtqIn0.-NsKzzY8CAFdKVAXqtC9Tg",api:"https://coordination-api.hotosm.org"}},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config/staging.js":[function(e,t,a){"use strict";t.exports={environment:"staging"}},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/main.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e("babel-polyfill");var s=e("react"),o=r(s),i=e("react-dom"),n=e("react-redux"),l=e("react-router"),u=e("react-router-scroll"),d=e("react-router-redux"),c=e("mapbox-gl"),m=r(c),p=e("lodash"),f=r(p),h=e("./utils/auth-service"),y=r(h),g=e("./config"),v=r(g),b=e("./utils/store"),_=r(b),E=e("./views/app"),T=r(E),w=e("./views/home"),S=r(w),k=e("./views/uhoh"),j=r(k),x=e("./views/dashboard"),N=r(x),R=e("./views/request-page"),D=r(R),O=e("./views/request-form"),P=r(O),M=e("./views/task-form"),C=r(M),q=e("./views/task-page"),A=r(q),F=e("./views/about"),L=r(F),I=e("./views/imagery-search"),U=r(I),z=e("./actions"),V=new y.default(v.default.auth0Client,v.default.auth0Domain),Y=function(e,t){(0,h.isLoggedIn)(_.default.getState().user.token)||t({pathname:"/"})},H=function(e){return function(t,a){e=f.default.castArray(e);var r=_.default.getState().user,s=f.default.get(r,"profile.roles",[]),o=e.some(function(e){return-1!==s.indexOf(e)});(0,h.isLoggedIn)(r.token)&&o||a({pathname:"/"})}};m.default.accessToken=v.default.mbToken;var B=(0,d.syncHistoryWithStore)(l.hashHistory,_.default),K=(0,u.useScroll)(function(e,t){return e&&decodeURIComponent(t.location.pathname)!==decodeURIComponent(e.location.pathname)});_.default.dispatch((0,z.fetchUsers)()),(0,i.render)(o.default.createElement(n.Provider,{store:_.default},o.default.createElement(l.Router,{history:B,render:(0,l.applyRouterMiddleware)(K)},o.default.createElement(l.Route,{path:"/",component:T.default,auth:V},o.default.createElement(l.Route,{path:"/dashboard",component:N.default,onEnter:Y}),o.default.createElement(l.Route,{path:"/about",component:L.default}),o.default.createElement(l.Route,{path:"/imagery-search(/:mapview)",component:U.default}),o.default.createElement(l.Route,{path:"/requests/edit",component:P.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/edit",component:P.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/edit",component:C.default,onEnter:H("coordinator")}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/:taskid/edit",component:C.default,onEnter:H(["coordinator","surveyor"])}),o.default.createElement(l.Route,{path:"/requests/:reqid",component:D.default}),o.default.createElement(l.Route,{path:"/requests/:reqid/tasks/:taskid",component:A.default}),o.default.createElement(l.IndexRoute,{component:S.default,pageClass:"page--homepage"}),o.default.createElement(l.Route,{path:"*",component:j.default})))),document.querySelector("#app-container"))},{"./actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","./config":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config.js","./utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","./utils/store":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/store.js","./views/about":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/about.js","./views/app":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/app.js","./views/dashboard":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/dashboard.js","./views/home":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/home.js","./views/imagery-search":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/imagery-search.js","./views/request-form":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/request-form.js","./views/request-page":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/request-page.js","./views/task-form":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/task-form.js","./views/task-page":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/task-page.js","./views/uhoh":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/uhoh.js","babel-polyfill":"babel-polyfill",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux","react-router-scroll":"react-router-scroll"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/dashboard.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.SELECT_DASHBOARD_TAB:return Object.assign({},e,{activeTab:t.tab})}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={activeTab:"assigned"}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/general-stats.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.REQUEST_GENERAL_STATS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_GENERAL_STATS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.initialState=void 0,a.default=r;var s=e("../actions"),o=a.initialState={fetching:!1,fetched:!1,data:{requests:null}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/imagery-search.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case s.RESET_SEARCH_MAP:return Object.assign({},e,i);case s.SET_SEARCH_MAP_BASELAYER:return Object.assign({},e,{baseLayer:t.layer});case s.SET_SEARCH_MAP_CENTER:return Object.assign({},e,{center:t.center});case s.SET_SEARCH_MAP_ZOOM:return Object.assign({},e,{zoom:t.zoom})}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o=e("../utils/map-layers"),i={baseLayer:(0,o.getImagerySearchLayers)()[0],center:[0,0],zoom:2}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/index.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.reducers=void 0;var s=e("redux"),o=e("react-router-redux"),i=e("./user"),n=r(i),l=e("./users"),u=r(l),d=e("./request"),c=r(d),m=e("./requests"),p=r(m),f=e("./requests-all"),h=r(f),y=e("./tasks"),g=r(y),v=e("./task"),b=r(v),_=e("./user-tasks"),E=r(_),T=e("./dashboard"),w=r(T),S=e("./general-stats"),k=r(S),j=e("./request-form"),x=r(j),N=e("./task-form"),R=r(N),D=e("./map"),O=r(D),P=e("./imagery-search"),M=r(P),C=a.reducers={user:n.default,users:u.default,request:c.default,requests:p.default,requestsAll:h.default,task:b.default,tasks:g.default,userTasks:E.default,dashboard:w.default,generalStats:k.default,requestForm:x.default,taskForm:R.default,map:O.default,imagerySearch:M.default};a.default=(0,s.combineReducers)(Object.assign({},C,{routing:o.routerReducer}))},{"./dashboard":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/dashboard.js","./general-stats":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/general-stats.js","./imagery-search":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/imagery-search.js","./map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/map.js","./request":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/request.js","./request-form":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/request-form.js","./requests":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/requests.js","./requests-all":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/requests-all.js","./task":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/task.js",
"./task-form":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/task-form.js","./tasks":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/tasks.js","./user":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/user.js","./user-tasks":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/user-tasks.js","./users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/users.js","react-router-redux":"react-router-redux",redux:"redux"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/map.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case i.SET_MAP_LAYER:return Object.assign({},e,{baseLayer:t.layer});case i.RESET_MAP_LAYER:return Object.assign({},e,n);default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.initialState=void 0,a.default=r;var s=e("../utils/map-layers"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i=e("../actions"),n=a.initialState={baseLayer:o.default[0]}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/request-form.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.RESET_REQUEST_FORM:return Object.assign({},e,o);case s.START_POST_REQUEST:return Object.assign({},e,{processing:!0});case s.FINISH_POST_REQUEST:e=Object.assign({},e,{processing:!1}),t.error?e.error=t.error:e.data=t.data.results||t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={processing:!1,error:null,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/request.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.INVALIDATE_REQUEST:return Object.assign({},e,o);case s.REQUEST_REQUEST:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_REQUEST:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/requests-all.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.REQUEST_ALL_REQUESTS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_ALL_REQUESTS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?(e.error=t.error,e.receivedAt=0):(e.data=t.data,e.receivedAt=t.receivedAt)}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]},receivedAt:null}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/requests.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.INVALIDATE_REQUESTS:return Object.assign({},e,o);case s.REQUEST_REQUESTS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_REQUESTS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/task-form.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.RESET_TASK_FORM:return Object.assign({},e,o);case s.START_POST_TASK:return Object.assign({},e,{processing:!0});case s.FINISH_POST_TASK:e=Object.assign({},e,{processing:!1}),t.error?e.error=t.error:e.data=t.data.results||t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={processing:!1,error:null,data:{}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/task.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case i.INVALIDATE_TASK:return Object.assign({},e,n);case i.REQUEST_TASK:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case i.RECEIVE_TASK:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data;break;case i.START_ADD_TASK_STATUS_UPDATE:return e=o.default.cloneDeep(e),e.statusUpdate.processing=!0,e;case i.FINISH_ADD_TASK_STATUS_UPDATE:e=o.default.cloneDeep(e),e.statusUpdate.processing=!1,t.error?e.statusUpdate.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("lodash"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i=e("../actions"),n={fetching:!1,fetched:!1,data:{},statusUpdate:{processing:!1,error:null}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js",lodash:"lodash"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/tasks.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.INVALIDATE_TASKS:return Object.assign({},e,o);case s.REQUEST_TASKS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_TASKS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/user-tasks.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.INVALIDATE_USER_TASKS:return Object.assign({},e,o);case s.REQUEST_USER_TASKS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_USER_TASKS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.data=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,data:{meta:{page:null,limit:null,found:null},results:[]}}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/user.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.SET_USER_TOKEN:return Object.assign({},e,{token:t.data});case s.SET_USER_PROFILE:return Object.assign({},e,{profile:t.data});case s.LOGOUT_USER:return Object.assign({},e,{profile:null,token:""});default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.initialState=void 0,a.default=r;var s=e("../actions"),o=a.initialState={token:"",profile:null}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/users.js":[function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.REQUEST_USERS:return Object.assign({},e,{error:null,fetching:!0,fetched:!1});case s.RECEIVE_USERS:e=Object.assign({},e,{fetching:!1,fetched:!0}),t.error?e.error=t.error:e.users=t.data}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var s=e("../actions"),o={fetching:!1,fetched:!1,users:[]}},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return!!e&&!(0,m.isTokenExpired)(e)}function i(){return localStorage.getItem("profile")?JSON.parse(localStorage.profile):null}function n(){return localStorage.getItem("id_token")||null}function l(){localStorage.removeItem("id_token"),localStorage.removeItem("profile"),h.default.dispatch((0,p.logoutUser)())}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.isLoggedIn=o,a.getProfileLocalStorage=i,a.getTokenLocalStorage=n,a.logout=l;var d=e("auth0-lock"),c=r(d),m=e("./jwt-helper"),p=e("../actions"),f=e("./store"),h=r(f),y=function(){function e(t,a){s(this,e);var r={allowSignUp:!0,autoclose:!0,auth:{redirect:!1,params:{scope:"openid roles user_id user_metadata"}},theme:{logo:"assets/graphics/layout/hot-logo.png",primaryColor:"#D73F3F"}};this.lock=new c.default(t,a,r),this.lock.on("authenticated",this._doAuthentication.bind(this)),this.login=this.login.bind(this)}return u(e,[{key:"_doAuthentication",value:function(e){localStorage.setItem("id_token",e.idToken),h.default.dispatch((0,p.setUserToken)(e.idToken)),this.lock.getProfile(e.idToken,function(e,t){e?console.log("Error loading the Profile",e):(localStorage.setItem("profile",JSON.stringify(t)),h.default.dispatch((0,p.setUserProfile)(t)))})}},{key:"login",value:function(){this.lock.show()}}]),e}();a.default=y},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","./jwt-helper":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/jwt-helper.js","./store":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/store.js","auth0-lock":"auth0-lock"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.taskStatusMatrix={open:"Open",inprogress:"In progress",completed:"Completed"},a.taskStatusStyles=[{name:"open",color:"#5ABDCB"},{name:"inprogress",color:"#D0EC77"},{name:"completed",color:"#72C97D"}],a.requestStatusStyles=[{name:"open",color:"#5ABDCB"},{name:"closed",color:"#A5B1B5"},{name:"canceled",color:"#EA4F54"}]},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js":[function(e,t,a){"use strict";function r(){return{}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e.length>1?e[0].geometry?{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:[e.geometry]},properties:t(e)}})}:{type:"Feature",geometry:{type:"Polygon",coordinates:[e]},properties:{}}:e.length?{type:"Feature",geometry:{type:"Polygon",coordinates:[e[0].geometry]},properties:t(e[0])}:void 0}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e=e.filter(function(e){return null!=e.footprint}),{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:e.footprint.geometry.coordinates},properties:t(e)}})}}function i(e,t){var a=!0,r=!0;l.default.isFeatureCollection(e,function(s,o){s||(a=!1),l.default.isFeature(e,function(s,o){if(s||(r=!1),!a&&!r)return console.log("errors",o),t("Invalid format, provide a Feature or Feature Collection");if(a&&e.features.length>1)return t("Feature Collection should only have 1 feature");var i=a?e.features[0]:e;if(!i.geometry)return t("Invalid feature provided");l.default.isPolygon(i.geometry,function(e,a){return e?t(null,i.geometry.coordinates[0]):t("Please provide a feature with a valid polygon")})})})}Object.defineProperty(a,"__esModule",{value:!0}),a.geometryToFeature=s,a.combineFeatureResults=o,a.validateGeoJSONPolygon=i;var n=e("geojson-validation"),l=function(e){return e&&e.__esModule?e:{default:e}}(n)},{"geojson-validation":"geojson-validation"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/jwt-helper.js":[function(e,t,a){"use strict";function r(e){var t=(0,i.default)(e);if(!t.exp)return null;var a=new Date(0);return a.setUTCSeconds(t.exp),a}function s(e){var t=r(e);return null!==t&&!(t.valueOf()>(new Date).valueOf()+0)}Object.defineProperty(a,"__esModule",{value:!0}),a.getTokenExpirationDate=r,a.isTokenExpired=s;var o=e("jwt-decode"),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},{"jwt-decode":"jwt-decode"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js":[function(e,t,a){"use strict";function r(){return s.filter(function(e){return e.imagerySearch})}Object.defineProperty(a,"__esModule",{value:!0}),a.getImagerySearchLayers=r;var s=[{id:"oam-base",type:"raster",imagerySearch:!1,name:"Mapbox Light",url:"https://api.mapbox.com/styles/v1/hot/cividbt4w00ax2jn8517i2nc9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaG90IiwiYSI6ImNpdmlkM2lkMDAwYTAydXBnNXFkd2EwemsifQ.KPrUb_mKlPmHCR6LNrSihQ"},{id:"satellite",type:"raster",imagerySearch:!0,name:"Mapbox Satellite",url:"https://api.mapbox.com/styles/v1/hot/civicyccw00bv2io77zqq401h/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaG90IiwiYSI6ImNpdmlkM2lkMDAwYTAydXBnNXFkd2EwemsifQ.KPrUb_mKlPmHCR6LNrSihQ"},{id:"digital-globe",type:"raster",imagerySearch:!0,name:"Digital Globe",url:"https://api.mapbox.com/styles/v1/digitalglobe/ciode6t5k0081aqm7k06dod4v/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGlnaXRhbGdsb2JlIiwiYSI6ImNpdHZtM3FjbzAwNjYyem40c3FlNG11eGkifQ.dxTyi-e8nUFGtGQON78xQA"},{id:"bing-satellite",type:"raster",imagerySearch:!0,name:"Bing Satellite",url:"https://t1.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=1398"}];a.default=s},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map.js":[function(e,t,a){"use strict";function r(e,t){var a=new o.default.Map({container:e,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[t],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,20],zoom:1});a.addControl(new o.default.NavigationControl,"top-left"),a.dragRotate.disable(),a.touchZoomRotate.disableRotation(),a.scrollZoom.disable();var r=document.querySelector(".mapboxgl-ctrl-top-left .mapboxgl-ctrl-group");return r.classList.add("button-group","button-group--vertical"),r.querySelector(".mapboxgl-ctrl-zoom-in").classList.add("button"),r.querySelector(".mapboxgl-ctrl-zoom-out").classList.add("button"),r.querySelector(".mapboxgl-ctrl-compass").remove(),a}Object.defineProperty(a,"__esModule",{value:!0}),a.setupMap=r;var s=e("mapbox-gl"),o=function(e){return e&&e.__esModule?e:{default:e}}(s)},{"mapbox-gl":"mapbox-gl"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/mapbox-styles.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.mbStyles=[{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff33cc","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#ff33cc","fill-outline-color":"#ff33cc","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff33cc","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":7,"circle-color":"#000"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","$type","Polygon"],["==","active","false"]],paint:{"fill-color":"#51d6ff","fill-outline-color":"#0fc7ff","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","$type","Polygon"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0fc7ff","line-width":3}}]},{}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/store.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("redux"),o=e("redux-thunk"),i=r(o),n=e("redux-logger"),l=r(n),u=e("../config"),d=r(u),c=e("../reducers"),m=r(c),p=e("./auth-service"),f={user:{token:(0,p.getTokenLocalStorage)(),profile:(0,p.getProfileLocalStorage)()}},h=(0,l.default)({level:"info",collapsed:!0,predicate:function(e,t){return"production"!==d.default.environment}}),y=(0,s.createStore)(m.default,f,(0,s.applyMiddleware)(i.default,h));t.exports=y},{"../config":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/config.js","../reducers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/reducers/index.js","./auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/togeojson.js":[function(e,t,a){(function(r){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function t(e){if(!e||!e.length)return 0;for(var t=0,a=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t)|0;return a}function o(e,t){return e.getElementsByTagName(t)}function i(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(i(e,t))}function l(e,t){var a=o(e,t);return a.length?a[0]:null}function u(e){return e.normalize&&e.normalize(),e}function d(e){for(var t=0,a=[];t<e.length;t++)a[t]=parseFloat(e[t]);return a}function c(e){return e&&u(e),e&&e.textContent||""}function m(e,t){var a,r,s={};for(r=0;r<t.length;r++)(a=l(e,t[r]))&&(s[t[r]]=c(a));return s}function p(e,t){for(var a in t)e[a]=t[a]}function f(e){return d(e.replace(_,"").split(","))}function h(e){for(var t=e.replace(E,"").split(T),a=[],r=0;r<t.length;r++)a.push(f(t[r]));return a}function y(e){var t,a=[n(e,"lon"),n(e,"lat")],r=l(e,"ele"),s=l(e,"gpxtpx:hr")||l(e,"hr"),o=l(e,"time");return r&&(t=parseFloat(c(r)),isNaN(t)||a.push(t)),{coordinates:a,time:o?c(o):null,heartRate:s?parseFloat(c(s)):null}}function g(){return{type:"FeatureCollection",features:[]}}function v(e){return void 0!==e.xml?e.xml:b.serializeToString(e)}var b,_=/\s*/g,E=/^\s*|\s*$/g,T=/\s+/;return"undefined"!=typeof XMLSerializer?b=new XMLSerializer:"object"!==(void 0===a?"undefined":s(a))||"object"!==(void 0===r?"undefined":s(r))||r.browser||(b=new(e("xmldom").XMLSerializer)),{kml:function(e){function a(e){var t,a;return e=e||"","#"===e.substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(a=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(a)?void 0:a]}function r(e){return d(e.split(" "))}function s(e){var t=o(e,"coord","gx"),a=[],s=[];0===t.length&&(t=o(e,"gx:coord"));for(var i=0;i<t.length;i++)a.push(r(c(t[i])));for(var n=o(e,"when"),l=0;l<n.length;l++)s.push(c(n[l]));return{coords:a,times:s}}function n(e){var t,a,r,i,u,d=[],m=[];if(l(e,"MultiGeometry"))return n(l(e,"MultiGeometry"));if(l(e,"MultiTrack"))return n(l(e,"MultiTrack"));if(l(e,"gx:MultiTrack"))return n(l(e,"gx:MultiTrack"));for(r=0;r<b.length;r++)if(a=o(e,b[r]))for(i=0;i<a.length;i++)if(t=a[i],"Point"===b[r])d.push({type:"Point",coordinates:f(c(l(t,"coordinates")))});else if("LineString"===b[r])d.push({type:"LineString",coordinates:h(c(l(t,"coordinates")))});else if("Polygon"===b[r]){var p=o(t,"LinearRing"),y=[];for(u=0;u<p.length;u++)y.push(h(c(l(p[u],"coordinates"))));d.push({type:"Polygon",coordinates:y})}else if("Track"===b[r]||"gx:Track"===b[r]){var g=s(t);d.push({type:"LineString",coordinates:g.coords}),g.times.length&&m.push(g.times)}return{geoms:d,coordTimes:m}}for(var u=g(),m={},p={},y={},b=["Polygon","LineString","Point","Track","gx:Track"],_=o(e,"Placemark"),E=o(e,"Style"),T=o(e,"StyleMap"),w=0;w<E.length;w++){var S=t(v(E[w])).toString(16);m["#"+i(E[w],"id")]=S,p[S]=E[w]}for(var k=0;k<T.length;k++){m["#"+i(T[k],"id")]=t(v(T[k])).toString(16);for(var j=o(T[k],"Pair"),x={},N=0;N<j.length;N++)x[c(l(j[N],"key"))]=c(l(j[N],"styleUrl"));y["#"+i(T[k],"id")]=x}for(var R=0;R<_.length;R++)u.features=u.features.concat(function(e){var t,r=n(e),s={},u=c(l(e,"name")),d=c(l(e,"address")),f=c(l(e,"styleUrl")),h=c(l(e,"description")),g=l(e,"TimeSpan"),v=l(e,"TimeStamp"),b=l(e,"ExtendedData"),_=l(e,"LineStyle"),E=l(e,"PolyStyle"),T=l(e,"visibility");if(!r.geoms.length)return[];if(u&&(s.name=u),d&&(s.address=d),f){"#"!==f[0]&&(f="#"+f),s.styleUrl=f,m[f]&&(s.styleHash=m[f]),y[f]&&(s.styleMapHash=y[f],s.styleHash=m[y[f].normal]);var w=p[s.styleHash];w&&(_||(_=l(w,"LineStyle")),E||(E=l(w,"PolyStyle")))}if(h&&(s.description=h),g){var S=c(l(g,"begin")),k=c(l(g,"end"));s.timespan={begin:S,end:k}}if(v&&(s.timestamp=c(l(v,"when"))),_){var j=a(c(l(_,"color"))),x=j[0],N=j[1],R=parseFloat(c(l(_,"width")));x&&(s.stroke=x),isNaN(N)||(s["stroke-opacity"]=N),isNaN(R)||(s["stroke-width"]=R)}if(E){var D=a(c(l(E,"color"))),O=D[0],P=D[1],M=c(l(E,"fill")),C=c(l(E,"outline"));O&&(s.fill=O),isNaN(P)||(s["fill-opacity"]=P),M&&(s["fill-opacity"]="1"===M?s["fill-opacity"]||1:0),C&&(s["stroke-opacity"]="1"===C?s["stroke-opacity"]||1:0)}if(b){var q=o(b,"Data"),A=o(b,"SimpleData");for(t=0;t<q.length;t++)s[q[t].getAttribute("name")]=c(l(q[t],"value"));for(t=0;t<A.length;t++)s[A[t].getAttribute("name")]=c(A[t])}T&&(s.visibility=c(T)),r.coordTimes.length&&(s.coordTimes=1===r.coordTimes.length?r.coordTimes[0]:r.coordTimes);var F={type:"Feature",geometry:1===r.geoms.length?r.geoms[0]:{type:"GeometryCollection",geometries:r.geoms},properties:s};return i(e,"id")&&(F.id=i(e,"id")),[F]}(_[R]));return u},gpx:function(e){function t(e,t){var a=o(e,t),r=[],s=[],i=[],n=a.length;if(n<2)return{};for(var l=0;l<n;l++){var u=y(a[l]);r.push(u.coordinates),u.time&&s.push(u.time),u.heartRate&&i.push(u.heartRate)}return{line:r,times:s,heartRates:i}}function a(e){var t={};if(e){var a=l(e,"line");if(a){var r=c(l(a,"color")),s=parseFloat(c(l(a,"opacity"))),o=parseFloat(c(l(a,"width")));r&&(t.stroke=r),isNaN(s)||(t["stroke-opacity"]=s),isNaN(o)||(t["stroke-width"]=96*o/25.4)}}return t}function r(e){var t=m(e,["name","cmt","desc","type","time","keywords"]),a=o(e,"link");a.length&&(t.links=[]);for(var r,s=0;s<a.length;s++)r={href:i(a[s],"href")},p(r,m(a[s],["text","type"])),t.links.push(r);return t}var s,n,u=o(e,"trk"),d=o(e,"rte"),f=o(e,"wpt"),h=g();for(s=0;s<u.length;s++)(n=function(e){for(var s,i=o(e,"trkseg"),n=[],u=[],d=[],c=0;c<i.length;c++)(s=t(i[c],"trkpt"))&&(s.line&&n.push(s.line),s.times&&s.times.length&&u.push(s.times),s.heartRates&&s.heartRates.length&&d.push(s.heartRates));if(0!==n.length){var m=r(e);return p(m,a(l(e,"extensions"))),u.length&&(m.coordTimes=1===n.length?u[0]:u),d.length&&(m.heartRates=1===n.length?d[0]:d),{type:"Feature",properties:m,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}(u[s]))&&h.features.push(n);for(s=0;s<d.length;s++)(n=function(e){var s=t(e,"rtept");if(s.line){var o=r(e);p(o,a(l(e,"extensions")));return{type:"Feature",properties:o,geometry:{type:"LineString",coordinates:s.line}}}}(d[s]))&&h.features.push(n);for(s=0;s<f.length;s++)h.features.push(function(e){var t=r(e);return p(t,m(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:y(e).coordinates}}}(f[s]));return h}}}();void 0!==t&&(t.exports=o)}).call(this,e("_process"))},{_process:"/home/travis/build/hotosm/imagery-coordination/node_modules/browserify/node_modules/process/browser.js",xmldom:"xmldom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js":[function(e,t,a){"use strict";function r(e){return n.default.getState().users.users.find(function(t){return t.userId===e})}function s(e){var t=r(e);return t?t.name:"N/A"}function o(e){return n.default.getState().users.users.filter(function(t){return-1!==t.roles.indexOf(e)})}Object.defineProperty(a,"__esModule",{value:!0}),a.getUserFromId=r,a.getNameFromId=s,a.getWithRole=o;var i=e("./store"),n=function(e){return e&&e.__esModule?e:{default:e}}(i)},{"./store":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/store.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/utils.js":[function(e,t,a){"use strict";function r(e){switch(e){case"week":return(0,o.default)().subtract(7,"days").startOf("day").toISOString();case"month":return(0,o.default)().subtract(1,"month").startOf("day").toISOString();case"months3":return(0,o.default)().subtract(3,"month").startOf("day").toISOString();case"months6":return(0,o.default)().subtract(6,"month").startOf("day").toISOString();case"year":return(0,o.default)().subtract(1,"year").startOf("day").toISOString();default:return null}}Object.defineProperty(a,"__esModule",{value:!0}),a.dateFromRelative=r;var s=e("moment"),o=function(e){return e&&e.__esModule?e:{default:e}}(s)},{moment:"moment"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/about.js":[function(e,t,a){"use strict";function r(e){return{}}function s(e){return{}}var o=e("react"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),n=e("react-redux"),l=i.default.createClass({displayName:"About",propTypes:{},render:function(){return i.default.createElement("section",{className:"section section--page section--about"},i.default.createElement("header",{className:"section__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"section__headline"},i.default.createElement("h1",{className:"section__title"},"About")))),i.default.createElement("div",{className:"section__body"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"prose prose--responsive"},i.default.createElement("p",null,"Timely access to aerial imagery is critical for disaster response. The Imagery Coordination tool allows people to coordinate and track progress on the collection of satellite and UAV imagery around the globe."),i.default.createElement("p",null,"The tool is an initiative by the ",i.default.createElement("a",{href:"http://hotosm.org"},"Humanitarian OpenStreetMap Team")," and currently in beta. Check the ",i.default.createElement("a",{href:"https://github.com/hotosm/imagery-requests"},"Github project")," to know more about how to contribute to this project.")))))}});t.exports=(0,n.connect)(r,s)(l)},{react:"react","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/app.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{user:e.user,usersList:e.users}}function o(e){return{}}var i=e("react"),n=r(i),l=e("react-redux"),u=e("lodash"),d=r(u),c=e("classnames"),m=r(c),p=e("../components/page-header"),f=r(p),h=e("../components/page-footer"),y=r(h),g=n.default.createClass({displayName:"App",propTypes:{routes:i.PropTypes.array,route:i.PropTypes.object,children:i.PropTypes.object,user:i.PropTypes.object,usersList:i.PropTypes.object},render:function(){var e=d.default.get(d.default.last(this.props.routes),"pageClass","");return!this.props.usersList.fetched||this.props.usersList.fetching?null:n.default.createElement("div",{className:(0,m.default)("page",e)},n.default.createElement(f.default,{auth:this.props.route.auth,user:this.props.user}),n.default.createElement("main",{className:"page__body",role:"main"},this.props.children),n.default.createElement(y.default,null))}});t.exports=(0,l.connect)(s,o)(g)},{"../components/page-footer":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/page-footer.js","../components/page-header":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/page-header.js",classnames:"classnames",lodash:"lodash",react:"react","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/dashboard.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{user:e.user,dashboard:e.dashboard,userTasks:e.userTasks,mapState:e.map}}function o(e){return{_selectDashboardTab:function(){return e(h.selectDashboardTab.apply(void 0,arguments))},_invalidateUserTasks:function(){return e(h.invalidateUserTasks.apply(void 0,arguments))},_fetchRequestUserTasks:function(){return e(h.fetchRequestUserTasks.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(h.setMapBaseLayer.apply(void 0,arguments))}}}var i=e("react"),n=r(i),l=e("react-redux"),u=e("classnames"),d=r(u),c=e("react-paginate"),m=r(c),p=e("lodash"),f=r(p),h=e("../actions"),y=e("../utils/users"),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),v=e("../utils/utils"),b=e("../utils/features"),_=e("../utils/auth-service"),E=e("../components/task-card"),T=r(E),w=e("../components/dashboard-map"),S=r(w),k=n.default.createClass({displayName:"Dashboard",propTypes:{_selectDashboardTab:i.PropTypes.func,_invalidateUserTasks:i.PropTypes.func,_fetchRequestUserTasks:i.PropTypes.func,_setMapBaseLayer:i.PropTypes.func,user:i.PropTypes.object,dashboard:i.PropTypes.object,userTasks:i.PropTypes.object,mapState:i.PropTypes.object},componentDidMount:function(){var e=f.default.get(this.props.user,"profile.roles",[]),t="assigned";-1!==e.indexOf("coordinator")&&(t="created"),this.props._selectDashboardTab(t),this.props._fetchRequestUserTasks(this.props.user.profile.user_id,{scope:t,includeStats:!0})},componentWillUnmount:function(){this.props._invalidateUserTasks()},getFilters:function(){var e={includeStats:!0};"--"!==this.refs["filter-status"].value&&(e.status=this.refs["filter-status"].value);var t=(0,v.dateFromRelative)(this.refs["filter-interval"].value);return null!==t&&(e.dateFrom=t),e},onFilterChange:function(){var e=this.getFilters();e.scope=this.props.dashboard.activeTab,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,e)},onTabClick:function(e,t){t.preventDefault(),this.props._selectDashboardTab(e);var a=this.getFilters();a.scope=e,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,a)},
handlePageClick:function(e){var t=this.getFilters();t.page=e.selected+1,t.scope=this.props.dashboard.activeTab,this.props._fetchRequestUserTasks(this.props.user.profile.user_id,t)},renderUserTasks:function(){var e=this,t=this.props.userTasks,a=t.fetched,r=t.fetching,s=t.error,o=t.data;return a||r?r?n.default.createElement("p",{className:"loading-indicator"},"Loading..."):s?n.default.createElement("p",null,"Error"):o.results.length?n.default.createElement("div",null,n.default.createElement("ul",{className:"tasks-list"},o.results.map(function(t){var a="none",r=f.default.get(e.props.user,"token"),s=f.default.get(e.props.user,"profile.roles",[]);if((0,_.isLoggedIn)(r)&&-1!==s.indexOf("coordinator"))a="enabled";else if((0,_.isLoggedIn)(r)&&-1!==s.indexOf("surveyor")){var o=f.default.get(e.props.user,"profile.user_id",null);a=t.assigneeId===o?"enabled":"disabled"}return n.default.createElement("li",{className:"tasks-list__item",key:t._id},n.default.createElement(T.default,{requestId:t.requestId,requestName:t.requestInfo.name,id:t._id,name:t.name,status:t.status,authorId:t.authorId,assigneeId:t.assigneeId,updated:t.updated,geometry:t.geometry,editType:a}))})),n.default.createElement("div",{className:"pagination-wrapper"},n.default.createElement(m.default,{previousLabel:n.default.createElement("span",null,"previous"),nextLabel:n.default.createElement("span",null,"next"),breakLabel:n.default.createElement("span",{className:"pages__page"},"..."),pageNum:Math.ceil(o.meta.found/o.meta.limit),forceSelected:o.meta.page-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"}))):n.default.createElement("p",null,"There are no tasks to match the selected filters"):null},renderStats:function(){var e=this.props.userTasks,t=e.fetched,a=e.data;return t?n.default.createElement("div",{className:"tasks-stats"},n.default.createElement("h2",{className:"tasks-stats__title"},"Tasks"),n.default.createElement("ul",{className:"stats-list"},n.default.createElement("li",{className:"stats-list__item"},n.default.createElement("strong",null,a.stats.activeTasks),"active"),n.default.createElement("li",{className:"stats-list__item"},n.default.createElement("strong",null,a.stats.completedTasks),"completed"))):null},render:function(){var e=this.props.dashboard.activeTab,t=(0,b.geometryToFeature)(this.props.userTasks.data.results,function(e){return f.default.omit(e,["geometry","updates"])});return n.default.createElement("section",{className:"section section--page section--tasks"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},g.getNameFromId(this.props.user.profile.user_id)),this.renderStats()))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"list-filters"},n.default.createElement("form",{className:"form"},n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"task-status"},"Status"),n.default.createElement("select",{ref:"filter-status",className:"form__control form__control--medium",id:"task-status",onChange:this.onFilterChange},n.default.createElement("option",{value:"--"},"All"),n.default.createElement("option",{value:"open"},"Open"),n.default.createElement("option",{value:"inprogress"},"In Progress"),n.default.createElement("option",{value:"completed"},"Completed"))),n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"task-interval"},"Time interval"),n.default.createElement("select",{ref:"filter-interval",className:"form__control form__control--medium",id:"task-interval",onChange:this.onFilterChange},n.default.createElement("option",{value:"--"},"All"),n.default.createElement("option",{value:"week"},"Last week"),n.default.createElement("option",{value:"month"},"Last month"),n.default.createElement("option",{value:"months3"},"Last 3 months"),n.default.createElement("option",{value:"months6"},"Last 6 months"),n.default.createElement("option",{value:"year"},"Last year"))))),n.default.createElement("ul",{className:"tabbed-nav"},n.default.createElement("li",{className:(0,d.default)("tabbed-nav__item",{"tabbed-nav__item--active":"assigned"===e}),onClick:this.onTabClick.bind(null,"assigned")},n.default.createElement("a",{href:""},"Assigned")),n.default.createElement("li",{className:(0,d.default)("tabbed-nav__item",{"tabbed-nav__item--active":"created"===e}),onClick:this.onTabClick.bind(null,"created")},n.default.createElement("a",{href:""},"Created"))),n.default.createElement("div",{className:"dashboard__col--main"},n.default.createElement("div",{className:"tabbed-content"},this.renderUserTasks())),n.default.createElement("div",{className:"dashboard__col--sec"},n.default.createElement(S.default,{mapId:"map-dashboard",className:"map-container map-container--dashboard",results:t,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})))))}});t.exports=(0,l.connect)(s,o)(k)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../components/dashboard-map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/dashboard-map.js","../components/task-card":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-card.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js","../utils/utils":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/utils.js",classnames:"classnames",lodash:"lodash",react:"react","react-paginate":"react-paginate","react-redux":"react-redux"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/home.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{requests:e.requests,requestsAll:e.requestsAll,generalStats:e.generalStats,user:e.user,mapState:e.map}}function o(e){return{_fetchRequests:function(){return e(_.fetchRequests.apply(void 0,arguments))},_fetchAllRequests:function(){return e(_.fetchAllRequests.apply(void 0,arguments))},_fetchGeneralStats:function(){return e(_.fetchGeneralStats.apply(void 0,arguments))},_invalidateRequests:function(){return e(_.invalidateRequests.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(_.setMapBaseLayer.apply(void 0,arguments))}}}var i=e("react"),n=r(i),l=e("react-router"),u=e("react-redux"),d=e("react-paginate"),c=r(d),m=e("lodash"),p=r(m),f=e("numeral"),h=r(f),y=e("moment"),g=r(y),v=e("classnames"),b=r(v),_=e("../actions"),E=e("../utils/users"),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),w=e("../utils/utils"),S=e("../utils/features"),k=e("../components/home-map"),j=r(k),x=e("../utils/auth-service"),N=n.default.createClass({displayName:"Home",propTypes:{_fetchRequests:i.PropTypes.func,_fetchAllRequests:i.PropTypes.func,_fetchGeneralStats:i.PropTypes.func,_invalidateRequests:i.PropTypes.func,_setMapBaseLayer:i.PropTypes.func,requests:i.PropTypes.object,requestsAll:i.PropTypes.object,generalStats:i.PropTypes.object,user:i.PropTypes.object,mapState:i.PropTypes.object},componentDidMount:function(){this.props._fetchRequests({footprint:!0}),this.props._fetchGeneralStats(),this.props._fetchAllRequests()},componentWillUnmount:function(){this.props._invalidateRequests()},getFilters:function(){var e={};"--"!==this.refs["filter-author"].value&&(e.author=this.refs["filter-author"].value),"--"!==this.refs["filter-status"].value&&(e.status=this.refs["filter-status"].value);var t=(0,w.dateFromRelative)(this.refs["filter-interval"].value);return null!==t&&(e.dateFrom=t),e},handlePageClick:function(e){var t=this.getFilters();t.footprint=!0,t.page=e.selected+1,this.props._fetchRequests(t)},onFilterChange:function(){var e=this.getFilters();e.footprint=!0,this.props._fetchRequests(e)},renderRequestList:function(){var e=this.props.requests,t=e.fetched,a=e.fetching,r=e.error,s=e.data;return t||a?a?n.default.createElement("p",{className:"loading-indicator"},"Loading..."):r?n.default.createElement("p",null,"Error"):s.results.length?n.default.createElement("div",null,n.default.createElement("ul",{className:"requests__list"},s.results.map(this.renderRequestCard)),n.default.createElement("div",{className:"pagination-wrapper"},n.default.createElement(c.default,{previousLabel:n.default.createElement("span",null,"previous"),nextLabel:n.default.createElement("span",null,"next"),breakLabel:n.default.createElement("span",{className:"pages__page"},"..."),pageNum:Math.ceil(s.meta.found/s.meta.limit),forceSelected:s.meta.page-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"}))):n.default.createElement("p",null,"No requests found with the selected filters."):null},renderRequestCard:function(e){var t=p.default.get(e.tasksInfo.status,"completed",0),a=e.tasksInfo.total-t,r=e.tasksInfo.total>0?t/e.tasksInfo.total*100:0,s=(0,b.default)("progress-bar",{"progress-bar--disabled":"canceled"===e.status});return n.default.createElement("li",{className:"requests__item",key:e._id},n.default.createElement("article",{className:"request"},n.default.createElement("header",{className:"request__header"},n.default.createElement("h1",{className:"request__title"},n.default.createElement(l.Link,{to:"/requests/"+e._id},e.name))),n.default.createElement("div",{className:"request__body"},n.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},p.default.capitalize(e.status)),n.default.createElement("div",{className:"request-progress"},n.default.createElement("progress",{value:r,max:"100",className:s,style:{backgroundSize:r+"%"}}),n.default.createElement("p",{className:"progress-value"},(0,h.default)(r).format("0.0"),"% complete")),n.default.createElement("ul",{className:"request-tasks-info"},n.default.createElement("li",null,n.default.createElement("strong",null,a)," Active"),n.default.createElement("li",null,n.default.createElement("strong",null,t)," Complete tasks")),n.default.createElement("p",{className:"meta-info"},"Created on ",(0,g.default)(e.created).format("YYYY/MM/DD")," by ",T.getNameFromId(e.authorId)))))},renderStats:function(){var e=this.props.generalStats,t=e.fetched,a=e.fetching,r=e.data;return!t||a?null:n.default.createElement("ul",{className:"general-stats"},n.default.createElement("li",null,n.default.createElement("strong",null,r.requests.status.open)," active requests"),n.default.createElement("li",null,n.default.createElement("strong",null,r.requests.status.closed)," closed requests"))},renderMap:function(){var e=this.props.requestsAll,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(a)return n.default.createElement("p",{className:"loading-indicator"},"Loading...");if(r)return n.default.createElement("p",null,"Error");var o=(0,S.combineFeatureResults)(s.results,function(e){return p.default.omit(e,["geometry","updates"])});return n.default.createElement(j.default,{mapId:"map-home",className:"map-container map-container--display bleed-full",results:o,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.requests.data.meta.found,t=this.props.user.token,a=p.default.get(this.props.user,"profile.roles",[]),r=(0,x.isLoggedIn)(t)&&-1!==a.indexOf("coordinator");return n.default.createElement("section",{className:"section section--home"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},"Imagery Coordination Service"),n.default.createElement("div",{className:"section__introduction"},n.default.createElement("p",null,"Tracking and coordinating satellite and aerial imagery needs around the globe. Currently in beta. View open requests below or ",n.default.createElement(l.Link,{to:"/imagery-search"},"explore the search")," to compare imagery."))),r?n.default.createElement("div",{className:"section__actions"},n.default.createElement(l.Link,{to:"/imagery-search",className:"button-add-request"},n.default.createElement("span",null,"Add request"))):null,n.default.createElement("div",{className:"section__stats"},this.renderStats()))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},this.renderMap(),n.default.createElement("h2",null,"Requests ",e>0?"("+e+")":""),n.default.createElement("div",{className:"list-filters"},n.default.createElement("form",{className:"form"},n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"request-author"},"Author"),n.default.createElement("select",{ref:"filter-author",className:"form__control form__control--medium",id:"request-author",onChange:this.onFilterChange},n.default.createElement("option",{value:"--"},"All"),T.getWithRole("coordinator").map(function(e){return n.default.createElement("option",{value:e.userId,key:e.userId},e.name)}))),n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"request-status"},"Status"),n.default.createElement("select",{ref:"filter-status",className:"form__control form__control--medium",id:"request-status",onChange:this.onFilterChange},n.default.createElement("option",{value:"--"},"All"),n.default.createElement("option",{value:"open"},"Open"),n.default.createElement("option",{value:"closed"},"Closed"),n.default.createElement("option",{value:"canceled"},"Canceled"))),n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"request-interval"},"Time interval"),n.default.createElement("select",{ref:"filter-interval",className:"form__control form__control--medium",id:"request-interval",onChange:this.onFilterChange},n.default.createElement("option",{value:"--"},"All"),n.default.createElement("option",{value:"week"},"Last week"),n.default.createElement("option",{value:"month"},"Last month"),n.default.createElement("option",{value:"months3"},"Last 3 months"),n.default.createElement("option",{value:"months6"},"Last 6 months"),n.default.createElement("option",{value:"year"},"Last year"))))),this.renderRequestList())))}});t.exports=(0,u.connect)(s,o)(N)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../components/home-map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/home-map.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js","../utils/utils":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/utils.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react","react-paginate":"react-paginate","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/imagery-search.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e){return{user:e.user,mapData:e.imagerySearch}}function i(e){return{_setSearchMapBaseLayer:function(){return e(v.setSearchMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("mapbox-gl"),c=r(d),m=e("react-router"),p=e("mapbox-gl-sync-move"),f=r(p),h=e("lodash"),y=r(h),g=e("../utils/map-layers"),v=e("../actions"),b=e("../utils/auth-service"),_=l.default.createClass({displayName:"ImagerySearch",propTypes:{_setSearchMapBaseLayer:n.PropTypes.func,user:n.PropTypes.object,mapData:n.PropTypes.object,params:n.PropTypes.object},defaultMapView:{lat:0,lng:0,zoom:1},mainMap:null,maps:[],mapMovementThrottle:null,getInitialMapView:function(){var e={};if(this.props.params.mapview){var t=this.props.params.mapview.split(",");e={lng:t[0],lat:t[1],zoom:t[2]}}else e=this.defaultMapView;return e},setupMap:function(e,t,a){var r=this,s=new c.default.Map({container:e,style:{version:8,sources:{"thumb-map":{type:"raster",tiles:[t.url],tileSize:256}},layers:[{id:"tiles",type:"raster",source:"thumb-map",minzoom:0,maxzoom:22}]},center:[a.lng,a.lat],zoom:a.zoom});return s.on("click",function(e){r.selectLayer(t)}),s},componentDidMount:function(){var e=this,t=this.getInitialMapView();this.mainMap=new c.default.Map({container:this.refs.mapMaster,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:[this.props.mapData.baseLayer.url],tileSize:256}},layers:[{id:"tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[t.lng,t.lat],zoom:t.zoom}),this.mainMap.addControl(new c.default.NavigationControl,"top-left"),this.mainMap.dragRotate.disable(),this.mainMap.touchZoomRotate.disableRotation();var a=document.querySelector(".mapboxgl-ctrl-top-left .mapboxgl-ctrl-group");a.classList.add("button-group","button-group--vertical"),a.querySelector(".mapboxgl-ctrl-zoom-in").classList.add("button"),a.querySelector(".mapboxgl-ctrl-zoom-out").classList.add("button"),a.querySelector(".mapboxgl-ctrl-compass").remove(),this.maps=[this.mainMap].concat(s((0,g.getImagerySearchLayers)().map(function(a,r){return e.setupMap(e.refs["mapThumb"+r],a,t)}))),this.mainMap.on("moveend",this.onMapChange),(0,f.default)(this.maps)},componentWillReceiveProps:function(e){var t=e.mapData.baseLayer;t.id!==this.props.mapData.baseLayer.id&&this.mainMap.removeSource("raster-tiles").addSource("raster-tiles",{type:"raster",tiles:[t.url],tileSize:256})},componentWillUnmount:function(){this.maps.forEach(function(e){e.remove()})},selectLayer:function(e){this.props._setSearchMapBaseLayer(e)},renderAddRequestLink:function(){var e=this.props.user.token,t=y.default.get(this.props.user,"profile.roles",[]);if((0,b.isLoggedIn)(e)&&-1!==t.indexOf("coordinator"))return l.default.createElement(m.Link,{to:"/requests/edit",className:"button-skip"},"Skip this step")},onMapChange:function(){var e=this;if(!this.mapMovementThrottle){var t="#/imagery-search/"+this.mapViewToString();window.history.replaceState(null,null,t),this.mapMovementThrottle=setTimeout(function(){e.mapMovementThrottle=null},500)}},mapViewToString:function(){var e=this.mainMap.getCenter(),t=Math.round(this.mainMap.getZoom());return[e.lng,e.lat,t].join(",")},render:function(){return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("h1",{className:"section__title"},"Search and Compare Imagery"),l.default.createElement("p",null,"Explore and compare existing sources of imagery prior to requesting additional imagery.")),l.default.createElement("div",{className:"section__actions"},this.renderAddRequestLink()))),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"map-master"},l.default.createElement("div",{className:"map-master__map",ref:"mapMaster"}),l.default.createElement("h2",{className:"map-master__source"},"Source: ",this.props.mapData.baseLayer.name)),l.default.createElement("ul",{className:"map-thumbs"},(0,g.getImagerySearchLayers)().map(function(e,t){return l.default.createElement("li",{key:e.id,className:"map-thumbs__item"},l.default.createElement("div",{ref:"mapThumb"+t,className:"map-thumbs__map"}),l.default.createElement("h3",{className:"map-thumbs__source"},e.name))})))))}});t.exports=(0,u.connect)(o,i)(_)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","../utils/map-layers":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/map-layers.js",lodash:"lodash","mapbox-gl":"mapbox-gl","mapbox-gl-sync-move":"mapbox-gl-sync-move",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/request-form.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){return{request:e.request,requestForm:e.requestForm}}function i(e){return{_fetchRequest:function(){return e(E.fetchRequest.apply(void 0,arguments))},_invalidateRequest:function(){return e(E.invalidateRequest.apply(void 0,arguments))},_postRequest:function(){return e(E.postRequest.apply(void 0,arguments))},_patchRequest:function(){return e(E.patchRequest.apply(void 0,arguments))},_resetRequestFrom:function(){return e(E.resetRequestFrom.apply(void 0,arguments))},_deleteRequest:function(){return e(E.deleteRequest.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("moment"),c=r(d),m=e("classnames"),p=r(m),f=e("lodash"),h=r(f),y=e("react-router"),g=e("react-widgets/lib/DateTimePicker"),v=r(g),b=e("react-widgets/lib/localizers/moment"),_=r(b),E=e("../actions");(0,_.default)(c.default);var T=l.default.createClass({displayName:"RequestForm",propTypes:{_fetchRequest:n.PropTypes.func,_invalidateRequest:n.PropTypes.func,_postRequest:n.PropTypes.func,_patchRequest:n.PropTypes.func,_resetRequestFrom:n.PropTypes.func,_deleteRequest:n.PropTypes.func,params:n.PropTypes.object,request:n.PropTypes.object,requestForm:n.PropTypes.object},goToTaskForm:!1,getInitialState:function(){return{data:{name:"",status:"open",requestingOrg:"",gsd:"",productType:"",purpose:"",use:"",notes:"",timePeriodRequestedFrom:null,timePeriodRequestedTo:null},errors:{}}},checkErrors:function(){var e=!0,t={};return""===this.state.data.name&&(t.name=!0,e=!1),""!==this.state.data.gsd&&isNaN(+this.state.data.gsd)&&(t.gsd=!0,e=!1),this.setState({errors:t}),e},onSave:function(e){this.goToTaskForm=!1,this.onFormSubmit(e)},onSaveAndAdd:function(e){this.goToTaskForm=!0,this.onFormSubmit(e)},onFormSubmit:function(e){if(e.preventDefault(),this.checkErrors()){var t={name:this.state.data.name,status:this.state.data.status||null,timePeriodRequestedFrom:this.state.data.timePeriodRequestedFrom?(0,c.default)(this.state.data.timePeriodRequestedFrom).format("YYYY-MM-DD"):null,timePeriodRequestedTo:this.state.data.timePeriodRequestedTo?(0,c.default)(this.state.data.timePeriodRequestedTo).format("YYYY-MM-DD"):null,requestingOrg:this.state.data.requestingOrg||null,gsd:this.state.data.gsd||null,productType:this.state.data.productType||null,purpose:this.state.data.purpose||null,use:this.state.data.use||null,notes:this.state.data.notes||null};this.props.params.reqid?this.props._patchRequest(this.props.params.reqid,t):(t=h.default.pickBy(t,function(e){return null!==e}),this.props._postRequest(t)),this.setState({data:this.getInitialState().data})}},getValueForDate:function(e,t){return null===this.state.data[e]?null:new Date(this.state.data[e])},dateOrUndefined:function(e){return this.getValueForDate(e)||void 0},onDateChange:function(e,t,a){var r=null===t?null:t.toISOString(),o=Object.assign({},this.state.data,s({},e,r));this.setState({data:o})},onFieldChange:function(e,t){var a=Object.assign({},this.state.data,s({},e,t.target.value));this.setState({data:a})},onDeleteClick:function(e){e.preventDefault();var t="Are you sure you want to delete "+this.props.request.data.name+"?\nThis action is permanent, and all associated tasks will be deleted as well.";confirm(t)&&(this.props._deleteRequest(this.props.params.reqid),y.hashHistory.push("/"))},componentDidMount:function(){this.props.params.reqid&&this.props._fetchRequest(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateRequest(),this.props._resetRequestFrom()},componentWillReceiveProps:function(e){var t=this.props.request,a=t.fetched,r=t.fetching,s=e.request,o=s.fetched,i=s.fetching,n=s.error,l=s.data;if(!a&&r&&o&&!i&&!n){var u={};Object.keys(this.state.data).forEach(function(e){u[e]=null===l[e]?"":l[e]}),u.timePeriodRequestedFrom=l.timePeriodRequested.from,u.timePeriodRequestedTo=l.timePeriodRequested.to,this.setState({data:u})}var d=this.props.requestForm.processing,c=e.requestForm,m=c.processing,p=c.data;d&&!m&&p._id&&(this.goToTaskForm?y.hashHistory.push("/requests/"+p._id+"/tasks/edit"):y.hashHistory.push("/requests/"+p._id))},renderFrom:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!!this.props.params.reqid);return l.default.createElement("div",{className:"request-form"},l.default.createElement("form",{ref:"form",className:"form"},l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-name"},"Request name ",l.default.createElement("small",null,"(required)")),l.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"request-name",name:"request-name",placeholder:"Request name",value:this.state.data.name,onChange:this.onFieldChange.bind(null,"name")}),this.state.errors.name?l.default.createElement("p",{className:"message message--alert"},"A name is required"):null),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-status"},"Status"),l.default.createElement("select",{className:(0,p.default)("form__control form__control--medium",{disabled:!e}),id:"request-status",value:this.state.data.status,onChange:this.onFieldChange.bind(null,"status")},l.default.createElement("option",{value:"open"},"Open"),l.default.createElement("option",{value:"closed"},"Closed"),l.default.createElement("option",{value:"canceled"},"Canceled"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label"},"Time period requested"),l.default.createElement("div",{className:"date-selector"},l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(v.default,{max:this.dateOrUndefined("timePeriodRequestedTo")||new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodRequestedFrom"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodRequestedFrom")})),l.default.createElement("p",{className:"date-selector__sep"},"to"),l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(v.default,{min:this.dateOrUndefined("timePeriodRequestedFrom"),max:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodRequestedTo"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodRequestedTo")}))),l.default.createElement("p",{className:"form__help"},"The dates are used to express a range and are optional.")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-org"},"Requesting organization"),l.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"request-org",name:"request-org",placeholder:"Requesting organization",value:this.state.data.requestingOrg,onChange:this.onFieldChange.bind(null,"requestingOrg")})),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-gsd"},"GSD"),l.default.createElement("input",{ref:"gsd",type:"text",className:"form__control form__control--medium",id:"request-gsd",name:"request-gsd",placeholder:"Desired GSD",value:this.state.data.gsd,onChange:this.onFieldChange.bind(null,"gsd")}),l.default.createElement("p",{className:"form__help"},"Ground Sample Distance in meters."),this.state.errors.gsd?l.default.createElement("p",{className:"message message--alert"},"The GSD must be a number"):null),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-prod-type"},"Product type"),l.default.createElement("select",{className:"form__control form__control--medium",id:"request-prod-type",ref:"productType",name:"request-prod-type",value:this.state.data.productType,onChange:this.onFieldChange.bind(null,"productType")},l.default.createElement("option",{value:""},"Select one"),l.default.createElement("option",{value:"Satellite imagery"},"Satellite imagery"),l.default.createElement("option",{value:"UAV or other aerial imagery"},"UAV or other aerial imagery"))),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-purpose"},"Purpose"),l.default.createElement("textarea",{ref:"purpose",className:"form__control",id:"request-purpose",rows:"4",placeholder:"Purpose of this request",value:this.state.data.purpose,onChange:this.onFieldChange.bind(null,"purpose")}),l.default.createElement("p",{className:"form__help"},"Describe why these images are needed and the context of the work being conducted.")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-use"},"Use"),l.default.createElement("textarea",{ref:"use",className:"form__control",id:"request-use",rows:"4",placeholder:"Intended use for the imagery",value:this.state.data.use,onChange:this.onFieldChange.bind(null,"use")}),l.default.createElement("p",{className:"form__help"},"How will the imagery be used and what products do you intend to generate?")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"request-notes"},"Notes"),l.default.createElement("textarea",{ref:"notes",className:"form__control",id:"request-notes",rows:"4",placeholder:"Additional notes and links for background",value:this.state.data.notes,onChange:this.onFieldChange.bind(null,"notes")})),l.default.createElement("div",{className:"form__actions"},e?l.default.createElement("button",{type:"submit",className:"button button--primary",onClick:this.onSave},l.default.createElement("span",null,"Save request")):null,l.default.createElement("button",{type:"submit",className:"button button--secondary",onClick:this.onSaveAndAdd},l.default.createElement("span",null,e?"Save & add task":"Create & add task")),l.default.createElement(y.Link,{to:e?"requests/"+this.props.params.reqid:"/",className:"button button--base"},l.default.createElement("span",null,"Cancel")))))},render:function(){var e=!!this.props.params.reqid,t=this.props.request,a=t.fetched,r=t.fetching,s=t.error,o=t.data,i="Create Request";if(e){if(!a&&!r)return null;r&&(i="Edit Request"),o.name&&(i="Edit "+o.name)}return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{
className:"section__headline"},l.default.createElement("h1",{className:"section__title"},i)),e?l.default.createElement("div",{className:"section__actions"},l.default.createElement("a",{href:"#",className:"button-delete",onClick:this.onDeleteClick},l.default.createElement("span",null,"Delete request"))):null)),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},e&&r?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):null,e&&s?l.default.createElement("p",null,"Error"):null,!e||e&&!r?this.renderFrom():null,this.props.requestForm.processing?l.default.createElement("p",null,"Submitting data..."):null)))}});t.exports=(0,u.connect)(o,i)(T)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js",classnames:"classnames",lodash:"lodash",moment:"moment",react:"react","react-redux":"react-redux","react-router":"react-router","react-widgets/lib/DateTimePicker":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/DateTimePicker.js","react-widgets/lib/localizers/moment":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/localizers/moment.js"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/request-page.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{request:e.request,tasks:e.tasks,user:e.user,mapState:e.map}}function o(e){return{_fetchRequest:function(){return e(_.fetchRequest.apply(void 0,arguments))},_fetchRequestTasks:function(){return e(_.fetchRequestTasks.apply(void 0,arguments))},_invalidateRequest:function(){return e(_.invalidateRequest.apply(void 0,arguments))},_invalidateTasks:function(){return e(_.invalidateTasks.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(_.setMapBaseLayer.apply(void 0,arguments))}}}var i=e("react"),n=r(i),l=e("react-redux"),u=e("react-router"),d=e("lodash"),c=r(d),m=e("classnames"),p=r(m),f=e("moment"),h=r(f),y=e("numeral"),g=r(y),v=e("react-linkify"),b=r(v),_=e("../actions"),E=e("../utils/users"),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),w=e("../utils/features"),S=e("../utils/auth-service"),k=e("../components/task-card"),j=r(k),x=e("../components/request-map"),N=r(x),R=n.default.createClass({displayName:"RequestPage",propTypes:{_fetchRequest:i.PropTypes.func,_fetchRequestTasks:i.PropTypes.func,_invalidateRequest:i.PropTypes.func,_invalidateTasks:i.PropTypes.func,_setMapBaseLayer:i.PropTypes.func,params:i.PropTypes.object,request:i.PropTypes.object,tasks:i.PropTypes.object,user:i.PropTypes.object,mapState:i.PropTypes.object},componentDidMount:function(){var e={footprint:!0};this.props._fetchRequest(this.props.params.reqid,e),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateRequest(),this.props._invalidateTasks()},renderTaskCard:function(e){var t="none",a=c.default.get(this.props.user,"token"),r=c.default.get(this.props.user,"profile.roles",[]);if((0,S.isLoggedIn)(a)&&-1!==r.indexOf("coordinator"))t="enabled";else if((0,S.isLoggedIn)(a)&&-1!==r.indexOf("surveyor")){var s=c.default.get(this.props.user,"profile.user_id",null);t=e.assigneeId===s?"enabled":"disabled"}return n.default.createElement("li",{className:"tasks-list__item",key:e._id},n.default.createElement(j.default,{requestId:e.requestId,requestName:this.props.request.data.name,id:e._id,name:e.name,status:e.status,authorId:e.authorId,assigneeId:e.assigneeId,updated:e.updated,geometry:e.geometry,editType:t}))},renderTasks:function(){var e=this.props.tasks,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(a)return n.default.createElement("p",{className:"loading-indicator"},"Loading...");if(r)return n.default.createElement("p",null,"Error");var o=s.results.filter(function(e){return"completed"!==e.status}),i=s.results.filter(function(e){return"completed"===e.status});return n.default.createElement("div",null,n.default.createElement("section",{className:"tasks-list-container"},n.default.createElement("h2",null,"Active tasks (",o.length,")"),o.length?n.default.createElement("ul",{className:"tasks-list"},o.map(this.renderTaskCard)):n.default.createElement("p",null,"This request has no active tasks")),n.default.createElement("section",{className:"tasks-list-container"},n.default.createElement("h2",null,"Completed tasks (",i.length,")"),i.length?n.default.createElement("ul",{className:"tasks-list"},i.map(this.renderTaskCard)):n.default.createElement("p",null,"This request has no completed tasks")))},renderRequestMap:function(){var e=this.props.tasks,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(a)return n.default.createElement("p",{className:"loading-indicator"},"Loading...");if(r)return n.default.createElement("p",null,"Error");var o=(0,w.geometryToFeature)(s.results,function(e){return c.default.omit(e,["geometry","updates"])});return n.default.createElement(N.default,{mapId:"map-request-page",className:"map-container map-container--display bleed-full",results:o,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.request,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(r||a)return n.default.createElement("section",{className:"section section--page"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},"Request")))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},r?n.default.createElement("p",null,"Error: ",r):null,a?n.default.createElement("p",{className:"loading-indicator"},"Loading..."):null)));var o=c.default.get(s.tasksInfo.status,"completed",0),i=s.tasksInfo.total>0?o/s.tasksInfo.total*100:0,l=(0,p.default)("progress-bar",{"progress-bar--disabled":"canceled"===s.status}),d="Most recent available";s.timePeriodRequested.from&&s.timePeriodRequested.to?d=(0,h.default)(s.timePeriodRequested.from).format("YYYY/MM/DD")+" - "+(0,h.default)(s.timePeriodRequested.to).format("YYYY/MM/DD"):s.timePeriodRequested.from&&!s.timePeriodRequested.to?d="Anything from "+(0,h.default)(s.timePeriodRequested.from).format("YYYY/MM/DD")+" onwards":!s.timePeriodRequested.from&&s.timePeriodRequested.to&&(d="Up to "+(0,h.default)(s.timePeriodRequested.to).format("YYYY/MM/DD"));var m=this.props.user.token,f=c.default.get(this.props.user,"profile.roles",[]),y=(0,S.isLoggedIn)(m)&&-1!==f.indexOf("coordinator");return n.default.createElement("section",{className:"section section--page"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},s.name)),y?n.default.createElement("div",{className:"section__actions"},n.default.createElement(u.Link,{to:"/requests/"+s._id+"/edit",className:"button-edit"},n.default.createElement("span",null,"Edit request")),n.default.createElement(u.Link,{to:"/requests/"+s._id+"/tasks/edit",className:"button-add-task"},n.default.createElement("span",null,"Add task"))):null,n.default.createElement("div",{className:"section__stats"},n.default.createElement("p",{className:"status-indicator status-indicator--"+s.status},c.default.capitalize(s.status)),n.default.createElement("div",{className:"request-progress"},n.default.createElement("progress",{value:i,max:"100",className:l,style:{backgroundSize:i+"%"}}),n.default.createElement("p",{className:"progress-value"},(0,g.default)(i).format("0.0"),"% complete")),n.default.createElement("p",null,"Created by: ",n.default.createElement("strong",null,T.getNameFromId(s.authorId)))))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},this.renderRequestMap(),n.default.createElement("div",{className:"details"},n.default.createElement("div",{className:"details__col--sec"},n.default.createElement("dl",null,n.default.createElement("dt",null,"Requesting organization"),n.default.createElement("dd",null,s.requestingOrg?s.requestingOrg:"n/a"),n.default.createElement("dt",null,"Time period requested"),n.default.createElement("dd",null,d),n.default.createElement("dt",null,"Desired GSD"),n.default.createElement("dd",null,s.gsd?s.gsd+"m":"n/a"),n.default.createElement("dt",null,"Product type"),n.default.createElement("dd",null,s.productType?s.productType:"n/a"))),n.default.createElement("div",{className:"details__col--main"},n.default.createElement("dl",null,n.default.createElement("dt",null,"Purpose"),n.default.createElement("dd",null,n.default.createElement(b.default,null,s.purpose?s.purpose:"Purpose not provided")),n.default.createElement("dt",null,"Use"),n.default.createElement("dd",null,n.default.createElement(b.default,null,s.use?s.use:"Use not provided")),n.default.createElement("dt",null,"Notes"),n.default.createElement("dd",null,n.default.createElement(b.default,null,s.notes?s.notes:"Notes not provided"))))),n.default.createElement("hr",null),this.renderTasks())))}});t.exports=(0,l.connect)(s,o)(R)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../components/request-map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/request-map.js","../components/task-card":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-card.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js",classnames:"classnames",lodash:"lodash",moment:"moment",numeral:"numeral",react:"react","react-linkify":"react-linkify","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/task-form.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){return{task:e.task,requestTasks:e.tasks,request:e.request,taskForm:e.taskForm,users:e.users,user:e.user,mapState:e.map}}function i(e){return{_fetchTask:function(){return e(w.fetchTask.apply(void 0,arguments))},_invalidateTask:function(){return e(w.invalidateTask.apply(void 0,arguments))},_postTask:function(){return e(w.postTask.apply(void 0,arguments))},_patchTask:function(){return e(w.patchTask.apply(void 0,arguments))},_resetTaskFrom:function(){return e(w.resetTaskFrom.apply(void 0,arguments))},_fetchRequest:function(){return e(w.fetchRequest.apply(void 0,arguments))},_fetchRequestTasks:function(){return e(w.fetchRequestTasks.apply(void 0,arguments))},_invalidateRequest:function(){return e(w.invalidateRequest.apply(void 0,arguments))},_deleteTask:function(){return e(w.deleteTask.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(w.setMapBaseLayer.apply(void 0,arguments))}}}var n=e("react"),l=r(n),u=e("react-redux"),d=e("react-router"),c=e("moment"),m=r(c),p=e("lodash"),f=r(p),h=e("react-widgets/lib/DateTimePicker"),y=r(h),g=e("react-widgets/lib/localizers/moment"),v=r(g),b=e("xmldom"),_=e("../utils/togeojson"),E=r(_),T=e("../utils/features"),w=e("../actions"),S=e("../components/edit-map"),k=r(S);(0,v.default)(m.default);var j=l.default.createClass({displayName:"TaskForm",propTypes:{_fetchTask:n.PropTypes.func,_invalidateTask:n.PropTypes.func,_postTask:n.PropTypes.func,_patchTask:n.PropTypes.func,_resetTaskFrom:n.PropTypes.func,_fetchRequest:n.PropTypes.func,_invalidateRequest:n.PropTypes.func,_deleteTask:n.PropTypes.func,_setMapBaseLayer:n.PropTypes.func,_fetchRequestTasks:n.PropTypes.func,params:n.PropTypes.object,task:n.PropTypes.object,requestTasks:n.PropTypes.object,request:n.PropTypes.object,taskForm:n.PropTypes.object,users:n.PropTypes.object,user:n.PropTypes.object,mapState:n.PropTypes.object},getInitialState:function(){return{data:{name:"",geometry:"",assigneeId:"",deliveryTime:null,timePeriodProvidedFrom:null,timePeriodProvidedTo:null},errors:{}}},goToTaskForm:!1,checkErrors:function(){var e=!0,t={};return""===this.state.data.name&&(t.name=!0,e=!1),""===this.state.data.geometry&&(t.geometry=!0,e=!1),this.setState({errors:t}),e},onSave:function(e){this.goToTaskForm=!1,this.onFormSubmit(e)},onSaveAndAdd:function(e){this.goToTaskForm=!0,this.onFormSubmit(e)},onFormSubmit:function(e){if(e.preventDefault(),this.checkErrors()){var t={name:this.state.data.name,geometry:this.state.data.geometry,assigneeId:this.state.data.assigneeId||null,timePeriodProvidedFrom:this.state.data.timePeriodProvidedFrom?(0,m.default)(this.state.data.timePeriodProvidedFrom).format("YYYY-MM-DD"):null,timePeriodProvidedTo:this.state.data.timePeriodProvidedTo?(0,m.default)(this.state.data.timePeriodProvidedTo).format("YYYY-MM-DD"):null,deliveryTime:this.state.data.deliveryTime?(0,m.default)(this.state.data.deliveryTime).format("YYYY-MM-DD"):null};this.props.params.taskid?this.props._patchTask(this.props.params.reqid,this.props.params.taskid,t):(t=f.default.pickBy(t,function(e){return null!==e}),this.props._postTask(this.props.params.reqid,t)),this.setState({data:this.getInitialState().data})}},getValueForDate:function(e,t){return null===this.state.data[e]?null:new Date(this.state.data[e])},dateOrUndefined:function(e){return this.getValueForDate(e)||void 0},onDateChange:function(e,t,a){var r=null===t?null:t.toISOString(),o=Object.assign({},this.state.data,s({},e,r));this.setState({data:o})},onFieldChange:function(e,t){var a=Object.assign({},this.state.data,s({},e,t.target.value));this.setState({data:a})},onFileChange:function(e){var t=this,a=new FileReader,r=e.target.files[0];if(!r.name.match(/(\.geojson|\.json|\.kml)$/i)){var s=Object.assign({},this.state.errors);return s.geometryFile="Invalid file format. Please upload a GeoJSON or KML file.",void this.setState({errors:s})}var o=!!r.name.match(/\.kml$/i);a.onload=function(e){var r=Object.assign({},t.state.errors);try{var s=void 0;if(o){var i=(new b.DOMParser).parseFromString(a.result);s=E.default.kml(i)}else s=JSON.parse(a.result);(0,T.validateGeoJSONPolygon)(s,function(e,a){if(e)r.geometryFile=o?"The KML file is not properly formatted. Please ensure that it only includes one polygon.":e,t.setState({errors:r});else{var s=Object.assign({},t.state.data,{geometry:a});r.geometryFile=null,r.geometry=null,t.setState({errors:r,data:s})}})}catch(e){r.geometryFile="File is not properly formatted. Needs to be a valid GeoJSON or KML.",t.setState({errors:r})}},a.readAsText(r)},onFeatureDraw:function(e){var t=e.features[0].geometry.coordinates[0],a=Object.assign({},this.state.data,{geometry:t}),r=Object.assign({},this.state.errors,{geometry:null,geometryFile:null});this.setState({data:a,errors:r})},onFeatureRemove:function(){var e=Object.assign({},this.state.data,{geometry:""});this.setState({data:e})},onDeleteClick:function(e){e.preventDefault();var t="Are you sure you want to delete "+this.props.task.data.name+"?\nThis action is permanent.";confirm(t)&&(this.props._deleteTask(this.props.params.reqid,this.props.params.taskid),d.hashHistory.push("/requests/"+this.props.params.reqid))},componentDidMount:function(){this.props.params.taskid?this.props._fetchTask(this.props.params.reqid,this.props.params.taskid):this.props._fetchRequest(this.props.params.reqid),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateTask(),this.props._invalidateRequest(),this.props._resetTaskFrom()},componentWillReceiveProps:function(e){var t=this.props.task,a=t.fetched,r=t.fetching,s=e.task,o=s.fetched,i=s.fetching,n=s.error,l=s.data;if(!a&&r&&o&&!i&&!n){if(-1!==this.props.user.profile.roles.indexOf("surveyor")&&this.props.user.profile.user_id!==l.assigneeId)return d.hashHistory.push("/");var u={};Object.keys(this.state.data).forEach(function(e){u[e]=null===l[e]?"":l[e]}),u.timePeriodProvidedFrom=l.timePeriodProvided.from,u.timePeriodProvidedTo=l.timePeriodProvided.to,u.deliveryTime=u.deliveryTime||null,this.setState({data:u})}var c=this.props.taskForm.processing,m=e.taskForm,p=m.processing,f=m.data;c&&!p&&f._id&&(this.goToTaskForm?(this.props._fetchRequestTasks(this.props.params.reqid),this.props.params.taskid?d.hashHistory.push("/requests/"+f.requestId+"/tasks/edit"):(this.goToTaskForm=!1,this.refs.form.reset(),this.setState(this.getInitialState()))):d.hashHistory.push("/requests/"+f.requestId+"/tasks/"+f._id))},renderMap:function(){var e=this,t=(0,T.geometryToFeature)(this.state.data.geometry),a=null;if(this.props.requestTasks.fetched&&!this.props.requestTasks.fetching&&this.props.requestTasks.data.results.length){var r=this.props.params.taskid?this.props.requestTasks.data.results.filter(function(t){return t._id!==e.props.params.taskid}):this.props.requestTasks.data.results;a=(0,T.geometryToFeature)(r,function(e){return f.default.omit(e,["geometry","updates"])})}return l.default.createElement(k.default,{mapId:"map-task-edit",className:"map-container map-container--edit bleed-full",geometry:t,otherTasks:a,onFeatureDraw:this.onFeatureDraw,onFeatureRemove:this.onFeatureRemove,onBaseLayerSelect:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},renderFrom:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!!this.props.params.taskid);return l.default.createElement("div",{className:"task-form"},l.default.createElement("form",{ref:"form",className:"form"},l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label"},"Area of interest"),l.default.createElement("input",{type:"file",name:"task-area-file",onChange:this.onFileChange}),this.state.errors.geometryFile?l.default.createElement("p",{className:"message message--alert"},this.state.errors.geometryFile):null),this.renderMap(),this.state.errors.geometry?l.default.createElement("p",{className:"message message--alert"},"A task polygon is needed. Draw one or provide a file."):null,l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"task-name"},"Task name ",l.default.createElement("small",null,"(required)")),l.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"task-name",name:"task-name",placeholder:"Task name",value:this.state.data.name,onChange:this.onFieldChange.bind(null,"name")}),this.state.errors.name?l.default.createElement("p",{className:"message message--alert"},"A name is required"):null),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label"},"Time period provided"),l.default.createElement("div",{className:"date-selector"},l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(y.default,{max:this.dateOrUndefined("timePeriodProvidedTo")||new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodProvidedFrom"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodProvidedFrom")})),l.default.createElement("p",{className:"date-selector__sep"},"to"),l.default.createElement("div",{className:"date-selector__picker"},l.default.createElement(y.default,{min:this.dateOrUndefined("timePeriodProvidedFrom"),max:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("timePeriodProvidedTo"),time:!1,onChange:this.onDateChange.bind(null,"timePeriodProvidedTo")}))),l.default.createElement("p",{className:"form__help"},"The dates are used to express a range and are optional.")),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label"},"To deliver by"),l.default.createElement(y.default,{min:new Date,finalView:"decade",format:"YYYY-MM-DD",value:this.getValueForDate("deliveryTime"),time:!1,onChange:this.onDateChange.bind(null,"deliveryTime")})),l.default.createElement("div",{className:"form__group"},l.default.createElement("label",{className:"form__label",htmlFor:"task-assignee"},"Assignee"),l.default.createElement("select",{className:"form__control form__control--medium",id:"task-assignee",value:this.state.data.assigneeId,onChange:this.onFieldChange.bind(null,"assigneeId")},l.default.createElement("option",{value:""},"Not assigned"),this.props.users.users.map(function(e){return l.default.createElement("option",{value:e.userId,key:e.userId},e.name)}))),l.default.createElement("div",{className:"form__actions"},l.default.createElement("button",{type:"submit",className:"button button--primary",onClick:this.onSave},l.default.createElement("span",null,e?"Save task":"Create task")),-1!==this.props.user.profile.roles.indexOf("coordinator")?l.default.createElement("button",{type:"submit",className:"button button--secondary",onClick:this.onSaveAndAdd},l.default.createElement("span",null,e?"Save & add another":"Create & add another")):null,l.default.createElement(d.Link,{to:"requests/"+this.props.params.reqid+(e?"/tasks/"+this.props.params.taskid:""),className:"button button--base"},l.default.createElement("span",null,"Cancel")))))},render:function(){var e=!!this.props.params.taskid,t=this.props.task,a=t.fetched,r=t.fetching,s=t.error,o=t.data,i="Create Task";if(e){if(!a&&!r)return null;r&&(i="Edit Task"),o.name&&(i="Edit "+o.name)}var n=void 0,u=void 0;e&&o.requestId?(u=o.requestId,n=o.requestInfo.name):this.props.request.data._id&&(u=this.props.request.data._id,n=this.props.request.data.name);var c=e&&-1!==this.props.user.profile.roles.indexOf("coordinator");return l.default.createElement("section",{className:"section section--page"},l.default.createElement("header",{className:"section__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"section__headline"},l.default.createElement("p",{className:"section__subtitle"},l.default.createElement(d.Link,{to:"/requests/"+u},n)),l.default.createElement("h1",{className:"section__title"},i)),c?l.default.createElement("div",{className:"section__actions"},l.default.createElement("a",{href:"#",className:"button-delete",onClick:this.onDeleteClick},l.default.createElement("span",null,"Delete task"))):null)),l.default.createElement("div",{className:"section__body"},l.default.createElement("div",{className:"inner"},e&&r?l.default.createElement("p",{className:"loading-indicator"},"Loading..."):null,e&&s?l.default.createElement("p",null,"Error"):null,!e||e&&!r?this.renderFrom():null,this.props.taskForm.processing?l.default.createElement("p",null,"Submitting data..."):null)))}});t.exports=(0,u.connect)(o,i)(j)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../components/edit-map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/edit-map.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/togeojson":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/togeojson.js",lodash:"lodash",moment:"moment",react:"react","react-redux":"react-redux","react-router":"react-router","react-widgets/lib/DateTimePicker":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/DateTimePicker.js","react-widgets/lib/localizers/moment":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/localizers/moment.js",xmldom:"xmldom"}],"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/task-page.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return{task:e.task,requestTasks:e.tasks,user:e.user,mapState:e.map}}function o(e){return{_invalidateTask:function(){return e(y.invalidateTask.apply(void 0,arguments))},_fetchTask:function(){return e(y.fetchTask.apply(void 0,arguments))},_addTaskStatusUpdate:function(){return e(y.addTaskStatusUpdate.apply(void 0,arguments))},_setMapBaseLayer:function(){return e(y.setMapBaseLayer.apply(void 0,arguments))},_fetchRequestTasks:function(){return e(y.fetchRequestTasks.apply(void 0,arguments))},_invalidateTasks:function(){return e(y.invalidateTasks.apply(void 0,arguments))}}}var i=e("react"),n=r(i),l=e("react-redux"),u=e("react-router"),d=e("lodash"),c=r(d),m=e("moment"),p=r(m),f=e("react-linkify"),h=r(f),y=e("../actions"),g=e("../utils/users"),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(g),b=e("../utils/auth-service"),_=e("../utils/features"),E=e("../utils/constants"),T=e("../components/task-update-form"),w=r(T),S=e("../components/task-map"),k=r(S),j=n.default.createClass({displayName:"TaskPage",propTypes:{_invalidateTask:i.PropTypes.func,_invalidateTasks:i.PropTypes.func,_fetchTask:i.PropTypes.func,_fetchRequestTasks:i.PropTypes.func,_addTaskStatusUpdate:i.PropTypes.func,_setMapBaseLayer:i.PropTypes.func,params:i.PropTypes.object,task:i.PropTypes.object,requestTasks:i.PropTypes.object,user:i.PropTypes.object,mapState:i.PropTypes.object},componentDidMount:function(){this.props._fetchTask(this.props.params.reqid,this.props.params.taskid),this.props._fetchRequestTasks(this.props.params.reqid)},componentWillUnmount:function(){this.props._invalidateTask(),this.props._invalidateTasks()},componentWillReceiveProps:function(e){e.params.taskid!==this.props.params.taskid&&this.props._fetchTask(e.params.reqid,e.params.taskid),e.params.reqid!==this.props.params.reqid&&this.props._fetchRequestTasks(e.params.reqid),this.props.task.statusUpdate.processing&&!e.task.statusUpdate.processing&&this.props._fetchRequestTasks(this.props.params.reqid)},onTaskUpdateSubmit:function(e,t){this.props._addTaskStatusUpdate(this.props.params.reqid,this.props.params.taskid,{status:e,comment:t})},renderTaskUpdate:function(e){return n.default.createElement("li",{className:"task-updates__item",key:e._id},n.default.createElement("small",{className:"update-date"},(0,p.default)(e.created).format("YYYY/MM/DD")),n.default.createElement("p",{className:"status-indicator status-indicator--"+e.status},c.default.capitalize(e.status)),n.default.createElement("p",{className:"update-author"},"Updated by ",v.getNameFromId(e.authorId)),n.default.createElement("p",{className:"update-comment"},n.default.createElement(h.default,null,e.comment)))},renderTaskUpdatesBlock:function(){var e=this.props.task.data.updates;return n.default.createElement("div",null,n.default.createElement("section",{className:"task-updates"},n.default.createElement("h2",null,"Task Progress"),n.default.createElement(w.default,{statusUpdate:this.props.task.statusUpdate,user:this.props.user,task:this.props.task.data,onSubmit:this.onTaskUpdateSubmit}),n.default.createElement("ul",{className:"task-updates__list"},e.map(this.renderTaskUpdate))))},renderTaskMap:function(){var e=this.props.requestTasks,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(a)return n.default.createElement("p",{className:"loading-indicator"},"Loading...");if(r)return n.default.createElement("p",null,"Error");var o=(0,_.geometryToFeature)(s.results,function(e){return c.default.omit(e,["geometry","updates"])});return n.default.createElement(k.default,{mapId:"map-task-page",className:"map-container map-container--display bleed-full",results:o,selectedId:this.props.task.data._id,onBaseLayerChange:this.props._setMapBaseLayer,selectedLayer:this.props.mapState.baseLayer})},render:function(){var e=this.props.task,t=e.fetched,a=e.fetching,r=e.error,s=e.data;if(!t&&!a)return null;if(r||a)return n.default.createElement("section",{className:"section section--page"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("h1",{className:"section__title"},"Task")))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},r?n.default.createElement("p",null,"Error: ",r):null,a?n.default.createElement("p",{className:"loading-indicator"},"Loading..."):null)));var o=s.timePeriodProvided.from?(0,p.default)(s.timePeriodProvided.from).format("YYYY/MM/DD"):"n/a",i=s.timePeriodProvided.to?(0,p.default)(s.timePeriodProvided.to).format("YYYY/MM/DD"):"n/a",l=this.props.user.token,d=c.default.get(this.props.user,"profile.roles",[]),m=!1;return(0,b.isLoggedIn)(l)&&(-1!==d.indexOf("coordinator")?m=!0:-1!==d.indexOf("surveyor")&&this.props.user.profile.user_id===s.assigneeId&&(m=!0)),n.default.createElement("section",{className:"section section--page"},n.default.createElement("header",{className:"section__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"section__headline"},n.default.createElement("p",{className:"section__subtitle"},n.default.createElement(u.Link,{to:"/requests/"+s.requestId},s.requestInfo.name)),n.default.createElement("h1",{className:"section__title"},s.name)),m?n.default.createElement("div",{className:"section__actions"},n.default.createElement(u.Link,{to:"/requests/"+s.requestId+"/tasks/"+s._id+"/edit",className:"button-edit"},n.default.createElement("span",null,"Edit task"))):null,n.default.createElement("div",{className:"section__stats"},n.default.createElement("p",{className:"status-indicator status-indicator--"+s.status},E.taskStatusMatrix[s.status]),n.default.createElement("p",{className:"meta-info"},"Updated on ",(0,p.default)(s.updated).format("YYYY/MM/DD")),n.default.createElement("p",{className:"task-author"},"Created by: ",n.default.createElement("strong",null,v.getNameFromId(s.authorId))),s.assigneeId?n.default.createElement("p",{className:"task-assignee"},"Assigned to: ",n.default.createElement("strong",null,v.getNameFromId(s.assigneeId))):n.default.createElement("p",{className:"task-assignee"},"Assigned to: ",n.default.createElement("strong",null,"Not assigned"))))),n.default.createElement("div",{className:"section__body"},n.default.createElement("div",{className:"inner"},this.renderTaskMap(),n.default.createElement("div",{className:"details"},n.default.createElement("dl",null,n.default.createElement("dt",null,"Deliver by"),n.default.createElement("dd",null,s.deliveryTime?(0,p.default)(s.deliveryTime).format("YYYY/MM/DD"):"n/a"),n.default.createElement("dt",null,"Time period Provided"),n.default.createElement("dd",null,o," - ",i))),n.default.createElement("hr",null),this.renderTaskUpdatesBlock())))}});t.exports=(0,l.connect)(s,o)(j)},{"../actions":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/actions/index.js","../components/task-map":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-map.js","../components/task-update-form":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/components/task-update-form.js","../utils/auth-service":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/auth-service.js","../utils/constants":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/constants.js","../utils/features":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/features.js","../utils/users":"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/utils/users.js",lodash:"lodash",moment:"moment",react:"react","react-linkify":"react-linkify","react-redux":"react-redux","react-router":"react-router"}],
"/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/views/uhoh.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=s.default.createClass({displayName:"UhOh",render:function(){return s.default.createElement("section",{className:"section section--page"},s.default.createElement("header",{className:"section__header"},s.default.createElement("div",{className:"inner"},s.default.createElement("div",{className:"section__headline"},s.default.createElement("h1",{className:"section__title"},"Uh Oh!")))),s.default.createElement("div",{className:"section__body"},s.default.createElement("div",{className:"inner"},"You're seaching for something that doesn't exist...")))}});a.default=o},{react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/browserify/node_modules/process/browser.js":[function(e,t,a){function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(m===clearTimeout)return clearTimeout(e);if((m===s||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}function n(){y&&f&&(y=!1,f.length?h=f.concat(h):g=-1,h.length&&l())}function l(){if(!y){var e=o(n);y=!0;for(var t=h.length;t;){for(f=h,h=[];++g<t;)f&&f[g].run();g=-1,t=h.length}f=null,y=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function d(){}var c,m,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{m="function"==typeof clearTimeout?clearTimeout:s}catch(e){m=s}}();var f,h=[],y=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];h.push(new u(e,t)),1!==h.length||y||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Button.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=e("react"),d=r(u),c=e("classnames"),m=r(c),p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.disabled,r=e.label,o=e.icon,i=e.busy,n=e.active,u=e.children,c=e.component,p=void 0===c?"button":c,f=s(e,["className","disabled","label","icon","busy","active","children","component"]),h=f.type;return"button"===p&&(h=h||"button"),d.default.createElement(p,l({},f,{tabIndex:"-1",title:r,type:h,disabled:a,"aria-disabled":a,"aria-label":r,className:(0,m.default)(t,"rw-btn",n&&!a&&"rw-state-active")}),o&&d.default.createElement("span",{"aria-hidden":!0,className:(0,m.default)("rw-i","rw-i-"+o,i&&"rw-loading")}),u)},t}(d.default.Component);a.default=p,t.exports=a.default},{classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Calendar.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function o(e,t,a,r,s){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,r){return r(e,t,a)||a},o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function i(e){return e&&!isNaN(e.getTime())?e:null}function n(e){return m({moveBack:"navigate back",moveForward:"navigate forward"},e)}a.__esModule=!0;var l,u,d,c,m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p=e("react"),f=r(p),h=e("prop-types"),y=r(h),g=e("classnames"),v=r(g),b=e("./util/compat"),_=r(b),E=e("./Widget"),T=r(E),w=e("./Header"),S=r(w),k=e("./Footer"),j=r(k),x=e("./Month"),N=r(x),R=e("./Year"),D=r(R),O=e("./Decade"),P=r(O),M=e("./Century"),C=r(M),q=e("./util/localizers"),A=e("./util/propTypes"),F=r(A),L=e("uncontrollable"),I=r(L),U=e("./SlideTransition"),z=r(U),V=e("./util/dates"),Y=r(V),H=e("./util/constants"),B=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(H),K=e("./util/_"),W=r(K),Q=e("./util/widgetHelpers"),G=e("./util/interaction"),J=B.directions,Z=B.calendarViews,X=function(e){return Object.keys(e).map(function(t){return e[t]})}(Z),$=function(e){return W.default.transform(e,function(e,t,a){e[t]=a},{})}(B.calendarViewHierarchy),ee=B.calendarViewHierarchy,te=B.calendarViewUnits,ae=(l={},l[Z.MONTH]=N.default,l[Z.YEAR]=D.default,l[Z.DECADE]=P.default,l[Z.CENTURY]=C.default,l),re={ArrowDown:J.DOWN,ArrowUp:J.UP,ArrowRight:J.RIGHT,ArrowLeft:J.LEFT},se=(u={},u[J.LEFT]=J.RIGHT,u[J.RIGHT]=J.LEFT,u),oe=(d={},d[Z.YEAR]=1,d[Z.DECADE]=10,d[Z.CENTURY]=100,d),ie=function(e,t){return q.date.getFormat(t,e[t+"Format"])},ne={disabled:F.default.disabled,readOnly:F.default.readOnly,onChange:y.default.func,value:y.default.instanceOf(Date),min:y.default.instanceOf(Date),max:y.default.instanceOf(Date),currentDate:y.default.instanceOf(Date),onCurrentDateChange:y.default.func,view:y.default.oneOf(X),initialView:y.default.oneOf(X),finalView:function(e,t,a){for(var r=arguments.length,s=Array(r>3?r-3:0),o=3;o<r;o++)s[o-3]=arguments[o];var i=y.default.oneOf(X).apply(void 0,[e,t,a].concat(s));return i||(X.indexOf(e[t])<X.indexOf(e.initialView)?new Error(("The `"+t+"` prop: `"+e[t]+"` cannot be 'lower' than the `initialView`\n        prop. This creates a range that cannot be rendered.").replace(/\n\t/g,"")):void 0)},onViewChange:y.default.func,onNavigate:y.default.func,culture:y.default.string,footer:y.default.bool,dayComponent:F.default.elementType,headerFormat:F.default.dateFormat,footerFormat:F.default.dateFormat,dayFormat:F.default.dateFormat,dateFormat:F.default.dateFormat,monthFormat:F.default.dateFormat,yearFormat:F.default.dateFormat,decadeFormat:F.default.dateFormat,centuryFormat:F.default.dateFormat,messages:y.default.shape({moveBack:y.default.string,moveForward:y.default.string})},le=f.default.createClass((c={displayName:"Calendar",mixins:[e("./mixins/TimeoutMixin"),e("./mixins/AutoFocusMixin"),e("./mixins/PureRenderMixin"),e("./mixins/RtlParentContextMixin"),e("./mixins/AriaDescendantMixin")(),e("./mixins/FocusMixin")({willHandle:function(){if(-1==+this.props.tabIndex)return!1}})],propTypes:ne,getInitialState:function(){return{selectedIndex:0,view:this.props.initialView||"month"}},getDefaultProps:function(){return{value:null,min:new Date(1900,0,1),max:new Date(2099,11,31),currentDate:new Date,initialView:"month",finalView:"century",tabIndex:"0",footer:!1,ariaActiveDescendantKey:"calendar",messages:n({})}},componentWillMount:function(){this.changeCurrentDate(this.props.value)},componentWillReceiveProps:function(e){var t=X.indexOf(e.initialView),a=X.indexOf(e.finalView),r=X.indexOf(this.state.view),s=this.state.view,o=this.inRangeValue(e.value);r<t?this.setState({view:s=e.initialView}):r>a&&this.setState({view:s=e.finalView}),Y.default.eq(o,i(this.props.value),te[s])||this.changeCurrentDate(o,e.currentDate)},render:function(){var e=this,t=this.props,a=t.className,r=t.value,s=t.footerFormat,o=t.disabled,i=t.readOnly,l=t.finalView,u=t.footer,d=t.messages,c=t.min,p=t.max,h=t.culture,y=t.duration,g=t.tabIndex,b=t.currentDate,_=this.state,E=_.view,w=_.slideDirection,k=_.focused,x=ae[E],N=te[E],R=new Date,D=!Y.default.inRange(R,c,p,E);N="day"===N?"date":N;var O=(0,Q.instanceId)(this,"_calendar"),P=(0,Q.instanceId)(this,"_calendar_label"),M=E+"_"+Y.default[E](b),C=W.default.omitOwnProps(this),q=W.default.pickProps(this.props,x),A=o||i;return d=n(this.props.messages),f.default.createElement(T.default,m({},C,{role:"group",focused:k,disabled:o,readOnly:i,tabIndex:g||0,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,className:(0,v.default)(a,"rw-calendar")}),f.default.createElement(S.default,{label:this._label(),labelId:P,messages:d,upDisabled:A||E===l,prevDisabled:A||!Y.default.inRange(this.nextDate(J.LEFT),c,p,E),nextDisabled:A||!Y.default.inRange(this.nextDate(J.RIGHT),c,p,E),onViewChange:this.navigate.bind(null,J.UP,null),onMoveLeft:this.navigate.bind(null,J.LEFT,null),onMoveRight:this.navigate.bind(null,J.RIGHT,null)}),f.default.createElement(z.default,{ref:"animation",duration:y,direction:w,onAnimate:function(){return k&&e.focus()}},f.default.createElement(x,m({},q,{key:M,id:O,value:r,today:R,focused:b,onChange:this.change,onKeyDown:this.handleKeyDown,"aria-labelledby":P,ariaActiveDescendantKey:"calendarView"}))),u&&f.default.createElement(j.default,{value:R,format:s,culture:h,disabled:o||D,readOnly:i,onClick:this.select}))},navigate:function(e,t){var a=this.state.view,r=e===J.LEFT||e===J.UP?"right":"left";t||(t=-1!==[J.LEFT,J.RIGHT].indexOf(e)?this.nextDate(e):this.props.currentDate),e===J.DOWN&&(a=$[a]||a),e===J.UP&&(a=ee[a]||a),this.isValidView(a)&&Y.default.inRange(t,this.props.min,this.props.max,a)&&((0,Q.notify)(this.props.onNavigate,[t,r,a]),this.focus(!0),this.changeCurrentDate(t),this.setState({slideDirection:r,view:a}))},focus:function(){+this.props.tabIndex>-1&&_.default.findDOMNode(this).focus()},change:function(e){if(this.state.view===this.props.initialView)return this.changeCurrentDate(e),(0,Q.notify)(this.props.onChange,e),void this.focus();this.navigate(J.DOWN,e)},changeCurrentDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.currentDate,a=this.inRangeValue(e?new Date(e):t);Y.default.eq(a,i(t),te[this.state.view])||(0,Q.notify)(this.props.onCurrentDateChange,a)},select:function(e){var t=this.props.initialView,a=t!==this.state.view||Y.default.gt(e,this.state.currentDate)?"left":"right";(0,Q.notify)(this.props.onChange,e),this.isValidView(t)&&Y.default.inRange(e,this.props.min,this.props.max,t)&&(this.focus(),this.changeCurrentDate(e),this.setState({slideDirection:a,view:t}))},nextDate:function(e){var t=e===J.LEFT?"subtract":"add",a=this.state.view,r=a===Z.MONTH?a:Z.YEAR,s=oe[a]||1;return Y.default[t](this.props.currentDate,1*s,r)},handleKeyDown:function(e){var t=e.ctrlKey,a=e.key,r=re[a],s=this.props.currentDate,o=this.state.view,i=te[o],n=s;if("Enter"===a)return e.preventDefault(),this.change(s);r&&(t?(e.preventDefault(),this.navigate(r)):(this.isRtl()&&se[r]&&(r=se[r]),n=Y.default.move(n,this.props.min,this.props.max,o,r),Y.default.eq(s,n,i)||(e.preventDefault(),Y.default.gt(n,s,o)?this.navigate(J.RIGHT,n):Y.default.lt(n,s,o)?this.navigate(J.LEFT,n):this.changeCurrentDate(n)))),(0,Q.notify)(this.props.onKeyDown,[e])},_label:function(){var e=this.props,t=e.culture,a=s(e,["culture"]),r=this.state.view,o=this.props.currentDate;return"month"===r?q.date.format(o,ie(a,"header"),t):"year"===r?q.date.format(o,ie(a,"year"),t):"decade"===r?q.date.format(Y.default.startOf(o,"decade"),ie(a,"decade"),t):"century"===r?q.date.format(Y.default.startOf(o,"century"),ie(a,"century"),t):void 0},inRangeValue:function(e){var t=i(e);return null===t?t:Y.default.max(Y.default.min(t,this.props.max),this.props.min)},isValidView:function(e){var t=X.indexOf(this.props.initialView),a=X.indexOf(this.props.finalView),r=X.indexOf(e);return r>=t&&r<=a}},o(c,"navigate",[G.widgetEditable],Object.getOwnPropertyDescriptor(c,"navigate"),c),o(c,"change",[G.widgetEditable],Object.getOwnPropertyDescriptor(c,"change"),c),o(c,"select",[G.widgetEditable],Object.getOwnPropertyDescriptor(c,"select"),c),o(c,"handleKeyDown",[G.widgetEditable],Object.getOwnPropertyDescriptor(c,"handleKeyDown"),c),c));a.default=(0,I.default)(le,{value:"onChange",currentDate:"onCurrentDateChange",view:"onViewChange"},["focus"]),t.exports=a.default},{"./Century":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Century.js","./Decade":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Decade.js","./Footer":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Footer.js","./Header":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Header.js","./Month":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Month.js","./SlideTransition":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/SlideTransition.js","./Widget":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Widget.js","./Year":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Year.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/AutoFocusMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AutoFocusMixin.js","./mixins/FocusMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/FocusMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlParentContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/constants":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/constants.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/interaction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react",uncontrollable:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/CalendarView.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t,a){return v.default.max(v.default.min(e,a),t)}a.__esModule=!0;var l,u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=e("react"),m=r(c),p=e("prop-types"),f=r(p),h=e("classnames"),y=r(h),g=e("./util/dates"),v=r(g),b=["month","year","decade","century"],_=function(e){function t(){return s(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this.props.className;return m.default.createElement("table",d({},this.props,{role:"grid",tabIndex:"-1",className:(0,y.default)(e,"rw-nav-view","rw-calendar-grid")}))},t}(m.default.Component),E=(u=l=function(e){function t(){var a,r,i;s(this,t);for(var l=arguments.length,u=Array(l),d=0;d<l;d++)u[d]=arguments[d];return a=r=o(this,e.call.apply(e,[this].concat(u))),r.handleChange=function(){var e=r.props,t=e.onChange,a=e.min,s=e.max;t(n(e.date,a,s))},i=a,o(r,i)}return i(t,e),t.prototype.isEqual=function(e){return v.default.eq(this.props.date,e,this.props.unit)},t.prototype.isEmpty=function(){var e=this.props,t=e.unit,a=e.min,r=e.max,s=e.date;return!v.default.inRange(s,a,r,t)},t.prototype.isNow=function(){return this.isEqual(this.props.now)},t.prototype.isFocused=function(){return this.isEqual(this.props.focused)},t.prototype.isSelected=function(){return this.isEqual(this.props.selected)},t.prototype.isOffView=function(){var e=this.props,t=e.viewUnit,a=e.focused,r=e.date;return t&&v.default[t](r)!==v.default[t](a)},t.prototype.render=function(){var e=this.props,t=e.children,a=e.id,r=e.label,s=e.disabled;return this.isEmpty()?m.default.createElement("td",{className:"rw-empty-cell",role:"presentation"},""):m.default.createElement("td",{role:"gridcell",id:a,title:r,"aria-label":r,"aria-readonly":s,"aria-selected":this.isSelected()},m.default.createElement("span",{"aria-labelledby":a,onClick:this.handleChange,className:(0,y.default)("rw-btn",this.isNow()&&"rw-now",this.isOffView()&&"rw-off-range",this.isFocused()&&"rw-state-focus",this.isSelected()&&"rw-state-selected")},t))},t}(m.default.Component),l.propTypes={id:f.default.string,label:f.default.string,today:f.default.instanceOf(Date),selected:f.default.instanceOf(Date),focused:f.default.instanceOf(Date),min:f.default.instanceOf(Date),max:f.default.instanceOf(Date),unit:f.default.oneOf(["day"].concat(b)),viewUnit:f.default.oneOf(b),onChange:f.default.func.isRequired},u);_.Row=function(e){return m.default.createElement("tr",d({role:"row"},e))},_.Cell=E,a.default=_,t.exports=a.default},{"./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js",classnames:"classnames","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Century.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],a=m.default.add(m.default.startOf(e,"century"),-20,"year");return t.map(function(){return a=m.default.add(a,10,"year")})}a.__esModule=!0;var o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("./CalendarView"),d=r(u),c=e("./util/dates"),m=r(c),p=e("./util/localizers"),f=e("./util/_"),h=r(f),y=e("./util/propTypes"),g=r(y),v=e("./util/widgetHelpers"),b=function(e){return p.date.getFormat("decade",e.decadeFormat)},_=function(e,t){return e+"__century_"+m.default.year(t)},E={culture:l.default.string,today:l.default.instanceOf(Date),value:l.default.instanceOf(Date),focused:l.default.instanceOf(Date),min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),onChange:l.default.func.isRequired,decadeFormat:g.default.dateFormat};a.default=i.default.createClass({displayName:"CenturyView",mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:E,componentDidUpdate:function(){var e=_((0,v.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused;return i.default.createElement(d.default,h.default.omitOwnProps(this),i.default.createElement("tbody",null,h.default.chunk(s(e),4).map(this.renderRow)))},renderRow:function(e,t){var a=this,r=this.props,s=r.focused,o=r.disabled,n=r.onChange,l=r.value,u=r.today,c=r.culture,f=r.min,h=r.max,y=(0,v.instanceId)(this,"_century");return i.default.createElement(d.default.Row,{key:t},e.map(function(e,t){var r=p.date.format(m.default.startOf(e,"decade"),b(a.props),c);return i.default.createElement(d.default.Cell,{key:t,unit:"decade",id:_(y,e),label:r,date:e,now:u,min:f,max:h,onChange:n,focused:s,selected:l,disabled:o},r)}))}}),t.exports=a.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/DateTimePicker.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,r,s){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,r){return r(e,t,a)||a},o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function o(e){var t=null==e[N.datePopups.CALENDAR]||e.calendar,a=null==e[N.datePopups.TIME]||e.time;return e.format?e.format:t&&a||!t&&!a?x.date.getFormat("default"):x.date.getFormat(t?"date":"time")}function i(e,t,a){var r="";return e instanceof Date&&!isNaN(e.getTime())&&(r=x.date.format(e,t,a)),r}function n(e,t,a){for(var r,s=0;s<e.length;s++)if(r=x.date.parse(a,e[s],t))return r;return null}function l(e){return e&&!isNaN(e.getTime())?e:null}a.__esModule=!0;var u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=e("react"),m=r(c),p=e("prop-types"),f=r(p),h=e("invariant"),y=r(h),g=e("dom-helpers/activeElement"),v=r(g),b=e("classnames"),_=r(b),E=e("./util/compat"),T=r(E),w=e("./util/_"),S=r(w),k=e("./util/dates"),j=r(k),x=e("./util/localizers"),N=e("./util/constants"),R=e("./Widget"),D=r(R),O=e("./Popup"),P=r(O),M=e("./Calendar"),C=r(M),q=e("./TimeList"),A=r(q),F=e("./DateTimePickerInput"),L=r(F),I=e("./Button"),U=r(I),z=e("./util/propTypes"),V=r(z),Y=e("uncontrollable"),H=r(Y),B=e("./util/interaction"),K=e("./util/widgetHelpers"),W=C.default.ControlledComponent,Q=Object.keys(N.calendarViews).map(function(e){return N.calendarViews[e]}),G=d({},W.propTypes,{value:f.default.instanceOf(Date),onChange:f.default.func,open:f.default.oneOf([!1,N.datePopups.TIME,N.datePopups.CALENDAR]),onToggle:f.default.func,currentDate:f.default.instanceOf(Date),onCurrentDateChange:f.default.func,onSelect:f.default.func,min:f.default.instanceOf(Date),max:f.default.instanceOf(Date),culture:f.default.string,format:V.default.dateFormat,timeFormat:V.default.dateFormat,editFormat:V.default.dateFormat,calendar:f.default.bool,time:f.default.bool,timeComponent:V.default.elementType,dropUp:f.default.bool,duration:f.default.number,placeholder:f.default.string,name:f.default.string,initialView:f.default.oneOf(Q),finalView:f.default.oneOf(Q),autoFocus:f.default.bool,disabled:V.default.disabled,readOnly:V.default.readOnly,parse:f.default.oneOfType([f.default.arrayOf(f.default.string),f.default.string,f.default.func]),"aria-labelledby":f.default.string,messages:f.default.shape({calendarButton:f.default.string,timeButton:f.default.string})}),J=m.default.createClass((u={displayName:"DateTimePicker",mixins:[e("./mixins/TimeoutMixin"),e("./mixins/PureRenderMixin"),e("./mixins/PopupScrollToMixin"),e("./mixins/RtlParentContextMixin"),e("./mixins/FocusMixin")({didHandle:function(e){e||this.close()}}),e("./mixins/AriaDescendantMixin")("valueInput",function(e,t){var a=this.props.open,r=this.ariaActiveDescendant(),s=a===N.datePopups.CALENDAR&&"calendar"===e,o=a===N.datePopups.TIME&&"timelist"===e;if(!r||o||s)return t})],propTypes:G,getInitialState:function(){return{focused:!1}},getDefaultProps:function(){return{value:null,currentDate:new Date,min:new Date(1900,0,1),max:new Date(2099,11,31),calendar:!0,time:!0,open:!1,footer:!0,messages:{calendarButton:"Select Date",timeButton:"Select Time"},ariaActiveDescendantKey:"dropdownlist"}},renderInput:function(e,t){var a=this.props,r=a.open,s=a.value,i=a.editFormat,n=a.culture,l=a.busy,u=a.placeholder,d=a.disabled,c=a.readOnly,p=a.name,f=a.tabIndex,h=a.autoFocus,y=a["aria-labelledby"],g=a["aria-describedby"],v=this.state.focused;return m.default.createElement(L.default,{id:e,ref:"valueInput",role:"combobox",name:p,tabIndex:f,autoFocus:h,placeholder:u,disabled:d,readOnly:c,value:s,format:o(this.props),editFormat:i,editing:v,culture:n,parse:this._parse,onChange:this.handleChange,"aria-haspopup":!0,"aria-labelledby":y,"aria-describedby":g,"aria-expanded":!!r,"aria-busy":!!l,"aria-owns":t})},renderButtons:function(e){var t=this.props,a=t.calendar,r=t.time,s=t.disabled,o=t.readOnly;return a||r?m.default.createElement("span",{className:"rw-select"},a&&m.default.createElement(U.default,{icon:"calendar",className:"rw-btn-calendar",label:e.calendarButton,disabled:!(!s&&!o),onClick:this._click.bind(null,N.datePopups.CALENDAR)}),r&&m.default.createElement(U.default,{icon:"clock-o",className:"rw-btn-time",label:e.timeButton,disabled:!(!s&&!o),onClick:this._click.bind(null,N.datePopups.TIME)})):null},renderCalendar:function(e,t){var a=this,r=this.props,s=r.open,o=r.value,i=r.duration,n=r.dropUp,l=S.default.pickProps(this.props,W);return m.default.createElement(P.default,{dropUp:n,duration:i,open:s===N.datePopups.CALENDAR,className:"rw-calendar-popup"},m.default.createElement(W,d({},l,{ref:"calPopup",id:e,tabIndex:"-1",value:o,autoFocus:!1,onChange:this.handleDateSelect,onNavigate:function(){return a.focus()},currentDate:this.props.currentDate,onCurrentDateChange:this.props.onCurrentDateChange,"aria-hidden":!s,"aria-live":"polite","aria-labelledby":t,ariaActiveDescendantKey:"calendar"})))},renderTimeList:function(e,t){var a=this,r=this.props,s=r.open,o=r.value,i=r.duration,n=r.dropUp,u=r.calendar,c=r.timeFormat,p=r.timeComponent,f=S.default.pickProps(this.props,A.default);return m.default.createElement(P.default,{dropUp:n,duration:i,open:s===N.datePopups.TIME,onOpening:function(){return a.refs.timePopup.forceUpdate()}},m.default.createElement("div",null,m.default.createElement(A.default,d({},f,{ref:"timePopup",id:e,format:c,value:l(o),onMove:this._scrollTo,onSelect:this.handleTimeSelect,preserveDate:!!u,itemComponent:p,"aria-labelledby":t,"aria-live":s&&"polite","aria-hidden":!s,ariaActiveDescendantKey:"timelist"}))))},render:function(){var e=this.props,t=e.className,a=e.calendar,r=e.time,s=e.open,o=e.messages,i=e.disabled,n=e.readOnly,l=e.dropUp,u=this.state.focused,c=(0,K.instanceId)(this,"_input"),p=(0,K.instanceId)(this,"_time_listbox"),f=(0,K.instanceId)(this,"_cal"),h="",y=S.default.omitOwnProps(this,W,A.default),g=s||(0,K.isFirstFocusedRender)(this);return a&&(h+=f),r&&(h+=" "+p),m.default.createElement(D.default,d({},y,{open:!!s,dropUp:l,focused:u,disabled:i,readOnly:n,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,className:(0,_.default)(t,"rw-datetimepicker",a&&r&&"rw-has-both",!a&&!r&&"rw-has-neither")}),this.renderInput(c,h.trim()),this.renderButtons(o),g&&this.renderTimeList(p,c),g&&this.renderCalendar(f,c))},handleChange:function(e,t,a){var r=this.props,s=r.onChange,o=r.value;a&&(e=this.inRangeValue(e)),s&&(null==e||null==o?e!=o&&s(e,t):j.default.eq(e,o)||s(e,t))},handleKeyDown:function(e){var t=this.props,a=t.open,r=t.calendar,s=t.time;(0,K.notify)(this.props.onKeyDown,[e]),e.defaultPrevented||("Escape"===e.key&&a?this.close():e.altKey?(e.preventDefault(),"ArrowDown"===e.key?r&&s?this.open(a===N.datePopups.CALENDAR?N.datePopups.TIME:N.datePopups.CALENDAR):s?this.open(N.datePopups.TIME):r&&this.open(N.datePopups.CALENDAR):"ArrowUp"===e.key&&this.close()):a&&(a===N.datePopups.CALENDAR&&this.refs.calPopup.handleKeyDown(e),a===N.datePopups.TIME&&this.refs.timePopup.handleKeyDown(e)))},handleKeyPress:function(e){(0,K.notify)(this.props.onKeyPress,[e]),e.defaultPrevented||this.props.open===N.datePopups.TIME&&this.refs.timePopup.handleKeyPress(e)},focus:function(){var e=this.refs.valueInput;e&&(0,v.default)()!==T.default.findDOMNode(e)&&e.focus()},handleDateSelect:function(e){var t=o(this.props),a=j.default.merge(e,this.props.value,this.props.currentDate),r=i(e,t,this.props.culture);this.close(),(0,K.notify)(this.props.onSelect,[a,r]),this.handleChange(a,r,!0),this.focus()},handleTimeSelect:function(e){var t=o(this.props),a=j.default.merge(this.props.value,e.date,this.props.currentDate),r=i(e.date,t,this.props.culture);this.close(),(0,K.notify)(this.props.onSelect,[a,r]),this.handleChange(a,r,!0),this.focus()},_click:function(e,t){this.focus(),this.toggle(e,t)},_parse:function(e){var t=o(this.props),a=this.props.editFormat,r=this.props.parse,s=[];return"function"==typeof r?r(e,this.props.culture):("string"==typeof t&&s.push(t),"string"==typeof a&&s.push(a),r&&(s=s.concat(this.props.parse)),(0,y.default)(s.length,"React Widgets: there are no specified `parse` formats provided and the `format` prop is a function. the DateTimePicker is unable to parse `%s` into a dateTime, please provide either a parse function or Globalize.js compatible string for `format`",e),n(s,this.props.culture,e))},toggle:function(e){
this.props.open?this.props.open!==e?this.open(e):this.close(e):this.open(e)},open:function(e){this.props.open!==e&&!0===this.props[e]&&(0,K.notify)(this.props.onToggle,e)},close:function(){this.props.open&&(0,K.notify)(this.props.onToggle,!1)},inRangeValue:function(e){return null==e?e:j.default.max(j.default.min(e,this.props.max),this.props.min)}},s(u,"handleChange",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleChange"),u),s(u,"handleKeyDown",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleKeyDown"),u),s(u,"handleKeyPress",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleKeyPress"),u),s(u,"handleDateSelect",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleDateSelect"),u),s(u,"handleTimeSelect",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"handleTimeSelect"),u),s(u,"_click",[B.widgetEditable],Object.getOwnPropertyDescriptor(u,"_click"),u),u));a.default=(0,H.default)(J,{open:"onToggle",value:"onChange",currentDate:"onCurrentDateChange"},["focus"]),t.exports=a.default},{"./Button":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Button.js","./Calendar":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Calendar.js","./DateTimePickerInput":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/DateTimePickerInput.js","./Popup":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Popup.js","./TimeList":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/TimeList.js","./Widget":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Widget.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/FocusMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/FocusMixin.js","./mixins/PopupScrollToMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PopupScrollToMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlParentContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/constants":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/constants.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/interaction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames","dom-helpers/activeElement":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/activeElement.js",invariant:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/invariant/browser.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react",uncontrollable:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/DateTimePickerInput.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return!isNaN(e.getTime())}function o(e,t,a){var r="";return e instanceof Date&&s(e)&&(r=g.date.format(e,t,a)),r}a.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=e("react"),l=r(n),u=e("prop-types"),d=r(u),c=e("./util/_"),m=r(c),p=e("./Input"),f=r(p),h=e("./util/compat"),y=r(h),g=e("./util/localizers"),v=e("./util/propTypes"),b=r(v);a.default=l.default.createClass({displayName:"DateTimePickerInput",propTypes:{format:b.default.dateFormat.isRequired,editing:d.default.bool,editFormat:b.default.dateFormat,parse:d.default.func.isRequired,value:d.default.instanceOf(Date),onChange:d.default.func.isRequired,culture:d.default.string},componentWillReceiveProps:function(e){var t=e.value,a=e.editing,r=e.editFormat,s=e.format,i=e.culture;this.setState({textValue:o(t,a&&r?r:s,i)})},getInitialState:function(){var e=this.props,t=e.value,a=e.editing,r=e.editFormat,s=e.format,i=e.culture;return{textValue:o(t,a&&r?r:s,i)}},render:function(){var e=this.props,t=e.disabled,a=e.readOnly,r=this.state.textValue,s=m.default.omitOwnProps(this);return l.default.createElement(f.default,i({},s,{type:"text",value:r,disabled:t,readOnly:a,onChange:this.handleChange,onBlur:this.handleBlur}))},handleChange:function(e){var t=e.target.value;this._needsFlush=!0,this.setState({textValue:t})},handleBlur:function(e){var t=this.props,a=t.format,r=t.culture,s=t.parse,i=t.onChange,n=t.onBlur;if(n&&n(e),this._needsFlush){var l=s(e.target.value);this._needsFlush=!1,i(l,o(l,a,r))}},focus:function(){y.default.findDOMNode(this).focus()}}),t.exports=a.default},{"./Input":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Input.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Decade.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=[1,2,3,4,5,6,7,8,9,10,11,12],a=m.default.add(m.default.startOf(e,"decade"),-2,"year");return t.map(function(){return a=m.default.add(a,1,"year")})}a.__esModule=!0;var o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("./CalendarView"),d=r(u),c=e("./util/dates"),m=r(c),p=e("./util/localizers"),f=e("./util/_"),h=r(f),y=e("./util/propTypes"),g=r(y),v=e("./util/widgetHelpers"),b={culture:l.default.string,today:l.default.instanceOf(Date),value:l.default.instanceOf(Date),focused:l.default.instanceOf(Date),min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),onChange:l.default.func.isRequired,yearFormat:g.default.dateFormat},_=function(e,t){return e+"__decade_"+m.default.year(t)};a.default=i.default.createClass({displayName:"DecadeView",mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:b,componentDidUpdate:function(){var e=_((0,v.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused;return i.default.createElement(d.default,h.default.omitOwnProps(this),i.default.createElement("tbody",null,h.default.chunk(s(e),4).map(this.renderRow)))},renderRow:function(e,t){var a=this.props,r=a.focused,s=a.disabled,o=a.onChange,n=a.yearFormat,l=a.value,u=a.today,c=a.culture,m=a.min,f=a.max,h=(0,v.instanceId)(this);return i.default.createElement(d.default.Row,{key:t},e.map(function(e,t){var a=p.date.format(e,p.date.getFormat("year",n),c);return i.default.createElement(d.default.Cell,{key:t,unit:"year",id:_(h,e),label:a,date:e,now:u,min:m,max:f,onChange:o,focused:r,selected:l,disabled:s},a)}))}}),t.exports=a.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Footer.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("./Button"),n=r(i),l=e("./util/localizers"),u=function(e){return l.date.getFormat("footer",e.format)};t.exports=o.default.createClass({displayName:"Footer",render:function(){var e=this.props,t=e.disabled,a=e.readOnly,r=e.value;return o.default.createElement("div",{className:"rw-footer"},o.default.createElement(n.default,{disabled:!(!t&&!a),onClick:this.props.onClick.bind(null,r)},l.date.format(r,u(this.props),this.props.culture)))}})},{"./Button":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Button.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Header.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=e("react"),o=r(s),i=e("prop-types"),n=r(i),l=e("./Button"),u=r(l);a.default=o.default.createClass({displayName:"Header",propTypes:{label:n.default.string.isRequired,labelId:n.default.string,upDisabled:n.default.bool.isRequired,prevDisabled:n.default.bool.isRequired,nextDisabled:n.default.bool.isRequired,onViewChange:n.default.func.isRequired,onMoveLeft:n.default.func.isRequired,onMoveRight:n.default.func.isRequired,messages:n.default.shape({moveBack:n.default.string,moveForward:n.default.string})},mixins:[e("./mixins/PureRenderMixin"),e("./mixins/RtlChildContextMixin")],getDefaultProps:function(){return{messages:{moveBack:"navigate back",moveForward:"navigate forward"}}},render:function(){var e=this.props,t=e.messages,a=e.label,r=e.labelId,s=e.onMoveRight,i=e.onMoveLeft,n=e.onViewChange,l=e.prevDisabled,d=e.upDisabled,c=e.nextDisabled,m=this.isRtl();return o.default.createElement("div",{className:"rw-header"},o.default.createElement(u.default,{className:"rw-btn-left",onClick:i,disabled:l,label:t.moveBack,icon:"caret-"+(m?"right":"left")}),o.default.createElement(u.default,{id:r,onClick:n,className:"rw-btn-view",disabled:d,"aria-live":"polite","aria-atomic":"true"},a),o.default.createElement(u.default,{className:"rw-btn-right",onClick:s,disabled:c,label:t.moveForward,icon:"caret-"+(m?"left":"right")}))}}),t.exports=a.default},{"./Button":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Button.js","./mixins/PureRenderMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Input.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=e("react"),d=r(u),c=e("classnames"),m=r(c),p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.disabled,r=e.readOnly,o=e.value,i=e.tabIndex,n=e.component,u=void 0===n?"input":n,c=s(e,["className","disabled","readOnly","value","tabIndex","component"]);return d.default.createElement(u,l({},c,{type:"text",tabIndex:i||0,autoComplete:"off",disabled:a,readOnly:r,"aria-disabled":a,"aria-readonly":r,value:null==o?"":o,className:(0,m.default)(t,"rw-input")}))},t}(d.default.Component);a.default=p,t.exports=a.default},{classnames:"classnames",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/List.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("./ListOption"),d=r(u),c=e("./util/propTypes"),m=r(c),p=e("./util/compat"),f=r(p),h=e("classnames"),y=r(h),g=e("./util/_"),v=r(g),b=e("./util/dataHelpers"),_=e("./util/widgetHelpers"),E=e("./util/interaction"),T=function(e,t){return e+"__option__"+t};a.default=i.default.createClass({displayName:"List",mixins:[e("./mixins/ListMovementMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:{data:l.default.array,onSelect:l.default.func,onMove:l.default.func,optionComponent:m.default.elementType,itemComponent:m.default.elementType,selected:l.default.any,focused:l.default.any,valueField:m.default.accessor,textField:m.default.accessor,disabled:m.default.disabled.acceptsArray,readOnly:m.default.readOnly.acceptsArray,messages:l.default.shape({emptyList:m.default.message})},getDefaultProps:function(){return{onSelect:function(){},optionComponent:d.default,ariaActiveDescendantKey:"list",data:[],messages:{emptyList:"There are no items in this list"}}},componentDidMount:function(){this.move()},componentDidUpdate:function(){var e=this.props,t=e.data,a=e.focused,r=t.indexOf(a),s=T((0,_.instanceId)(this),r);this.ariaActiveDescendant(-1!==r?s:null),this.move()},render:function(){var e=this,t=this.props,a=t.className,r=t.role,o=t.data,n=t.textField,l=t.valueField,u=t.focused,d=t.selected,c=t.messages,m=t.onSelect,p=t.itemComponent,f=t.optionComponent,h=(0,_.instanceId)(this),g=void 0,w=v.default.omitOwnProps(this);return g=o.length?o.map(function(t,a){var r=T(h,a),s=(0,E.isDisabledItem)(t,e.props),o=(0,E.isReadOnlyItem)(t,e.props);return i.default.createElement(f,{key:"item_"+a,id:r,dataItem:t,disabled:s,readOnly:o,focused:u===t,selected:d===t,onClick:s||o?void 0:m.bind(null,t)},p?i.default.createElement(p,{item:t,value:(0,b.dataValue)(t,l),text:(0,b.dataText)(t,n),disabled:s,readOnly:o}):(0,b.dataText)(t,n))}):i.default.createElement("li",{className:"rw-list-empty"},v.default.result(c.emptyList,this.props)),i.default.createElement("ul",s({id:h,tabIndex:"-1",className:(0,y.default)(a,"rw-list"),role:void 0===r?"listbox":r},w),g)},_data:function(){return this.props.data},move:function(){var e=f.default.findDOMNode(this),t=this._data().indexOf(this.props.focused),a=e.children[t];a&&(0,_.notify)(this.props.onMove,[a,e,this.props.focused])}}),t.exports=a.default},{"./ListOption":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/ListOption.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/ListMovementMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/ListMovementMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/dataHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dataHelpers.js","./util/interaction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js",classnames:"classnames","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/ListOption.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("classnames"),d=r(u),c=e("./util/_"),m=r(c),p=i.default.createClass({displayName:"ListOption",propTypes:{dataItem:l.default.any,focused:l.default.bool,selected:l.default.bool,disabled:l.default.bool,readOnly:l.default.bool},render:function(){var e=this.props,t=e.className,a=e.children,r=e.focused,o=e.selected,n=e.disabled,l=e.readOnly,u=m.default.omitOwnProps(this),c={"rw-state-focus":r,"rw-state-selected":o,"rw-state-disabled":n,"rw-state-readonly":l};return i.default.createElement("li",s({role:"option",tabIndex:n||l?void 0:"-1","aria-selected":!!o,className:(0,d.default)("rw-list-option",t,c)},u),a)}});a.default=p,t.exports=a.default},{"./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js",classnames:"classnames","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Month.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=e("react"),o=r(s),i=e("prop-types"),n=r(i),l=e("./CalendarView"),u=r(l),d=e("./util/dates"),c=r(d),m=e("./util/localizers"),p=e("./util/propTypes"),f=r(p),h=e("./util/_"),y=r(h),g=e("./util/widgetHelpers"),v=function(e){return m.date.getFormat("weekday",e.dayFormat)},b=function(e){return m.date.getFormat("dayOfMonth",e.dateFormat)},_=function(e,t){return e+"__month_"+c.default.month(t)+"-"+c.default.date(t)},E={culture:n.default.string,today:n.default.instanceOf(Date),value:n.default.instanceOf(Date),focused:n.default.instanceOf(Date),min:n.default.instanceOf(Date),max:n.default.instanceOf(Date),onChange:n.default.func.isRequired,dayComponent:f.default.elementType,dayFormat:f.default.dateFormat,dateFormat:f.default.dateFormat},T=function(e,t){return c.default.eq(e,t,"day")},w=o.default.createClass({displayName:"MonthView",statics:{isEqual:T},mixins:[e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:E,componentDidUpdate:function(){var e=_((0,g.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e,null)},render:function(){var e=this.props,t=e.focused,a=e.culture,r=c.default.visibleDays(t,a),s=y.default.chunk(r,7);return o.default.createElement(u.default,y.default.omitOwnProps(this),o.default.createElement("thead",null,o.default.createElement("tr",null,this.renderHeaders(s[0],v(this.props),a))),o.default.createElement("tbody",null,s.map(this.renderRow)))},renderRow:function(e,t){var a=this,r=this.props,s=r.focused,i=r.today,n=r.disabled,l=r.onChange,d=r.value,c=r.culture,p=r.min,f=r.max,h=r.dayComponent,y=(0,g.instanceId)(this),v=m.date.getFormat("footer");return o.default.createElement(u.default.Row,{key:t},e.map(function(e,t){var r=m.date.format(e,b(a.props),c),g=m.date.format(e,v,c);return o.default.createElement(u.default.Cell,{key:t,id:_(y,e),label:g,date:e,now:i,min:p,max:f,unit:"day",viewUnit:"month",onChange:l,focused:s,selected:d,disabled:n},h?o.default.createElement(h,{date:e,label:r}):r)}))},renderHeaders:function(e,t,a){return e.map(function(e){return o.default.createElement("th",{key:"header_"+c.default.weekday(e,void 0,m.date.startOfWeek(a))},m.date.format(e,t,a))})}});a.default=w,t.exports=a.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Popup.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a,r,s=_.default.animate.TRANSLATION_MAP;return s&&s[e]?(a={},a[k]=s[e]+"("+t+")",a):(r={},r[e]=t,r)}function o(e){var t=u.default.Children.map(e,function(e){return e});for(var a in t)return a}a.__esModule=!0;var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=e("react"),u=r(l),d=e("prop-types"),c=r(d),m=e("./util/_"),p=(r(m),e("dom-helpers/style")),f=r(p),h=e("dom-helpers/query/height"),y=r(h),g=e("dom-helpers/util/camelizeStyle"),v=r(g),b=e("./util/configuration"),_=r(b),E=e("classnames"),T=r(E),w=e("./util/compat"),S=r(w),k=(0,v.default)(_.default.animate.transform),j=(i={},i[1]="hidden",i[0]="hidden",i[2]="hidden",i),x={open:c.default.bool,dropUp:c.default.bool,duration:c.default.number,onClosing:c.default.func,onOpening:c.default.func,onClose:c.default.func,onOpen:c.default.func};a.default=u.default.createClass({displayName:"Popup",propTypes:x,getInitialState:function(){return{initialRender:!0,status:this.props.open?2:1}},getDefaultProps:function(){return{duration:200,open:!1,onClosing:function(){},onOpening:function(){},onClose:function(){},onOpen:function(){}}},componentWillReceiveProps:function(e){this.setState({contentChanged:o(e.children)!==o(this.props.children)})},componentDidMount:function(){var e=this,t=2===this.state.status;S.default.batchedUpdates(function(){e.setState({initialRender:!1}),t&&e.open()})},componentDidUpdate:function(e){var t=e.open&&!this.props.open,a=!e.open&&this.props.open,r=this.props.open,s=this.state.status;if(!!e.dropUp!=!!this.props.dropUp)return this.cancelNextCallback(),2===s&&this.open(),void(0===s&&this.close());if(a)this.open();else if(t)this.close();else if(r){var o=this.height(),i=Math.abs(o-this.state.height);(isNaN(i)||i>.1)&&this.setState({height:o})}},render:function(){var e=this.props,t=e.className,a=e.dropUp,r=e.style,s=this.state,o=s.status,i=s.height,l=j[o]||"visible",d=1===o?"none":"block";return u.default.createElement("div",{style:n({display:d,overflow:l,height:i},r),className:(0,T.default)(t,"rw-popup-container",a&&"rw-dropup",this.isTransitioning()&&"rw-popup-animating")},this.renderChildren())},renderChildren:function(){if(!this.props.children)return u.default.createElement("span",{className:"rw-popup rw-widget"});var e=this.getOffsetForStatus(this.state.status),t=u.default.Children.only(this.props.children);return(0,l.cloneElement)(t,{style:n({},t.props.style,e,{position:this.isTransitioning()?"absolute":void 0}),className:(0,T.default)(t.props.className,"rw-popup rw-widget")})},open:function(){var e=this;this.cancelNextCallback();var t=S.default.findDOMNode(this).firstChild,a=this.height();this.props.onOpening(),this.safeSetState({status:2,height:a},function(){var a=e.getOffsetForStatus(3),r=e.props.duration;e.animate(t,a,r,"ease",function(){e.safeSetState({status:3},function(){e.props.onOpen()})})})},close:function(){var e=this;this.cancelNextCallback();var t=S.default.findDOMNode(this).firstChild,a=this.height();this.props.onClosing(),this.safeSetState({status:0,height:a},function(){var a=e.getOffsetForStatus(1),r=e.props.duration;e.animate(t,a,r,"ease",function(){return e.safeSetState({status:1},function(){e.props.onClose()})})})},getOffsetForStatus:function(e){var t;if(this.state.initialRender)return{};var a=s("top",this.props.dropUp?"100%":"-100%"),r=s("top",0);return(t={},t[1]=a,t[0]=r,t[2]=a,t[3]=r,t)[e]||{}},height:function(){var e=S.default.findDOMNode(this),t=e.firstChild,a=parseInt((0,f.default)(t,"margin-top"),10)+parseInt((0,f.default)(t,"margin-bottom"),10),r=e.style.display,s=void 0;return e.style.display="block",s=((0,y.default)(t)||0)+(isNaN(a)?0:a),e.style.display=r,s},isTransitioning:function(){return 2===this.state.status||1===this.state.status},animate:function(e,t,a,r,s){this._transition=_.default.animate(e,t,a,r,this.setNextCallback(s))},cancelNextCallback:function(){this._transition&&this._transition.cancel&&(this._transition.cancel(),this._transition=null),this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},safeSetState:function(e,t){this.setState(e,this.setNextCallback(t))},setNextCallback:function(e){var t=this,a=!0;return this.nextCallback=function(r){a&&(a=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){return a=!1},this.nextCallback}}),t.exports=a.default},{"./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/configuration":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/configuration.js",classnames:"classnames","dom-helpers/query/height":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/height.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","dom-helpers/util/camelizeStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/ReplaceTransitionGroup.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return n.default.Children.only(e)}function o(e){return e&&e.key}a.__esModule=!0;var i=e("react"),n=r(i),l=e("prop-types"),u=r(l),d=e("dom-helpers/style"),c=r(d),m=e("dom-helpers/query/height"),p=r(m),f=e("dom-helpers/query/width"),h=r(f),y=e("./util/compat"),g=r(y),v=e("./util/_"),b=r(v);a.default=n.default.createClass({displayName:"ReplaceTransitionGroup",propTypes:{component:u.default.oneOfType([u.default.element,u.default.string]),childFactory:u.default.func,onAnimating:u.default.func,onAnimate:u.default.func},getDefaultProps:function(){return{component:"span",childFactory:function(e){return e},onAnimating:b.default.noop,onAnimate:b.default.noop}},getInitialState:function(){return{children:b.default.splat(this.props.children)}},componentWillReceiveProps:function(e){var t=s(e.children),a=this.state.children.slice(),r=a[1],i=a[0],n=i&&o(i)===o(t),l=r&&o(r)===o(t);i?!i||r||n?i&&r&&!n&&!l?(a.shift(),a.push(t),this.leaving=r,this.entering=t):n?a.splice(0,1,t):l&&a.splice(1,1,t):(a.push(t),this.leaving=i,this.entering=t):(a.push(t),this.entering=t),this.state.children[0]===a[0]&&this.state.children[1]===a[1]||this.setState({children:a})},componentWillMount:function(){this.animatingKeys={},this.leaving=null,this.entering=null},componentDidUpdate:function(){var e=this.entering,t=this.leaving,a=this.refs[o(e)||o(t)],r=g.default.findDOMNode(this),s=a&&g.default.findDOMNode(a);s&&(0,c.default)(r,{overflow:"hidden",height:(0,p.default)(s)+"px",width:(0,h.default)(s)+"px"}),this.props.onAnimating(),this.entering=null,this.leaving=null,e&&this.performEnter(o(e)),t&&this.performLeave(o(t))},performEnter:function(e){var t=this.refs[e];t&&(this.animatingKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e))},_tryFinish:function(){this.isTransitioning()||(this.isMounted()&&(0,c.default)(g.default.findDOMNode(this),{overflow:"visible",height:"",width:""}),this.props.onAnimate())},_handleDoneEntering:function(e){var t=this.refs[e];t&&t.componentDidEnter&&t.componentDidEnter(),delete this.animatingKeys[e],o(this.props.children)!==e&&this.performLeave(e),this._tryFinish()},performLeave:function(e){var t=this.refs[e];t&&(this.animatingKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e))},_handleDoneLeaving:function(e){var t=this.refs[e];t&&t.componentDidLeave&&t.componentDidLeave(),delete this.animatingKeys[e],o(this.props.children)===e?this.performEnter(e):this.isMounted()&&this.setState({children:this.state.children.filter(function(t){return o(t)!==e})}),this._tryFinish()},isTransitioning:function(){return!!Object.keys(this.animatingKeys).length},render:function(){var e=this,t=this.props.component;return n.default.createElement(t,b.default.omitOwnProps(this),this.state.children.map(function(t){return e.props.childFactory(t,o(t))}))}}),t.exports=a.default},{"./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","dom-helpers/query/height":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/height.js",
"dom-helpers/query/width":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/width.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/SlideTransition.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("./ReplaceTransitionGroup"),d=r(u),c=e("./util/compat"),m=r(c),p=e("dom-helpers/style"),f=r(p),h=e("dom-helpers/query/width"),y=r(h),g=e("./util/configuration"),v=r(g),b=e("./util/_"),_=r(b),E=i.default.createClass({displayName:"SlideChildGroup",propTypes:{direction:l.default.oneOf(["left","right"]),duration:l.default.number},componentWillEnter:function(e){var t=this,a=m.default.findDOMNode(this),r=(0,y.default)(a);r="left"===this.props.direction?r:-r,this.ORGINAL_POSITION=a.style.position,(0,f.default)(a,{position:"absolute",left:r+"px",top:0}),v.default.animate(a,{left:0},this.props.duration,function(){(0,f.default)(a,{position:t.ORGINAL_POSITION,overflow:"hidden"}),t.ORGINAL_POSITION=null,e&&e()})},componentWillLeave:function(e){var t=this,a=m.default.findDOMNode(this),r=(0,y.default)(a);r="left"===this.props.direction?-r:r,this.ORGINAL_POSITION=a.style.position,(0,f.default)(a,{position:"absolute",top:0,left:0}),v.default.animate(a,{left:r+"px"},this.props.duration,function(){(0,f.default)(a,{position:t.ORGINAL_POSITION,overflow:"hidden"}),t.ORGINAL_POSITION=null,e&&e()})},render:function(){return i.default.Children.only(this.props.children)}});t.exports=i.default.createClass({displayName:"exports",propTypes:{direction:l.default.oneOf(["left","right"]),duration:l.default.number},getDefaultProps:function(){return{direction:"left",duration:250}},_wrapChild:function(e,t){return i.default.createElement(E,{key:e.key,ref:t,direction:this.props.direction,duration:this.props.duration},e)},render:function(){var e=this.props,t=e.style,a=e.children;return t=s({},t,{position:"relative",overflow:"hidden"}),i.default.createElement(d.default,s({},_.default.omitOwnProps(this),{ref:"container",component:"div",childFactory:this._wrapChild,style:t}),a)}})},{"./ReplaceTransitionGroup":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/ReplaceTransitionGroup.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","./util/configuration":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/configuration.js","dom-helpers/query/width":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/width.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/TimeList.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=e("react"),i=r(o),n=e("prop-types"),l=r(n),u=e("./util/dates"),d=r(u),c=e("./List"),m=r(c),p=e("./util/localizers"),f=e("./util/propTypes"),h=r(f),y=e("./util/_"),g=r(y),v=function(e){return p.date.getFormat("time",e.format)};a.default=i.default.createClass({displayName:"TimeList",propTypes:{value:l.default.instanceOf(Date),step:l.default.number,min:l.default.instanceOf(Date),max:l.default.instanceOf(Date),currentDate:l.default.instanceOf(Date),itemComponent:h.default.elementType,format:h.default.dateFormat,onSelect:l.default.func,preserveDate:l.default.bool,culture:l.default.string,delay:l.default.number},mixins:[e("./mixins/TimeoutMixin")],getDefaultProps:function(){return{step:30,onSelect:function(){},min:new Date(1900,0,1),max:new Date(2099,11,31),preserveDate:!0,delay:300,ariaActiveDescendantKey:"timelist"}},getInitialState:function(){var e=this._dates(this.props);return{focusedItem:this._closestDate(e,this.props.value||this.props.currentDate)||e[0],dates:e}},componentWillReceiveProps:function(e){var t=this._dates(e),a=this._closestDate(t,e.value||this.props.currentDate),r=!d.default.eq(e.value,this.props.value,"minutes"),s=!d.default.eq(e.min,this.props.min,"minutes"),o=!d.default.eq(e.max,this.props.max,"minutes"),i=this.props.format!==e.format||this.props.culture!==e.culture;(r||s||o||i)&&this.setState({focusedItem:a||t[0],dates:t})},render:function(){var e=this.props,t=e.value,a=e.onSelect,r=e.itemComponent,o=this.state.dates,n=this._closestDate(o,t);return i.default.createElement(m.default,s({},g.default.omitOwnProps(this),{ref:"list",data:o,textField:"label",valueField:"date",selected:n,onSelect:a,focused:this.state.focusedItem,itemComponent:r}))},_closestDate:function(e,t){var a,r=6e4*this.props.step,s=null;return t?(t=new Date(Math.floor(t.getTime()/r)*r),a=p.date.format(t,v(this.props),this.props.culture),e.some(function(e){if(e.label===a)return s=e}),s):null},_data:function(){return this.state.dates},_dates:function(e){for(var t=[],a=0,r=this._dateValues(e),s=r.min,o=d.default.date(s);d.default.date(s)===o&&d.default.lte(s,r.max);)a++,t.push({date:s,label:p.date.format(s,v(e),e.culture)}),s=d.default.add(s,e.step||30,"minutes");return t},_dateValues:function(e){var t,a,r=e.value||e.currentDate||d.default.today(),s=e.preserveDate,o=e.min,i=e.max;return s?(t=d.default.today(),a=d.default.tomorrow(),{min:d.default.eq(r,o,"day")?d.default.merge(t,o,e.currentDate):t,max:d.default.eq(r,i,"day")?d.default.merge(t,i,e.currentDate):a}):(t=d.default.startOf(d.default.merge(new Date,o,e.currentDate),"minutes"),a=d.default.startOf(d.default.merge(new Date,i,e.currentDate),"minutes"),d.default.lte(a,t)&&d.default.gt(i,o,"day")&&(a=d.default.tomorrow()),{min:t,max:a})},handleKeyDown:function(e){var t=e.key,a=this.state.focusedItem,r=this.refs.list;"End"===t?(e.preventDefault(),this.setState({focusedItem:r.last()})):"Home"===t?(e.preventDefault(),this.setState({focusedItem:r.first()})):"Enter"===t?this.props.onSelect(a):"ArrowDown"===t?(e.preventDefault(),this.setState({focusedItem:r.next(a)})):"ArrowUp"===t&&(e.preventDefault(),this.setState({focusedItem:r.prev(a)}))},handleKeyPress:function(e){var t=this;e.preventDefault(),this.search(String.fromCharCode(e.which),function(e){t.isMounted()&&t.setState({focusedItem:e})})},scrollTo:function(){this.refs.list.move&&this.refs.list.move()},search:function(e,t){var a=this,r=((this._searchTerm||"")+e).toLowerCase();this._searchTerm=r,this.setTimeout("search",function(){var e=a.refs.list,s=e.next(a.state.focusedItem,r);a._searchTerm="",s&&t(s)},this.props.delay)}}),t.exports=a.default},{"./List":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/List.js","./mixins/TimeoutMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/TimeoutMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Widget.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.__esModule=!0;var l,u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=e("react"),m=r(c),p=e("prop-types"),f=r(p),h=e("classnames"),y=r(h),g=(u=l=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.tabIndex,r=e.open,o=e.dropUp,i=e.disabled,n=e.readOnly,l=e.focused,u=s(e,["className","tabIndex","open","dropUp","disabled","readOnly","focused"]),c=!!this.context.isRtl,p="rw-open"+(o?"-up":"");return a=null!=a?a:"-1",m.default.createElement("div",d({},u,{tabIndex:a,className:(0,y.default)(t,"rw-widget",c&&"rw-rtl",r&&p,l&&"rw-state-focus",i&&"rw-state-disabled",n&&"rw-state-readonly")}))},t}(m.default.Component),l.propTypes={tabIndex:f.default.node,focused:f.default.bool,disabled:f.default.bool,readOnly:f.default.bool,open:f.default.bool,dropUp:f.default.bool},l.contextTypes={isRtl:f.default.bool},u);a.default=g,t.exports=a.default},{classnames:"classnames","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/Year.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var s=e("react"),o=r(s),i=e("prop-types"),n=r(i),l=e("./CalendarView"),u=r(l),d=e("./util/dates"),c=r(d),m=e("./util/localizers"),p=e("./util/_"),f=r(p),h=e("./util/propTypes"),y=r(h),g=e("./util/widgetHelpers"),v=function(e){return m.date.getFormat("month",e.monthFormat)},b={culture:n.default.string,today:n.default.instanceOf(Date),value:n.default.instanceOf(Date),focused:n.default.instanceOf(Date),min:n.default.instanceOf(Date),max:n.default.instanceOf(Date),onChange:n.default.func.isRequired,monthFormat:y.default.dateFormat},_=function(e,t){return e+"__year_"+c.default.year(t)+"-"+c.default.month(t)},E=o.default.createClass({displayName:"YearView",mixins:[e("./mixins/RtlChildContextMixin"),e("./mixins/AriaDescendantMixin")()],propTypes:b,componentDidUpdate:function(){var e=_((0,g.instanceId)(this),this.props.focused);this.ariaActiveDescendant(e)},render:function(){var e=this.props.focused,t=c.default.monthsInYear(c.default.year(e));return o.default.createElement(u.default,f.default.omitOwnProps(this),o.default.createElement("tbody",null,f.default.chunk(t,4).map(this.renderRow)))},renderRow:function(e,t){var a=this,r=this.props,s=r.focused,i=r.disabled,n=r.onChange,l=r.value,d=r.today,c=r.culture,p=r.min,f=r.max,h=(0,g.instanceId)(this),y=m.date.getFormat("header");return o.default.createElement(u.default.Row,{key:t},e.map(function(e,t){var r=m.date.format(e,y,c);return o.default.createElement(u.default.Cell,{key:t,id:_(h,e),label:r,date:e,now:d,min:p,max:f,unit:"month",onChange:n,focused:s,selected:l,disabled:i},m.date.format(e,v(a.props),c))}))}});a.default=E,t.exports=a.default},{"./CalendarView":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/CalendarView.js","./mixins/AriaDescendantMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js","./mixins/RtlChildContextMixin":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js","./util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js","./util/dates":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","./util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js","./util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/configure.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=e("./util/configuration"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=e("./util/localizers"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o);a.default={setAnimate:function(e){s.default.animate=e},setLocalizers:function(e){var t=e.date,a=e.number;t&&this.setDateLocalizer(t),a&&this.setNumberLocalizer(a)},setDateLocalizer:i.setDate,setNumberLocalizer:i.setNumber},t.exports=a.default},{"./util/configuration":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/configuration.js","./util/localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/localizers/moment.js":[function(e,t,a){"use strict";a.__esModule=!0,a.default=function(e){function t(t,a,r){return t?e(a,r)[o](t):e(a,r)}function a(t){return e(t).add(10,"year").add(-1,"millisecond").toDate()}function r(t){return e(t).add(100,"year").add(-1,"millisecond").toDate()}if("function"!=typeof e)throw new TypeError("You must provide a valid moment object");var o="function"==typeof e().locale?"locale":"lang";if(!e.localeData)throw new TypeError("The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher");var i={formats:{date:"L",time:"LT",default:"lll",header:"MMMM YYYY",footer:"LL",weekday:"dd",dayOfMonth:"DD",month:"MMM",year:"YYYY",decade:function(e,t,r){return r.format(e,"YYYY",t)+" - "+r.format(a(e),"YYYY",t)},century:function(e,t,a){return a.format(e,"YYYY",t)+" - "+a.format(r(e),"YYYY",t)}},firstOfWeek:function(t){return e.localeData(t).firstDayOfWeek()},parse:function(e,a,r){if(!e)return null;var s=t(r,e,a);return s.isValid()?s.toDate():null},format:function(e,a,r){return t(r,e).format(a)}};return s.default.setDateLocalizer(i),i};var r=e("../configure"),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.exports=a.default},{"../configure":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/configure.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AriaDescendantMixin.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return t}function o(e,t,a){var r="function"==typeof t?t(a):"string"==typeof t?a.refs[t]:a;r&&(e?u.default.findDOMNode(r).setAttribute("aria-activedescendant",e):u.default.findDOMNode(r).removeAttribute("aria-activedescendant"))}a.__esModule=!0,a.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return{propTypes:{ariaActiveDescendantKey:n.default.string.isRequired},contextTypes:{activeDescendants:d},childContextTypes:{activeDescendants:d},ariaActiveDescendant:function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.ariaActiveDescendantKey,s=this.context.activeDescendants,i=this.__ariaActiveDescendantId;if(void 0===a)return i;a=t.call(this,r,a),void 0===a?a=i:(this.__ariaActiveDescendantId=a,o(a,e,this)),s&&s.reconcile(r,a)},getChildContext:function(){var e=this;return this._context||(this._context={activeDescendants:{reconcile:function(t,a){return e.ariaActiveDescendant(a,t)}}})}}};var i=e("prop-types"),n=r(i),l=e("../util/compat"),u=r(l),d=n.default.shape({reconcile:n.default.func});t.exports=a.default},{"../util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/AutoFocusMixin.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=e("prop-types"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=e("react-dom");a.default={propTypes:{autoFocus:s.default.bool},componentDidMount:function(){this.props.autoFocus&&(this.focus?this.focus():(0,o.findDOMNode)(this).focus())}},t.exports=a.default},{"prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/FocusMixin.js":[function(e,t,a){"use strict";function r(e,t,a,r,s){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,r){return r(e,t,a)||a},o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function s(e){function t(e,t,a){var r=e.props[t?"onFocus":"onBlur"];r&&a&&a.persist(),s&&!1===s.call(e,t,a)||e.setTimeout("focus",function(){l.default.batchedUpdates(function(){n&&n.call(e,t,a),t!==e.state.focused&&((0,o.notify)(r,a),e.isMounted()&&e.setState({focused:t}))})})}var a,s=e.willHandle,n=e.didHandle;return a={handleBlur:function(e){t(this,!1,e)},handleFocus:function(e){t(this,!0,e)}},r(a,"handleBlur",[i.widgetEnabled],Object.getOwnPropertyDescriptor(a,"handleBlur"),a),r(a,"handleFocus",[i.widgetEnabled],Object.getOwnPropertyDescriptor(a,"handleFocus"),a),a}a.__esModule=!0,a.default=s;var o=e("../util/widgetHelpers"),i=e("../util/interaction"),n=e("../util/compat"),l=function(e){return e&&e.__esModule?e:{default:e}}(n);t.exports=a.default},{"../util/compat":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js","../util/interaction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js","../util/widgetHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/ListMovementMixin.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return e?(e=e.toLowerCase(),function(t){return i.default.startsWith((0,n.dataText)(t,a).toLowerCase(),e)}):function(){return!0}}a.__esModule=!0;var o=e("../util/filter"),i=r(o),n=e("../util/dataHelpers"),l=e("../util/propTypes"),u=r(l),d=e("../util/interaction"),c={},m=function(e,t){return(0,d.isDisabledItem)(e,t)||(0,d.isReadOnlyItem)(e,t)};a.default={propTypes:{textField:u.default.accessor,valueField:u.default.accessor,disabled:u.default.disabled.acceptsArray,readOnly:u.default.readOnly.acceptsArray},first:function(){return this.next(c)},last:function(){var e=this._data(),t=e[e.length-1];return m(t,this.props)?this.prev(t):t},prev:function(e,t){var a=this._data(),r=a.indexOf(e),o=s(t,e,this.props.textField);for((r<0||null==r)&&(r=0),r--;r>-1&&(m(a[r],this.props)||!o(a[r]));)r--;return r>=0?a[r]:e},next:function(e,t){for(var a=this._data(),r=a.indexOf(e)+1,o=a.length,i=s(t,e,this.props.textField);r<o&&(m(a[r],this.props)||!i(a[r]));)r++;return r<o?a[r]:e}},t.exports=a.default},{"../util/dataHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dataHelpers.js","../util/filter":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/filter.js","../util/interaction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js","../util/propTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PopupScrollToMixin.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=e("dom-helpers/util/scrollTo"),s=function(e){return e&&e.__esModule?e:{default:e}}(r);a.default={_scrollTo:function(e,t,a){var r,o,i=this._scrollState||(this._scrollState={}),n=this.props.onMove,l=i.visible,u=i.focused;i.visible=!(!t.offsetWidth||!t.offsetHeight),i.focused=a,o=u!==a,((r=i.visible&&!l)||i.visible&&o)&&(n?n(e,t,a):(i.scrollCancel&&i.scrollCancel(),i.scrollCancel=(0,s.default)(e,t)))}},t.exports=a.default},{"dom-helpers/util/scrollTo":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/scrollTo.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/PureRenderMixin.js":[function(e,t,a){"use strict";var r=e("../util/_");t.exports={shouldComponentUpdate:function(e,t){return!r.isShallowEqual(this.props,e)||!r.isShallowEqual(this.state,t)}}},{"../util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlChildContextMixin.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=e("prop-types"),s=function(e){return e&&e.__esModule?e:{default:e}}(r);a.default={contextTypes:{isRtl:s.default.bool},isRtl:function(){return!!this.context.isRtl}},t.exports=a.default},{"prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/RtlParentContextMixin.js":[function(e,t,a){"use strict";var r=e("prop-types");t.exports={propTypes:{isRtl:r.bool},contextTypes:{isRtl:r.bool},childContextTypes:{isRtl:r.bool},getChildContext:function(){return{isRtl:!!(this.props.isRtl||this.context&&this.context.isRtl)}},isRtl:function(){return!!(this.props.isRtl||this.context&&this.context.isRtl)}}},{"prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/mixins/TimeoutMixin.js":[function(e,t,a){"use strict";var r=e("../util/_"),s=r.has;t.exports={componentWillUnmount:function(){var e=this._timers||{};this._unmounted=!0;for(var t in e)s(e,t)&&this.clearTimeout(t)},clearTimeout:function(e){var t=this._timers||{};window.clearTimeout(t[e])},setTimeout:function(e,t,a){var r=this,s=this._timers||(this._timers=Object.create(null));this._unmounted||(this.clearTimeout(e),s[e]=window.setTimeout(function(){r._unmounted||t()},a))}}},{"../util/_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js":[function(e,t,a){"use strict";function r(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){return e===t}function o(e,t){if(null==e||null==t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var i=0;i<a.length;i++)if(!r(t,a[i])||!s(e[a[i]],t[a[i]]))return!1;return!0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=0,l=t.exports={has:r,result:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,a):e},isShallowEqual:function(e,t){return e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!==(void 0===e?"undefined":i(e))&&"object"!==(void 0===t?"undefined":i(t))?e===t:(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))&&o(e,t))},transform:function(e,t,a){return l.each(e,t.bind(null,a=a||(Array.isArray(e)?[]:{}))),a},each:function(e,t,a){if(Array.isArray(e))return e.forEach(t,a);for(var s in e)r(e,s)&&t.call(a,e[s],s,e)},pick:function(e,t){return t=[].concat(t),l.transform(e,function(e,a,r){-1!==t.indexOf(r)&&(e[r]=a)},{})},pickProps:function(e,t){return l.pick(e,Object.keys(t.propTypes))},omit:function(e,t){return t=[].concat(t),l.transform(e,function(e,a,r){-1===t.indexOf(r)&&(e[r]=a)},{})},omitOwnProps:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var s=a.reduce(function(e,t){return e.concat(Object.keys(t.propTypes))},Object.keys(e.constructor.propTypes));return l.omit(e.props,s)},find:function(e,t,a){var s;if(Array.isArray(e))return e.every(function(r,o){return!t.call(a,r,o,e)||(s=r,!1)}),s;for(var o in e)if(r(e,o)&&t.call(a,e[o],o,e))return e[o]},chunk:function(e,t){var a=0,r=e?e.length:0,s=[];for(t=Math.max(+t||1,1);a<r;)s.push(e.slice(a,a+=t));return s},splat:function(e){return null==e?[]:[].concat(e)},noop:function(){},uniqueId:function(e){return""+((null==e?"":e)+ ++n)}}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/compat.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=e("react"),o=r(s),i=e("react-dom"),n=r(i),l=o.default.version.split(".").map(parseFloat);t.exports={version:function(){return l},findDOMNode:function(e){return n.default.findDOMNode(e)},batchedUpdates:function(e){n.default.unstable_batchedUpdates(e)}}},{react:"react","react-dom":"react-dom"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/configuration.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=e("./dom/animate"),s=function(e){return e&&e.__esModule?e:{default:e}}(r);a.default={animate:s.default},t.exports=a.default},{"./dom/animate":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dom/animate.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/constants.js":[function(e,t,a){"use strict";a.__esModule=!0;var r,s,o={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"};a.directions={LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"},a.datePopups={TIME:"time",CALENDAR:"calendar"},a.calendarViews=o,a.calendarViewHierarchy=(r={},r[o.MONTH]=o.YEAR,r[o.YEAR]=o.DECADE,r[o.DECADE]=o.CENTURY,r),a.calendarViewUnits=(s={},s[o.MONTH]="day",s[o.YEAR]=o.MONTH,s[o.DECADE]=o.YEAR,s[o.CENTURY]=o.DECADE,s)},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dataHelpers.js":[function(e,t,a){"use strict";function r(e,t){var a=e;return"function"==typeof t?a=t(e):null==e?a=e:"string"==typeof t&&"object"===(void 0===e?"undefined":u(e))&&t in e&&(a=e[t]),a}function s(e,t){return t&&e&&(0,d.has)(e,t)?e[t]:e}function o(e,t){var a=r(e,t);return null==a?"":a+""}function i(e,t,a){for(var r=-1,s=e.length;++r<s;){var o=e[r];if(o===t||function(e){return n(t,e,a)}(o))return r}return-1}function n(e,t,a){return(0,d.isShallowEqual)(s(e,a),s(t,a))}function l(e,t,a){var r=i(e,s(t,a),a);return-1!==r?e[r]:t}a.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a.dataValue=s,a.dataText=o,a.dataIndexOf=i,a.valueMatcher=n,a.dataItem=l;var d=e("./_")},{"./_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dates.js":[function(e,t,a){"use strict";a.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=e("date-arithmetic"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i=e("./constants"),n=e("./localizers"),l=r({},o.default,{parse:function(e,t,a){return n.date.parse(e,t,a)},format:function(e,t,a){return n.date.format(e,t,a)},monthsInYear:function(e){var t=[0,1,2,3,4,5,6,7,8,9,10,11],a=new Date(e,0,1);return t.map(function(e){return l.month(a,e)})},firstVisibleDay:function(e,t){var a=l.startOf(e,"month");return l.startOf(a,"week",n.date.startOfWeek(t))},lastVisibleDay:function(e,t){var a=l.endOf(e,"month");return l.endOf(a,"week",n.date.startOfWeek(t))},visibleDays:function(e,t){for(var a=l.firstVisibleDay(e,t),r=l.lastVisibleDay(e,t),s=[];l.lte(a,r,"day");)s.push(a),a=l.add(a,1,"day");return s},move:function(e,t,a,r,s){var o,n="month"===r,u=s===i.directions.UP||s===i.directions.DOWN,d=i.calendarViewUnits[r],c=n&&u?"week":i.calendarViewUnits[r],m=n||!u?1:4;return s!==i.directions.UP&&s!==i.directions.LEFT||(m*=-1),o=l.add(e,m,c),l.inRange(o,t,a,d)?o:e},merge:function(e,t,a){return null==t&&null==e?null:(null==t&&(t=a||new Date),null==e&&(e=a||new Date),e=l.startOf(e,"day"),e=l.hours(e,l.hours(t)),e=l.minutes(e,l.minutes(t)),e=l.seconds(e,l.seconds(t)),l.milliseconds(e,l.milliseconds(t)))},sameMonth:function(e,t){return l.eq(e,t,"month")},today:function(){return this.startOf(new Date,"day")},yesterday:function(){return this.add(this.startOf(new Date,"day"),-1,"day")},tomorrow:function(){return this.add(this.startOf(new Date,"day"),1,"day")}});a.default=l,t.exports=a.default},{"./constants":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/constants.js","./localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","date-arithmetic":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/date-arithmetic/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dom/animate.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,r,s){function o(t){t.target===t.currentTarget&&(n=!0,(0,m.default)(t.target,f.default.end,o),(0,l.default)(e,y),s&&s.call(this))}var n,u=[],c={target:e,currentTarget:e},p={},v="";"function"==typeof r&&(s=r,r=null),f.default.end||(a=0),void 0===a&&(a=200);for(var b in t)h.call(t,b)&&(/(top|bottom)/.test(b)?v+=g[b]+"("+t[b]+") ":(p[b]=t[b],u.push((0,i.default)(b))));return v&&(p[f.default.transform]=v,u.push(f.default.transform)),a>0&&(p[f.default.property]=u.join(", "),p[f.default.duration]=a/1e3+"s",p[f.default.delay]="0s",p[f.default.timing]=r||"linear",(0,d.default)(e,f.default.end,o),setTimeout(function(){n||o(c)},a+500)),e.clientLeft,(0,l.default)(e,p),a<=0&&setTimeout(o.bind(null,c),0),{cancel:function(){n||(n=!0,(0,m.default)(e,f.default.end,o),(0,l.default)(e,y))}}}a.__esModule=!0,a.default=s;var o=e("dom-helpers/util/hyphenate"),i=r(o),n=e("dom-helpers/style"),l=r(n),u=e("dom-helpers/events/on"),d=r(u),c=e("dom-helpers/events/off"),m=r(c),p=e("dom-helpers/transition/properties"),f=r(p),h=Object.prototype.hasOwnProperty,y={},g={left:"translateX",right:"translateX",top:"translateY",bottom:"translateY"}
;y[f.default.property]=y[f.default.duration]=y[f.default.delay]=y[f.default.timing]="",s.endEvent=f.default.end,s.transform=f.default.transform,s.TRANSLATION_MAP=g,t.exports=a.default},{"dom-helpers/events/off":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/events/off.js","dom-helpers/events/on":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/events/on.js","dom-helpers/style":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","dom-helpers/transition/properties":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/transition/properties.js","dom-helpers/util/hyphenate":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/filter.js":[function(e,t,a){"use strict";a.__esModule=!0;var r={eq:function(e,t){return e===t},neq:function(e,t){return e!==t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return e<t},lte:function(e,t){return e<=t},contains:function(e,t){return-1!==e.indexOf(t)},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var a=e.length-t.length,r=e.indexOf(t,a);return-1!==r&&r===a}};a.default=r,t.exports=a.default},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/interaction.js":[function(e,t,a){"use strict";function r(e){return!0===e.disabled||"disabled"===e.disabled}function s(e){return!0===e.readOnly||"readOnly"===e.readOnly}function o(e,t){return r(t)||n(e,t.disabled,t.valueField)}function i(e,t){return s(t)||n(e,t.readOnly,t.valueField)}function n(e,t,a){return Array.isArray(t)?t.some(function(t){return(0,d.valueMatcher)(e,t,a)}):(0,d.valueMatcher)(e,t,a)}function l(e,t,a,r){for(var s=function(e){return o(e,a)||i(e,a)},n="next"===e?r.last():r.first(),l=r[e](t);l!==n&&s(l);)l=r[e](l);return s(l)?t:l}function u(e){function t(t){return function(){for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];if(!(r(this.props)||!e&&s(this.props)))return t.apply(this,o)}}return function(e,a,r){if(r.initializer){var s=r.initializer;r.initializer=function(){return t(s())}}else r.value=t(r.value);return r}}a.__esModule=!0,a.widgetEditable=a.widgetEnabled=void 0,a.isDisabled=r,a.isReadOnly=s,a.isDisabledItem=o,a.isReadOnlyItem=i,a.contains=n,a.move=l;var d=e("./dataHelpers");a.widgetEnabled=u(!0),a.widgetEditable=u(!1)},{"./dataHelpers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/dataHelpers.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,r,s){var o="function"==typeof r?r(a,s,e):t.call(e,a,r,s);return(0,d.default)(null==o||"string"==typeof o,"`localizer format(..)` must return a string, null, or undefined"),o}function o(e,t){}function i(e){var t=e.format,a=e.parse,r=e.decimalChar,i=void 0===r?function(){return"."}:r,n=e.precision,l=void 0===n?function(){return null}:n,u=e.formats,c=e.propType;(0,d.default)("function"==typeof t,"number localizer `format(..)` must be a function"),(0,d.default)("function"==typeof a,"number localizer `parse(..)` must be a function"),o(f,u),u.editFormat=u.editFormat||function(e){return parseFloat(e)},y={formats:u,precision:l,decimalChar:i,propType:c||p,format:function(e,a,r){return s(this,t,e,a,r)},parse:function(e,t,r){var s=a.call(this,e,t,r);return(0,d.default)(null==s||"number"==typeof s,"number localizer `parse(..)` must return a number, null, or undefined"),s}}}function n(e){(0,d.default)("function"==typeof e.format,"date localizer `format(..)` must be a function"),(0,d.default)("function"==typeof e.parse,"date localizer `parse(..)` must be a function"),(0,d.default)("function"==typeof e.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),o(h,e.formats),g={formats:e.formats,propType:e.propType||p,startOfWeek:e.firstOfWeek,format:function(t,a,r){return s(this,e.format,t,a,r)},parse:function(t,a){var r=e.parse.call(this,t,a);return(0,d.default)(null==r||r instanceof Date&&!isNaN(r.getTime()),"date localizer `parse(..)` must return a valid Date, null, or undefined"),r}}}function l(){var e={};return e}a.__esModule=!0,a.date=a.number=a.setNumber=void 0,a.setDate=n;var u=e("invariant"),d=r(u),c=(e("./_"),e("prop-types")),m=r(c),p=m.default.oneOfType([m.default.string,m.default.func]),f=["default"],h=["default","date","time","header","footer","dayOfMonth","month","year","decade","century"],y=l();a.setNumber=i;var g=l(),v=a.number={propType:function(){var e;return(e=y).propType.apply(e,arguments)},getFormat:function(e,t){return t||y.formats[e]},parse:function(){var e;return(e=y).parse.apply(e,arguments)},format:function(){var e;return(e=y).format.apply(e,arguments)},decimalChar:function(){var e;return(e=y).decimalChar.apply(e,arguments)},precision:function(){var e;return(e=y).precision.apply(e,arguments)}},b=a.date={propType:function(){var e;return(e=g).propType.apply(e,arguments)},getFormat:function(e,t){return t||g.formats[e]},parse:function(){var e;return(e=g).parse.apply(e,arguments)},format:function(){var e;return(e=g).format.apply(e,arguments)},startOfWeek:function(){var e;return(e=g).startOfWeek.apply(e,arguments)}};a.default={number:v,date:b}},{"./_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js",invariant:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/invariant/browser.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/propTypes.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=[u.default.bool,u.default.oneOf([e])],a=u.default.oneOfType(t);return a.acceptsArray=u.default.oneOfType(t.concat(u.default.array)),a}function o(e){function t(t,a,r,s){s=s||"<<anonymous>>";for(var o=arguments.length,i=Array(o>4?o-4:0),n=4;n<o;n++)i[n-4]=arguments[n];return null!=a[r]?e.apply(void 0,[a,r,s].concat(i)):t?new Error("Required prop `"+r+"` was not specified in  `"+s+"`."):void 0}var a=t.bind(null,!1);return a.isRequired=t.bind(null,!0),a}var i=e("react"),n=r(i),l=e("prop-types"),u=r(l),d=e("./localizers"),c=r(d),m=e("./filter"),p=r(m),f=Object.keys(p.default).filter(function(e){return"filter"!==e});t.exports={elementType:o(function(e,t,a){if("function"!=typeof e[t]){if(n.default.isValidElement(e[t]))return new Error("Invalid prop `"+t+"` specified in  `"+a+"`. Expected an Element `type`, not an actual Element");if("string"!=typeof e[t])return new Error("Invalid prop `"+t+"` specified in  `"+a+"`. Expected an Element `type` such as a tag name or return value of React.createClass(...)")}return null}),numberFormat:o(function(){var e;return(e=c.default.number).propType.apply(e,arguments)}),dateFormat:o(function(){var e;return(e=c.default.date).propType.apply(e,arguments)}),disabled:s("disabled"),readOnly:s("readOnly"),accessor:u.default.oneOfType([u.default.string,u.default.func]),message:u.default.oneOfType([u.default.node,u.default.string]),filter:u.default.oneOfType([u.default.func,u.default.bool,u.default.oneOf(f)])}},{"./filter":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/filter.js","./localizers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/localizers.js","prop-types":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/widgetHelpers.js":[function(e,t,a){"use strict";function r(e,t){e&&e.apply(null,[].concat(t))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.__id||(e.__id=(0,i.uniqueId)("rw_")),(e.props.id||e.__id)+t}function o(e){return e._firstFocus||e.state.focused&&(e._firstFocus=!0)}a.__esModule=!0,a.notify=r,a.instanceId=s,a.isFirstFocusedRender=o;var i=e("./_")},{"./_":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/lib/util/_.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/date-arithmetic/index.js":[function(e,t,a){function r(e){return e<0?Math.ceil(e):Math.floor(e)}function s(e,t){var a=l.month(e),r=a+t;for(e=l.month(e,r);r<0;)r=12+r;return l.month(e)!==r%12&&(e=l.date(e,0)),e}function o(e){return function(t,a){return void 0===a?t["get"+e]():(t=new Date(t),t["set"+e](a),t)}}function i(e){return function(t,a,r){return e(+l.startOf(t,r),+l.startOf(a,r))}}var n="milliseconds",l=t.exports={add:function(e,t,a){switch(e=new Date(e),a){case n:case"seconds":case"minutes":case"hours":case"year":return l[a](e,l[a](e)+t);case"day":return l.date(e,l.date(e)+t);case"week":return l.date(e,l.date(e)+7*t);case"month":return s(e,t);case"decade":return l.year(e,l.year(e)+10*t);case"century":return l.year(e,l.year(e)+100*t)}throw new TypeError('Invalid units: "'+a+'"')},subtract:function(e,t,a){return l.add(e,-t,a)},startOf:function(e,t,a){switch(e=new Date(e),t){case"century":case"decade":case"year":e=l.month(e,0);case"month":e=l.date(e,1);case"week":case"day":e=l.hours(e,0);case"hours":e=l.minutes(e,0);case"minutes":e=l.seconds(e,0);case"seconds":e=l.milliseconds(e,0)}return"decade"===t&&(e=l.subtract(e,l.year(e)%10,"year")),"century"===t&&(e=l.subtract(e,l.year(e)%100,"year")),"week"===t&&(e=l.weekday(e,0,a)),e},endOf:function(e,t,a){return e=new Date(e),e=l.startOf(e,t,a),e=l.add(e,1,t),e=l.subtract(e,1,n)},eq:i(function(e,t){return e===t}),neq:i(function(e,t){return e!==t}),gt:i(function(e,t){return e>t}),gte:i(function(e,t){return e>=t}),lt:i(function(e,t){return e<t}),lte:i(function(e,t){return e<=t}),min:function(){return new Date(Math.min.apply(Math,arguments))},max:function(){return new Date(Math.max.apply(Math,arguments))},inRange:function(e,t,a,r){return r=r||"day",(!t||l.gte(e,t,r))&&(!a||l.lte(e,a,r))},milliseconds:o("Milliseconds"),seconds:o("Seconds"),minutes:o("Minutes"),hours:o("Hours"),day:o("Day"),date:o("Date"),month:o("Month"),year:o("FullYear"),decade:function(e,t){return void 0===t?l.year(l.startOf(e,"decade")):l.add(e,t+10,"year")},century:function(e,t){return void 0===t?l.year(l.startOf(e,"century")):l.add(e,t+100,"year")},weekday:function(e,t,a){var r=(l.day(e)+7-(a||0))%7;return void 0===t?r:l.add(e,t-r,"day")},diff:function(e,t,a,s){var o,i,u;switch(a){case n:case"seconds":case"minutes":case"hours":case"day":case"week":o=t.getTime()-e.getTime();break;case"month":case"year":case"decade":case"century":o=12*(l.year(t)-l.year(e))+l.month(t)-l.month(e);break;default:throw new TypeError('Invalid units: "'+a+'"')}switch(a){case n:i=1;break;case"seconds":i=1e3;break;case"minutes":i=6e4;break;case"hours":i=36e5;break;case"day":i=864e5;break;case"week":i=6048e5;break;case"month":i=1;break;case"year":i=12;break;case"decade":i=120;break;case"century":i=1200;break;default:throw new TypeError('Invalid units: "'+a+'"')}return u=o/i,s?u:r(u)}}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/activeElement.js":[function(e,t,a){"use strict";function r(){var e=void 0===arguments[0]?document:arguments[0];try{return e.activeElement}catch(e){}}var s=e("./util/babelHelpers.js");a.__esModule=!0,a.default=r;var o=e("./ownerDocument");s.interopRequireDefault(o);t.exports=a.default},{"./ownerDocument":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js","./util/babelHelpers.js":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/events/off.js":[function(e,t,a){"use strict";var r=e("../util/inDOM"),s=function(){};r&&(s=function(){return document.addEventListener?function(e,t,a,r){return e.removeEventListener(t,a,r||!1)}:document.attachEvent?function(e,t,a){return e.detachEvent("on"+t,a)}:void 0}()),t.exports=s},{"../util/inDOM":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/events/on.js":[function(e,t,a){"use strict";var r=e("../util/inDOM"),s=function(){};r&&(s=function(){return document.addEventListener?function(e,t,a,r){return e.addEventListener(t,a,r||!1)}:document.attachEvent?function(e,t,a){return e.attachEvent("on"+t,a)}:void 0}()),t.exports=s},{"../util/inDOM":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js":[function(e,t,a){"use strict";function r(e){return e&&e.ownerDocument||document}a.__esModule=!0,a.default=r,t.exports=a.default},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/contains.js":[function(e,t,a){"use strict";var r=e("../util/inDOM"),s=function(){var e=r&&document.documentElement;return e&&e.contains?function(e,t){return e.contains(t)}:e&&e.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}}();t.exports=s},{"../util/inDOM":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/height.js":[function(e,t,a){"use strict";var r=e("./offset"),s=e("./isWindow");t.exports=function(e,t){var a=s(e);return a?a.innerHeight:t?e.clientHeight:r(e).height}},{"./isWindow":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","./offset":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js":[function(e,t,a){"use strict";t.exports=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js":[function(e,t,a){"use strict";var r=e("./contains"),s=e("./isWindow"),o=e("../ownerDocument");t.exports=function(e){var t=o(e),a=s(t),i=t&&t.documentElement,n={top:0,left:0,height:0,width:0};if(t)return r(i,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),(n.width||n.height)&&(n={top:n.top+(a.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(a.pageXOffset||i.scrollLeft)-(i.clientLeft||0),width:(null==n.width?e.offsetWidth:n.width)||0,height:(null==n.height?e.offsetHeight:n.height)||0}),n):n}},{"../ownerDocument":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/ownerDocument.js","./contains":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/contains.js","./isWindow":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/scrollParent.js":[function(e,t,a){"use strict";var r=e("../style"),s=e("./height");t.exports=function(e){var t=r(e,"position"),a="absolute"===t,o=e.ownerDocument;if("fixed"===t)return o||document;for(;(e=e.parentNode)&&9!==e.nodeType;){var i=a&&"static"===r(e,"position"),n=r(e,"overflow")+r(e,"overflow-y")+r(e,"overflow-x");if(!i&&(/(auto|scroll)/.test(n)&&s(e)<e.scrollHeight))return e}return document}},{"../style":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js","./height":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/height.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/scrollTop.js":[function(e,t,a){"use strict";var r=e("./isWindow");t.exports=function(e,t){var a=r(e);if(void 0===t)return a?"pageYOffset"in a?a.pageYOffset:a.document.documentElement.scrollTop:e.scrollTop;a?a.scrollTo("pageXOffset"in a?a.pageXOffset:a.document.documentElement.scrollLeft,t):e.scrollTop=t}},{"./isWindow":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/width.js":[function(e,t,a){"use strict";var r=e("./offset"),s=e("./isWindow");t.exports=function(e,t){var a=s(e);return a?a.innerWidth:t?e.clientWidth:r(e).width}},{"./isWindow":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","./offset":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/getComputedStyle.js":[function(e,t,a){"use strict";var r=e("../util/babelHelpers.js"),s=e("../util/camelizeStyle"),o=r.interopRequireDefault(s),i=/^(top|right|bottom|left)$/,n=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;t.exports=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var a=e.style;"float"==(t=(0,o.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&a&&a[t]&&(r=a[t]),n.test(r)&&!i.test(t)){var s=a.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),a.left="fontSize"===t?"1em":r,r=a.pixelLeft+"px",a.left=s,u&&(l.left=u)}return r}}}},{"../util/babelHelpers.js":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js","../util/camelizeStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/index.js":[function(e,t,a){"use strict";var r=e("../util/camelizeStyle"),s=e("../util/hyphenateStyle"),o=e("./getComputedStyle"),i=e("./removeStyle"),n=Object.prototype.hasOwnProperty;t.exports=function(e,t,a){var l="",u=t;if("string"==typeof t){if(void 0===a)return e.style[r(t)]||o(e).getPropertyValue(s(t));(u={})[t]=a}for(var d in u)n.call(u,d)&&(u[d]||0===u[d]?l+=s(d)+":"+u[d]+";":i(e,s(d)));e.style.cssText+=";"+l}},{"../util/camelizeStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js","../util/hyphenateStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenateStyle.js","./getComputedStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/getComputedStyle.js","./removeStyle":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/removeStyle.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/style/removeStyle.js":[function(e,t,a){"use strict";t.exports=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/transition/properties.js":[function(e,t,a){"use strict";var r,s,o,i,n=e("../util/inDOM"),l=Object.prototype.hasOwnProperty,u="transform",d={};n&&(d=function(){var e,t="",a={O:"otransitionend",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"MSTransitionEnd"},r=document.createElement("div");for(var s in a)if(l.call(a,s)&&void 0!==r.style[s+"TransitionProperty"]){t="-"+s.toLowerCase()+"-",e=a[s];break}return e||void 0===r.style.transitionProperty||(e="transitionend"),{end:e,prefix:t}}(),u=d.prefix+u,o=d.prefix+"transition-property",s=d.prefix+"transition-duration",i=d.prefix+"transition-delay",r=d.prefix+"transition-timing-function"),t.exports={transform:u,end:d.end,property:o,timing:r,delay:i,duration:s}},{"../util/inDOM":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/babelHelpers.js":[function(e,t,a){!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof a?a:e.babelHelpers={})}(this,function(e){var t=e;t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t._extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}})},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelize.js":[function(e,t,a){"use strict";var r=/-(.)/g;t.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelizeStyle.js":[function(e,t,a){"use strict";var r=e("./camelize"),s=/^-ms-/;t.exports=function(e){return r(e.replace(s,"ms-"))}},{"./camelize":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/camelize.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js":[function(e,t,a){"use strict";var r=/([A-Z])/g;t.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenateStyle.js":[function(e,t,a){"use strict";var r=e("./hyphenate"),s=/^ms-/;t.exports=function(e){return r(e).replace(s,"-ms-")}},{"./hyphenate":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/hyphenate.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js":[function(e,t,a){"use strict";t.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/requestAnimationFrame.js":[function(e,t,a){"use strict";function r(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-d)),r=setTimeout(e,a);return d=t,r}var s,o=e("./inDOM"),i=["","webkit","moz","o","ms"],n="clearTimeout",l=r,u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o&&i.some(function(e){var t=u(e,"request");if(t in window)return n=u(e,"cancel"),l=function(e){return window[t](e)}});var d=(new Date).getTime();s=function(e){return l(e)},s.cancel=function(e){return window[n](e)},t.exports=s},{"./inDOM":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/inDOM.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/scrollTo.js":[function(e,t,a){"use strict";var r=e("../query/offset"),s=e("../query/height"),o=e("../query/scrollParent"),i=e("../query/scrollTop"),n=e("./requestAnimationFrame"),l=e("../query/isWindow");t.exports=function(e,t){var a,u,d,c,m,p,f,h=r(e),y={top:0,left:0};if(e){a=t||o(e),c=l(a),u=i(a),p=s(a,!0),c=l(a),c||(y=r(a)),h={top:h.top-y.top,left:h.left-y.left,height:h.height,width:h.width},m=h.height,d=h.top+(c?0:u),f=d+m,u=u>d?d:f>u+p?f-p:u;var g=n(function(){return i(a,u)});return function(){return n.cancel(g)}}}},{"../query/height":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/height.js","../query/isWindow":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/isWindow.js","../query/offset":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/offset.js","../query/scrollParent":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/scrollParent.js","../query/scrollTop":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/query/scrollTop.js","./requestAnimationFrame":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/dom-helpers/util/requestAnimationFrame.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/invariant/browser.js":[function(e,t,a){"use strict";var r=function(e,t,a,r,s,o,i,n){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[a,r,s,o,i,n],d=0;l=new Error(t.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=r},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/checkPropTypes.js":[function(e,t,a){"use strict";function r(e,t,a,r,s){}t.exports=r},{"./lib/ReactPropTypesSecret":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/lib/ReactPropTypesSecret.js","fbjs/lib/invariant":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/invariant.js","fbjs/lib/warning":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/warning.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/factoryWithThrowingShims.js":[function(e,t,a){"use strict";var r=e("fbjs/lib/emptyFunction"),s=e("fbjs/lib/invariant"),o=e("./lib/ReactPropTypesSecret");t.exports=function(){function e(e,t,a,r,i,n){n!==o&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return a.checkPropTypes=r,a.PropTypes=a,a}},{"./lib/ReactPropTypesSecret":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/lib/ReactPropTypesSecret.js","fbjs/lib/emptyFunction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/emptyFunction.js","fbjs/lib/invariant":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/invariant.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/factoryWithTypeCheckers.js":[function(e,t,a){"use strict";var r=e("fbjs/lib/emptyFunction"),s=e("fbjs/lib/invariant"),o=e("fbjs/lib/warning"),i=e("./lib/ReactPropTypesSecret"),n=e("./checkPropTypes");t.exports=function(e,t){function a(e){var t=e&&(S&&e[S]||e[k]);if("function"==typeof t)return t}function l(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function d(e){function a(a,r,o,n,l,d,c){if(n=n||j,d=d||o,c!==i)if(t)s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[o]?a?new u(null===r[o]?"The "+l+" `"+d+"` is marked as required in `"+n+"`, but its value is `null`.":"The "+l+" `"+d+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:e(r,o,n,l,d)}var r=a.bind(null,!1);return r.isRequired=a.bind(null,!0),r}function c(e){function t(t,a,r,s,o,i){var n=t[a];if(_(n)!==e)return new u("Invalid "+s+" `"+o+"` of type `"+E(n)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return d(t)}function m(e){function t(t,a,r,s,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var n=t[a];if(!Array.isArray(n)){return new u("Invalid "+s+" `"+o+"` of type `"+_(n)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<n.length;l++){var d=e(n,l,r,s,o+"["+l+"]",i);if(d instanceof Error)return d}return null}return d(t)}function p(e){function t(t,a,r,s,o){if(!(t[a]instanceof e)){var i=e.name||j;return new u("Invalid "+s+" `"+o+"` of type `"+w(t[a])+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null}return d(t)}function f(e){function t(t,a,r,s,o){for(var i=t[a],n=0;n<e.length;n++)if(l(i,e[n]))return null;return new u("Invalid "+s+" `"+o+"` of value `"+i+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?d(t):r.thatReturnsNull}function h(e){function t(t,a,r,s,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var n=t[a],l=_(n);if("object"!==l)return new u("Invalid "+s+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var d in n)if(n.hasOwnProperty(d)){var c=e(n,d,r,s,o+"."+d,i);if(c instanceof Error)return c}return null}return d(t)}function y(e){function t(t,a,r,s,o){for(var n=0;n<e.length;n++){if(null==(0,e[n])(t,a,r,s,o,i))return null}return new u("Invalid "+s+" `"+o+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return r.thatReturnsNull;for(var a=0;a<e.length;a++){var s=e[a];if("function"!=typeof s)return o(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",T(s),a),r.thatReturnsNull}return d(t)}function g(e){function t(t,a,r,s,o){var n=t[a],l=_(n);if("object"!==l)return new u("Invalid "+s+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var d in e){var c=e[d];if(c){var m=c(n,d,r,s,o+"."+d,i);if(m)return m}}return null}return d(t)}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var r=a(t);if(!r)return!1;var s,o=r.call(t);if(r!==t.entries){for(;!(s=o.next()).done;)if(!v(s.value))return!1}else for(;!(s=o.next()).done;){var i=s.value;if(i&&!v(i[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function E(e){if(void 0===e||null===e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function T(e){var t=E(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function w(e){return e.constructor&&e.constructor.name?e.constructor.name:j}
var S="function"==typeof Symbol&&Symbol.iterator,k="@@iterator",j="<<anonymous>>",x={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:function(){return d(r.thatReturnsNull)}(),arrayOf:m,element:function(){function t(t,a,r,s,o){var i=t[a];if(!e(i)){return new u("Invalid "+s+" `"+o+"` of type `"+_(i)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return d(t)}(),instanceOf:p,node:function(){function e(e,t,a,r,s){return v(e[t])?null:new u("Invalid "+r+" `"+s+"` supplied to `"+a+"`, expected a ReactNode.")}return d(e)}(),objectOf:h,oneOf:f,oneOfType:y,shape:g};return u.prototype=Error.prototype,x.checkPropTypes=n,x.PropTypes=x,x}},{"./checkPropTypes":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/checkPropTypes.js","./lib/ReactPropTypesSecret":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/lib/ReactPropTypesSecret.js","fbjs/lib/emptyFunction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/emptyFunction.js","fbjs/lib/invariant":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/invariant.js","fbjs/lib/warning":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/warning.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/index.js":[function(e,t,a){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/factoryWithThrowingShims.js","./factoryWithTypeCheckers":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/factoryWithTypeCheckers.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/lib/ReactPropTypesSecret.js":[function(e,t,a){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/emptyFunction.js":[function(e,t,a){"use strict";function r(e){return function(){return e}}var s=function(){};s.thatReturns=r,s.thatReturnsFalse=r(!1),s.thatReturnsTrue=r(!0),s.thatReturnsNull=r(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(e){return e},t.exports=s},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/invariant.js":[function(e,t,a){"use strict";function r(e,t,a,r,o,i,n,l){if(s(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[a,r,o,i,n,l],c=0;u=new Error(t.replace(/%s/g,function(){return d[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var s=function(e){};t.exports=r},{}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/warning.js":[function(e,t,a){"use strict";var r=e("./emptyFunction"),s=r;t.exports=s},{"./emptyFunction":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/prop-types/node_modules/fbjs/lib/emptyFunction.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/createUncontrollable.js":[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t){function a(r,n){function u(e,a){var r=f.getLinkName(e),s=this.props[n[e]];r&&c(this.props,r)&&!s&&(s=this.props[r].requestChange);for(var o=arguments.length,i=Array(o>2?o-2:0),l=2;l<o;l++)i[l-2]=arguments[l];t(this,e,s,a,i)}function c(e,t){return void 0!==e[t]}function p(e){var t={};return f.each(e,function(e,a){-1===w.indexOf(a)&&(t[a]=e)}),t}var h,y,g,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],b=r.displayName||r.name||"Component",_=f.getType(r).propTypes,E=f.isReactComponent(r),T=Object.keys(n),w=["valueLink","checkedLink"].concat(T.map(f.defaultKey));g=f.uncontrolledPropTypes(n,_,b),(0,m.default)(E||!v.length,"[uncontrollable] stateless function components cannot pass through methods because they have no associated instances. Check component: "+b+", attempting to pass through methods: "+v.join(", ")),v=f.transform(v,function(e,t){e[t]=function(){var e;return(e=this.refs.inner)[t].apply(e,arguments)}},{});var S=(y=h=function(t){function a(){return s(this,a),o(this,t.apply(this,arguments))}return i(a,t),a.prototype.shouldComponentUpdate=function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return!e.shouldComponentUpdate||e.shouldComponentUpdate.apply(this,a)},a.prototype.componentWillMount=function(){var e=this,t=this.props;this._values={},T.forEach(function(a){e._values[a]=t[f.defaultKey(a)]})},a.prototype.componentWillReceiveProps=function(t){var a=this,r=this.props;e.componentWillReceiveProps&&e.componentWillReceiveProps.call(this,t),T.forEach(function(e){void 0===f.getValue(t,e)&&void 0!==f.getValue(r,e)&&(a._values[e]=t[f.defaultKey(e)])})},a.prototype.componentWillUnmount=function(){this.unmounted=!0},a.prototype.getControlledInstance=function(){return this.refs.inner},a.prototype.render=function(){var e=this,t={},a=p(this.props);return f.each(n,function(a,r){var s=f.getLinkName(r),o=e.props[r];s&&!c(e.props,r)&&c(e.props,s)&&(o=e.props[s].value),t[r]=void 0!==o?o:e._values[r],t[a]=u.bind(e,r)}),t=l({},a,t,{ref:E?"inner":null}),d.default.createElement(r,t)},a}(d.default.Component),h.displayName="Uncontrolled("+b+")",h.propTypes=g,y);return l(S.prototype,v),S.ControlledComponent=r,S.deferControlTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return a(e,l({},n,t),r)},S}return a}a.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a.default=n;var u=e("react"),d=r(u),c=e("invariant"),m=r(c),p=e("./utils"),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(p);t.exports=a.default},{"./utils":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/utils.js",invariant:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/index.js":[function(e,t,a){"use strict";function r(e,t,a,r,s){a&&(e._notifying=!0,a.call.apply(a,[e,r].concat(s)),e._notifying=!1),e._values[t]=r,e.unmounted||e.forceUpdate()}a.__esModule=!0;var s=e("./createUncontrollable"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),i={shouldComponentUpdate:function(){return!this._notifying}};a.default=(0,o.default)(i,r),t.exports=a.default},{"./createUncontrollable":"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/createUncontrollable.js"}],"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/uncontrollable/utils.js":[function(e,t,a){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return function(a,r){if(void 0!==a[r]&&!a[e])return new Error("You have provided a `"+r+"` prop to `"+t+"` without an `"+e+"` handler. This will render a read-only field. If the field should be mutable use `"+d(r)+"`. Otherwise, set `"+e+"`")}}function o(e,a,r){var o={};return"production"!==t.env.NODE_ENV&&a&&m(e,function(e,t,a){(0,b.default)("string"==typeof t&&t.trim().length,"Uncontrollable - [%s]: the prop `%s` needs a valid handler key name in order to make it uncontrollable",r,a),e[a]=s(t,r)},o),o}function i(e){return _[0]>=15||0===_[0]&&_[1]>=13?e:e.type}function n(e,t){var a=u(t);return a&&!l(e,t)&&l(e,a)?e[a].value:e[t]}function l(e,t){return void 0!==e[t]}function u(e){return"value"===e?"valueLink":"checked"===e?"checkedLink":null}function d(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e,t,a){return function(){for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];t&&t.call.apply(t,[e].concat(s)),a&&a.call.apply(a,[e].concat(s))}}function m(e,t,a){return p(e,t.bind(null,a=a||(Array.isArray(e)?[]:{}))),a}function p(e,t,a){if(Array.isArray(e))return e.forEach(t,a);for(var r in e)f(e,r)&&t.call(a,e[r],r,e)}function f(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function h(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}a.__esModule=!0,a.version=void 0,a.uncontrolledPropTypes=o,a.getType=i,a.getValue=n,a.getLinkName=u,a.defaultKey=d,a.chain=c,a.transform=m,a.each=p,a.has=f,a.isReactComponent=h;var y=e("react"),g=r(y),v=e("invariant"),b=r(v),_=a.version=g.default.version.split(".").map(parseFloat)}).call(this,e("_process"))},{_process:"/home/travis/build/hotosm/imagery-coordination/node_modules/browserify/node_modules/process/browser.js",invariant:"/home/travis/build/hotosm/imagery-coordination/node_modules/react-widgets/node_modules/invariant/browser.js",react:"react"}]},{},["/home/travis/build/hotosm/imagery-coordination/app/assets/scripts/main.js"]);